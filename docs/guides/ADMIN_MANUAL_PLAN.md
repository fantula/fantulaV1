# 后台管理系统文档编写与分类方案

## 一、 现有文档分类重组方案

建议将 `/docs` 目录下的文档按以下三个维度进行归类整理，以便于开发和维护：

### 1. 技术架构与规范 (Architecture & Standards)
*存放系统架构、基础组件使用规范及数据库连接规则。*
- **`API_ARCHITECTURE_STANDARD.md`**: API 接口架构标准
- **`SUPABASE_CLIENT_RULES.md`**: Supabase 客户端使用规则
- **`ASSETS_RULES.md`**: 静态资源管理规范

### 2. 核心业务规则 (Core Business Rules)
*存放不可轻易修改的核心业务逻辑定义与红线规则。*
- **`CORE_LOGIC.md`**: 核心业务逻辑总览 (商品类型关联、CDK映射等)
- **`CORE_FREEZE_RULES.md`**: 核心冻结与库存规则
- **`DATABASE_USER_RELATION_RULES.md`**: 数据库与用户关联规则

### 3. 开发手册 (Development Guides)
*存放具体的开发指南、操作手册及版本记录。*
- **`ADMIN_DEVELOPMENT_GUIDE.md`**: 后台开发综合指南
- **`backend_v1.md`**: 后端 V1 版本说明
- **[NEW] `ADMIN_OPERATION_MANUAL.md`**: (待创建) 后台功能/页面操作说明书

---

## 二、 后台功能/页面操作说明书 (4页结构)

针对“订单管理”、“商品管理”、“CDK管理”、“优惠券管理”四大模块，制定精细化操作手册。

### Page 1: 订单管理 (Order Management)
**核心目标**: 规范订单流转、发货与售后处理逻辑。
*   **1.1 订单列表与筛选**
    *   页面：`orders/index.vue` (或其他入口)
    *   逻辑：多维度筛选（状态、用户、单号）、导出功能。
*   **1.2 虚拟充值订单 (`orders/recharge`)**
    *   弹窗/操作：自动充值触发、手动补单、充值状态回源。
*   **1.3 卡密/激活码订单 (`orders/cdkey`)**
    *   弹窗/操作：自动发货逻辑、库存不足时的手动补发弹窗。
*   **1.4 账号合租订单 (`orders/share`)**
    *   弹窗/操作：车位分配确认、账号续费逻辑。
*   **1.5 预售订单 (`orders/preorders`)**
    *   操作：预售转正式、发货通知。
*   **1.6 退款与售后 (`orders/refund`)**
    *   弹窗：退款审核弹窗（同意/拒绝理由）、金额校验。

### Page 2: 商品管理 (Product Management)
**核心目标**: 明确商品发布、SKU 组合与上架流程。
*   **2.1 商品分类 (`products/categories.vue`)**
    *   弹窗：新增/编辑分类（图标、排序）。
*   **2.2 SKU 规格管理 (`products/skus.vue`)**
    *   逻辑：规格模板定义、属性值管理。
*   **2.3 商品发布/编辑 (`products/post.vue`)**
    *   **核心逻辑**：
        *   基础信息（名称、介绍）。
        *   **SKU 绑定**（重要）：通过 `product_sku_map` 关联规格。
        *   定价策略与库存预警。
*   **2.4 共享库存商品 (`products/shared-sku.vue`)**
    *   逻辑：多商品共用同一库存池的配置。

### Page 3: CDK 管理 (CDK Asset Management)
**核心目标**: 确保资产导入准确、库存状态清晰。
*   **3.1 CDK 总览 (`cdk/cdks.vue`)**
    *   逻辑：全量 CDK 状态监控（idle/using/used/expired）。
    *   功能：关联商品显示（Product Snapshot）、批量删除/下架。
*   **3.2 新增/导入 CDK (`cdk/post.vue`)**
    *   **核心弹窗/流程**：
        *   **单条新增**：表单填写。
        *   **批量解析**：文本框输入 -> 解析工具 -> 格式校验（去重、SKU 匹配）。
        *   **关联商品**：选择分类 -> 产品 -> SKU (前端交互逻辑)。
*   **3.3 分类管理视图**
    *   `cdk/virtual.vue` (虚拟充值池)
    *   `cdk/accounts.vue` (账号池 - 车位管理)
    *   `cdk/keys.vue` (卡密池)
*   **3.4 编辑与详情 (`cdk/edit/[id].vue`)**
    *   逻辑：修改库存、状态流转、查看使用日志。

### Page 4: 优惠券管理 (Coupon & Marketing)
**核心目标**: 灵活创建营销活动与数据追踪。
*   **4.1 优惠券类型管理**
    *   **立减券 (`coupons/flat`)**: 固定金额减免配置。
    *   **折扣券/余额券 (`coupons/balance`)**: 充值余额相关。
    *   **商品券 (`coupons/product`)**: 特定商品兑换券。
*   **4.2 优惠券创建流程**
    *   弹窗/表单：设置面额、有效期 (`start_date`, `end_date`)、发行数量、绑定 SKU/Product。
*   **4.3 发行与生成**
    *   逻辑：手动生成券码、随机生成 vs 自定义码。
*   **4.4 统计与监控 (`coupons/stats`)**
    *   列表：查看券码状态（**已使用/已过期**）。
    *   字段：显示 8位用户 ID、领取时间、使用时间。
    *   操作：删除过期/已使用记录（数据清理）。

---

## 三、 执行计划

1.  **确认方案**：请确认上述文档分类和手册结构是否符合预期。
2.  **详细扫描**：确认后，我将逐个打开上述页面代码，提取具体的弹窗字段校验逻辑、按钮触发条件等细节。
3.  **编写文档**：按页编写详细的操作说明书 (Markdown 格式)。
