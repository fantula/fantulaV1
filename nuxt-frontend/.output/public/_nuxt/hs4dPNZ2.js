import{bi as h,f as X,bX as z,b$ as B,b as I,cv as D,aF as L,bY as k,r as N,h as H,cw as W,cd as $,cx as C}from"./CEI0siaN.js";import{P as w}from"./OwHC_0Ap.js";const j=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,c=!1;return{onClick:t=>{o&&c&&e(t),o=c=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{c=t.target===t.currentTarget}}},A=z({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),F={click:e=>e instanceof MouseEvent},U="overlay";var K=X({name:"ElOverlay",props:A,emits:F,setup(e,{slots:o,emit:c}){const l=B(U),n=M=>{c("click",M)},{onClick:u,onMousedown:t,onMouseup:f}=j(e.customMaskEvent?void 0:n);return()=>e.mask?I("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:t,onMouseup:f},[L(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):D("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(o,"default")])}});const G=K,J=(e,o,c,l)=>{const n={offsetX:0,offsetY:0},u=N(!1),t=(s,a)=>{if(e.value){const{offsetX:m,offsetY:v}=n,i=e.value.getBoundingClientRect(),r=i.left,d=i.top,p=i.width,g=i.height,y=document.documentElement.clientWidth,b=document.documentElement.clientHeight,T=-r+m,Y=-d+v,O=y-r-p+m,S=b-d-(g<b?g:0)+v;l?.value||(s=Math.min(Math.max(s,T),O),a=Math.min(Math.max(a,Y),S)),n.offsetX=s,n.offsetY=a,e.value.style.transform=`translate(${C(s)}, ${C(a)})`}},f=s=>{const a=s.clientX,m=s.clientY,{offsetX:v,offsetY:i}=n,r=p=>{u.value||(u.value=!0);const g=v+p.clientX-a,y=i+p.clientY-m;t(g,y)},d=()=>{u.value=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",d)},M=()=>{o.value&&e.value&&(o.value.addEventListener("mousedown",f),window.addEventListener("resize",E))},x=()=>{o.value&&e.value&&(o.value.removeEventListener("mousedown",f),window.removeEventListener("resize",E))},P=()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},E=()=>{const{offsetX:s,offsetY:a}=n;t(s,a)};return H(()=>{W(()=>{c.value?M():x()})}),$(()=>{x()}),{isDragging:u,resetPosition:P,updatePosition:E}};export{G as E,j as a,A as b,F as o,J as u};
