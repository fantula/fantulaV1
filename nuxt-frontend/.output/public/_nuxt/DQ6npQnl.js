import{E as L}from"./CswOF4xx.js";import{f as M,r as i,h as j,c as u,a as r,i as A,b as o,w as a,B as b,o as s,d as n,E as G,l as F,p as O,F as H,k as J,G as f,j as Q,t as C,bN as R,_ as W}from"./gYbOYKrZ.js";import{a as Y,E as Z}from"./CdHOYNgq.js";import{E as ee,a as te}from"./A8Zj-15Y.js";import{E as oe}from"./DrogL690.js";import{a as ae,E as le}from"./Dj2lpOJg.js";import{E as se}from"./BxcDqkou.js";import{E as re}from"./Bzz8SiwP.js";import{E as ne}from"./Cq19oc2c.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{a as w}from"./DkGBDzDg.js";import{v as ie}from"./CUySdIcD.js";import"./D4AXxtJy.js";import"./Dnj8X3EN.js";import"./CaswxL1d.js";import"./BdJc3h2o.js";import"./C3yI_83l.js";import"./BlcygIWm.js";import"./Bh6H2ams.js";import"./CUkNyi1D.js";import"./BSx1rCp4.js";import"./Cq9Fpw4b.js";import"./B-n2-D39.js";import"./Cr8dt13I.js";import"./C5EOtA6j.js";import"./DxwfhIR6.js";import"./BYT9QUPE.js";import"./BB_Ol6Sd.js";import"./CrRq4wwb.js";import"./YvAJPawC.js";import"./CqTJWtX6.js";import"./pxhmPWjv.js";import"./BNtqh2Az.js";import"./-tO7MSA0.js";import"./BPYHQo7_.js";import"./DtgOm6Sf.js";const pe={class:"faq-list-page"},me={class:"page-header"},de={class:"header-right"},ue={class:"toolbar-card"},ce={class:"table-card"},_e={class:"question-text"},fe={key:1,class:"text-gray-400"},ge={key:0,class:"bound-product"},ve={key:1,class:"text-gray-400"},ye={class:"pagination-row"},Ee=M({__name:"index",setup(ke){const g=i(!1),q=i([]),x=i([]),h=i(0),v=i(1),y=i(20),c=i(""),_=i(""),V=async()=>{const l=await w.getCategories();l.success&&(x.value=l.categories)},p=async()=>{g.value=!0;try{const l=await w.getFaqs({page:v.value,page_size:y.value,keyword:c.value,category_id:_.value||void 0});l.success?(q.value=l.faqs,h.value=l.total):b.error(l.error||"获取列表失败")}finally{g.value=!1}},$=async l=>{const e=await w.deleteFaq(l);e.success?(b.success("删除成功"),p()):b.error(e.error||"删除失败")},B=()=>{c.value="",_.value="",p()};return j(()=>{V(),p()}),(l,e)=>{const m=L,z=G,S=Z,I=Y,E=te,N=oe,P=ee,d=le,k=se,T=re,U=ae,D=ne,X=ie;return s(),u("div",pe,[r("div",me,[e[8]||(e[8]=r("div",{class:"header-left"},[r("h2",{class:"page-title"},"常见问题管理"),r("span",{class:"page-desc"},"管理帮助中心的常见问题及解答")],-1)),r("div",de,[o(m,{onClick:e[0]||(e[0]=t=>l.$router.push("/_mgmt_9Xfa3/faq/category"))},{default:a(()=>[...e[6]||(e[6]=[n("分类管理",-1)])]),_:1}),o(m,{type:"primary",onClick:e[1]||(e[1]=t=>l.$router.push("/_mgmt_9Xfa3/faq/post"))},{default:a(()=>[o(z,null,{default:a(()=>[o(F(O))]),_:1}),e[7]||(e[7]=n(" 添加问题 ",-1))]),_:1})])]),r("div",ue,[o(P,{inline:!0,class:"search-form"},{default:a(()=>[o(E,null,{default:a(()=>[o(I,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value=t),placeholder:"全部分类",clearable:"",style:{width:"150px"}},{default:a(()=>[(s(!0),u(H,null,J(x.value,t=>(s(),f(S,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(N,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=t=>c.value=t),placeholder:"搜索问题关键词...","prefix-icon":"Search",clearable:"",onKeyup:Q(p,["enter"])},null,8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(m,{type:"primary",onClick:p},{default:a(()=>[...e[9]||(e[9]=[n("查询",-1)])]),_:1}),o(m,{onClick:B},{default:a(()=>[...e[10]||(e[10]=[n("重置",-1)])]),_:1})]),_:1})]),_:1})]),A((s(),u("div",ce,[o(U,{data:q.value,style:{width:"100%"},stripe:""},{default:a(()=>[o(d,{prop:"sort_order",label:"排序",width:"80",align:"center"}),o(d,{label:"问题","min-width":"250"},{default:a(({row:t})=>[r("span",_e,C(t.question),1)]),_:1}),o(d,{label:"分类",width:"150"},{default:a(({row:t})=>[t.category?(s(),f(k,{key:0,type:"info",effect:"plain"},{default:a(()=>[n(C(t.category.name),1)]),_:2},1024)):(s(),u("span",fe,"未分类"))]),_:1}),o(d,{label:"关联商品",width:"200"},{default:a(({row:t})=>[t.product?(s(),u("div",ge,[o(z,null,{default:a(()=>[o(F(R))]),_:1}),r("span",null,C(t.product.product_name),1)])):(s(),u("span",ve,"-"))]),_:1}),o(d,{label:"状态",width:"100",align:"center"},{default:a(({row:t})=>[t.is_active?(s(),f(k,{key:0,type:"success",size:"small"},{default:a(()=>[...e[11]||(e[11]=[n("启用",-1)])]),_:1})):(s(),f(k,{key:1,type:"danger",size:"small"},{default:a(()=>[...e[12]||(e[12]=[n("禁用",-1)])]),_:1}))]),_:1}),o(d,{label:"操作",width:"180",align:"center",fixed:"right"},{default:a(({row:t})=>[o(m,{type:"primary",link:"",size:"small",onClick:K=>l.$router.push(`/_mgmt_9Xfa3/faq/post?id=${t.id}`)},{default:a(()=>[...e[13]||(e[13]=[n(" 编辑 ",-1)])]),_:1},8,["onClick"]),o(T,{title:"确定要删除这个问题吗？",onConfirm:K=>$(t.id)},{reference:a(()=>[o(m,{type:"danger",link:"",size:"small"},{default:a(()=>[...e[14]||(e[14]=[n("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),r("div",ye,[o(D,{"current-page":v.value,"onUpdate:currentPage":e[4]||(e[4]=t=>v.value=t),"page-size":y.value,"onUpdate:pageSize":e[5]||(e[5]=t=>y.value=t),total:h.value,layout:"total, prev, pager, next",onCurrentChange:p},null,8,["current-page","page-size","total"])])])),[[X,g.value]])])}}}),_t=W(Ee,[["__scopeId","data-v-30f8d51a"]]);export{_t as default};
