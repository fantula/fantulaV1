import{b_ as _,eC as G,g as f,d0 as W,r as c,J,cs as H,cg as Z,cA as j,c3 as K,f as Q,bY as x,c2 as ee,cZ as ae,G as se,o as y,w as S,b as R,T as te,l as e,i as oe,a as N,c4 as re,aG as le,c as A,D as z,n,aI as L,t as ne,E as ie,d1 as de,aD as ue,aU as fe,c6 as ce}from"./gYbOYKrZ.js";import{E as ve}from"./DEN0lkI5.js";import{E as pe}from"./CUkNyi1D.js";import{E as me}from"./BlcygIWm.js";import{d as be,a as we,u as ge}from"./qZy57oqE.js";import{u as he}from"./D4AXxtJy.js";const ye=_({...we,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),ze={...be,"resize-start":(t,r)=>t instanceof MouseEvent&&typeof r=="number",resize:(t,r)=>t instanceof MouseEvent&&typeof r=="number","resize-end":(t,r)=>t instanceof MouseEvent&&typeof r=="number"};function Ee(t,r,E){const{width:v,height:T}=G(),p=f(()=>["ltr","rtl"].includes(t.direction)),k=f(()=>["ltr","ttb"].includes(t.direction)?1:-1),D=f(()=>p.value?v.value:T.value),m=f(()=>W(s.value+k.value*b.value,4,D.value)),s=c(0),b=c(0),i=c(!1),d=c(!1);let w=[],u=[];const P=()=>{var o;const l=(o=r.value)==null?void 0:o.closest('[aria-modal="true"]');return l?p.value?l.offsetWidth:l.offsetHeight:100};J(()=>[t.size,t.resizable],()=>{d.value=!1,s.value=0,b.value=0,g()});const C=o=>{t.resizable&&(d.value||(s.value=P(),d.value=!0),w=[o.pageX,o.pageY],i.value=!0,E("resize-start",o,s.value),u.push(H(window,"mouseup",g),H(window,"mousemove",B)))},B=o=>{const{pageX:l,pageY:$}=o,I=l-w[0],h=$-w[1];b.value=p.value?I:h,E("resize",o,m.value)},g=o=>{i.value&&(w=[],s.value=m.value,b.value=0,i.value=!1,u.forEach(l=>l?.()),u=[],o&&E("resize-end",o,s.value))},M=H(r,"mousedown",C);return Z(()=>{M(),g()}),{size:f(()=>d.value?`${m.value}px`:j(t.size)),isResizing:i,isHorizontal:p}}const ke=["aria-label","aria-labelledby","aria-describedby"],Ce=["id","aria-level"],Se=["aria-label"],Re=["id"],Ae=Q({name:"ElDrawer",inheritAttrs:!1,__name:"drawer",props:ye,emits:ze,setup(t,{expose:r,emit:E}){const v=t,T=E,p=x();he({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},f(()=>!!p.title));const k=c(),D=c(),m=c(),s=ee("drawer"),{t:b}=ae(),{afterEnter:i,afterLeave:d,beforeLeave:w,visible:u,rendered:P,titleId:C,bodyId:B,zIndex:g,onModalClick:M,onOpenAutoFocus:o,onCloseAutoFocus:l,onFocusoutPrevented:$,onCloseRequested:I,handleClose:h}=ge(v,k),{isHorizontal:Y,size:q,isResizing:O}=Ee(v,m,T),V=f(()=>v.modalPenetrable&&!v.modal);return r({handleClose:h,afterEnter:i,afterLeave:d}),(a,F)=>(y(),se(e(me),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:S(()=>[R(te,{name:e(s).b("fade"),onAfterEnter:e(i),onAfterLeave:e(d),onBeforeLeave:e(w),persisted:""},{default:S(()=>{var U;return[oe(R(e(ve),{mask:a.modal,"overlay-class":[e(s).is("drawer"),(U=a.modalClass)!=null?U:"",`${e(s).namespace.value}-modal-drawer`,e(s).is("penetrable",V.value)],"z-index":e(g),onClick:e(M)},{default:S(()=>[R(e(pe),{loop:"",trapped:e(u),"focus-trap-el":k.value,"focus-start-el":D.value,onFocusAfterTrapped:e(o),onFocusAfterReleased:e(l),onFocusoutPrevented:e($),onReleaseRequested:e(I)},{default:S(()=>[N("div",re({ref_key:"drawerRef",ref:k,"aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(C),"aria-describedby":e(B)},a.$attrs,{class:[e(s).b(),a.direction,e(u)&&"open",e(s).is("dragging",e(O))],style:{[e(Y)?"width":"height"]:e(q)},role:"dialog",onClick:F[1]||(F[1]=le(()=>{},["stop"]))}),[N("span",{ref_key:"focusStartRef",ref:D,class:n(e(s).e("sr-focus")),tabindex:"-1"},null,2),a.withHeader?(y(),A("header",{key:0,class:n([e(s).e("header"),a.headerClass])},[a.$slots.title?L(a.$slots,"title",{key:1},()=>[z(" DEPRECATED SLOT ")]):L(a.$slots,"header",{key:0,close:e(h),titleId:e(C),titleClass:e(s).e("title")},()=>[N("span",{id:e(C),role:"heading","aria-level":a.headerAriaLevel,class:n(e(s).e("title"))},ne(a.title),11,Ce)]),a.showClose?(y(),A("button",{key:2,"aria-label":e(b)("el.drawer.close"),class:n(e(s).e("close-btn")),type:"button",onClick:F[0]||(F[0]=(...X)=>e(h)&&e(h)(...X))},[R(e(ie),{class:n(e(s).e("close"))},{default:S(()=>[R(e(de))]),_:1},8,["class"])],10,Se)):z("v-if",!0)],2)):z("v-if",!0),e(P)?(y(),A("div",{key:1,id:e(B),class:n([e(s).e("body"),a.bodyClass])},[L(a.$slots,"default")],10,Re)):z("v-if",!0),a.$slots.footer?(y(),A("div",{key:2,class:n([e(s).e("footer"),a.footerClass])},[L(a.$slots,"footer")],2)):z("v-if",!0),a.resizable?(y(),A("div",{key:3,ref_key:"draggerRef",ref:m,style:ue({zIndex:e(g)}),class:n(e(s).e("dragger"))},null,6)):z("v-if",!0)],16,ke)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[fe,e(u)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var De=K(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const $e=ce(De);export{$e as E,ye as a,ze as d};
