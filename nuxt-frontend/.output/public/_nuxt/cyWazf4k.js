import{a as X,E as Y}from"./CrjkcmUY.js";import{f as Z,r as v,am as F,c as N,a as s,b as t,w as o,o as b,j as ee,E as te,l as T,ew as S,d as r,a_ as oe,i as le,G as U,t as n,D as k,F as ae,B as E,_ as re}from"./o2XBa361.js";import{E as ne}from"./1SfIsks3.js";import{E as se}from"./-Yx_0iEM.js";import{E as ie}from"./CFoaU_UR.js";import{a as de,E as ue}from"./Ci1VNkC9.js";import{E as pe}from"./DC3lfPj1.js";import{E as me}from"./BOgRz4Th.js";import{E as fe,a as ce}from"./CvpqM1dK.js";import{E as _e}from"./CziALilw.js";import{E as ve,a as ge}from"./0BTaD5f-.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{v as ye}from"./BwD4Hz0h.js";import"./qVmxJdp3.js";import"./CqX7ZdKI.js";import"./Dlk0BVst.js";import"./DtTI1xRr.js";import"./Bh6H2ams.js";import"./t2w4jifC.js";import"./Dnj8X3EN.js";import"./ClnTspdU.js";import"./Cq9Fpw4b.js";import"./B8yeDp5P.js";import"./B_FoF6yT.js";import"./BlW_46uR.js";import"./Ds34GQx2.js";import"./Dzr5IOAO.js";import"./Culj45X8.js";import"./BB_Ol6Sd.js";import"./Z6faUBN3.js";import"./KSqZSeJ0.js";import"./CQuNCUIC.js";import"./DVQwC1Y0.js";import"./C9zJf5rn.js";import"./Bx0EXMjc.js";import"./hXKBSGVD.js";import"./BCItYl8Z.js";import"./FKUjHIpz.js";import"./D6FW0B1r.js";import"./CleHDoLI.js";const be={class:"refund-page"},Ee={class:"filter-container"},we={class:"filter-left"},xe={class:"pagination-wrapper",style:{"margin-top":"20px",display:"flex","justify-content":"flex-end"}},Ve={key:0,class:"detail-container"},Ne={style:{color:"#F56C6C"}},Te={class:"dialog-footer"},ke={class:"dialog-footer"},Ce={class:"dialog-footer"},De=Z({__name:"index",setup(Ie){const u=v(!1),f=F({status:"",uid:""}),c=v(!1),g=v(!1),y=v(!1),_=F({reason:""}),l=v(null),O=v([{id:"1",refundNo:"REF202505200001",orderNo:"ORD202505201001",uid:"10086",amount:99,applyTime:"2025-05-20 14:30:00",status:"pending",reason:"买错了，不需要了",orderInfo:{orderNo:"ORD202505201001",productName:"高级会员年卡",productSpec:"12个月",paidAmount:99,payTime:"2025-05-20 10:00:00",expiryTime:"2026-05-20 10:00:00",paymentMethod:"微信支付"}},{id:"2",refundNo:"REF202505190005",orderNo:"ORD202505190888",uid:"10010",amount:299,applyTime:"2025-05-19 16:00:00",status:"refunded",reason:"商品描述不符",orderInfo:{orderNo:"ORD202505190888",productName:"限量版皮肤礼包",productSpec:"全套",paidAmount:299,payTime:"2025-05-19 12:00:00",expiryTime:"永久",paymentMethod:"支付宝"}},{id:"3",refundNo:"REF202505180022",orderNo:"ORD202505180666",uid:"9527",amount:50,applyTime:"2025-05-18 09:30:00",status:"rejected",reason:"不想玩了",rejectReason:"虚拟商品一经发出概不退换",orderInfo:{orderNo:"ORD202505180666",productName:"游戏点券",productSpec:"500点",paidAmount:50,payTime:"2025-05-18 09:00:00",expiryTime:"永久",paymentMethod:"余额支付"}}]),C=p=>({pending:"warning",refunded:"success",rejected:"danger"})[p]||"info",D=p=>({pending:"待处理",refunded:"已退款",rejected:"已驳回"})[p]||p,w=()=>{u.value=!0,setTimeout(()=>{u.value=!1,E.success("查询成功 (Mock)")},500)},A=()=>{u.value=!0,f.status="",f.uid="",setTimeout(()=>{u.value=!1,E.success("已刷新")},500)},B=p=>{l.value=p,c.value=!0},M=()=>{},$=()=>{l.value&&(y.value=!0)},z=()=>{u.value=!0,setTimeout(()=>{u.value=!1,l.value&&(l.value.status="refunded"),y.value=!1,c.value=!1,E.success("操作成功，已同意退款")},800)},K=()=>{_.reason="",g.value=!0},L=()=>{if(!_.reason){E.warning("驳回原因不能为空");return}u.value=!0,setTimeout(()=>{u.value=!1,l.value&&(l.value.status="rejected",l.value.rejectReason=_.reason),g.value=!1,c.value=!1,E.warning("已驳回该退款申请")},800)};return(p,e)=>{const x=Y,P=X,G=te,I=ne,i=se,R=ie,m=ue,j=pe,q=de,H=me,d=ce,h=fe,V=_e,J=ge,Q=ve,W=ye;return b(),N("div",be,[e[21]||(e[21]=s("div",{class:"page-header"},[s("h2",null,"退款管理")],-1)),t(R,{shadow:"never",class:"filter-card"},{default:o(()=>[s("div",Ee,[s("div",we,[t(P,{modelValue:f.status,"onUpdate:modelValue":e[0]||(e[0]=a=>f.status=a),placeholder:"退款状态",clearable:"",style:{width:"150px","margin-right":"15px"},onChange:w},{default:o(()=>[t(x,{label:"待处理",value:"pending"}),t(x,{label:"已驳回",value:"rejected"}),t(x,{label:"已退款",value:"refunded"})]),_:1},8,["modelValue"]),t(I,{modelValue:f.uid,"onUpdate:modelValue":e[1]||(e[1]=a=>f.uid=a),placeholder:"用户UID",clearable:"",style:{width:"200px","margin-right":"15px"},onKeyup:ee(w,["enter"])},{prefix:o(()=>[t(G,null,{default:o(()=>[t(T(S))]),_:1})]),_:1},8,["modelValue"]),t(i,{type:"primary",icon:T(S),onClick:w},{default:o(()=>[...e[9]||(e[9]=[r("查询",-1)])]),_:1},8,["icon"]),t(i,{icon:T(oe),onClick:A},{default:o(()=>[...e[10]||(e[10]=[r("刷新",-1)])]),_:1},8,["icon"])])])]),_:1}),t(R,{shadow:"never",class:"list-card"},{default:o(()=>[le((b(),U(q,{data:O.value,style:{width:"100%"},border:""},{default:o(()=>[t(m,{prop:"refundNo",label:"退款编号","min-width":"180","show-overflow-tooltip":""}),t(m,{prop:"orderNo",label:"关联订单号","min-width":"180","show-overflow-tooltip":""}),t(m,{prop:"uid",label:"用户UID",width:"120"}),t(m,{label:"退款金额",width:"120"},{default:o(({row:a})=>[r(" ¥"+n(a.amount),1)]),_:1}),t(m,{prop:"applyTime",label:"申请时间",width:"180"}),t(m,{label:"状态",width:"120",align:"center"},{default:o(({row:a})=>[t(j,{type:C(a.status)},{default:o(()=>[r(n(D(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(m,{label:"操作",width:"120",fixed:"right",align:"center"},{default:o(({row:a})=>[t(i,{link:"",type:"primary",onClick:Re=>B(a)},{default:o(()=>[r(n(a.status==="pending"?"处理":"查看"),1)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[W,u.value]]),s("div",xe,[t(H,{background:"",layout:"prev, pager, next",total:100})])]),_:1}),t(V,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),title:l.value?.status==="pending"?"处理退款申请":"查看退款详情",width:"700px",onClose:M},{footer:o(()=>[s("span",Te,[t(i,{onClick:e[2]||(e[2]=a=>c.value=!1)},{default:o(()=>[...e[13]||(e[13]=[r("关闭",-1)])]),_:1}),l.value?.status==="pending"?(b(),N(ae,{key:0},[t(i,{type:"danger",onClick:K},{default:o(()=>[...e[14]||(e[14]=[r("驳回退款",-1)])]),_:1}),t(i,{type:"primary",onClick:$},{default:o(()=>[...e[15]||(e[15]=[r("同意退款",-1)])]),_:1})],64)):k("",!0)])]),default:o(()=>[l.value?(b(),N("div",Ve,[e[11]||(e[11]=s("div",{class:"section-title"},"订单信息",-1)),t(h,{column:2,border:"",size:"small"},{default:o(()=>[t(d,{label:"订单号"},{default:o(()=>[r(n(l.value.orderInfo.orderNo),1)]),_:1}),t(d,{label:"实付金额"},{default:o(()=>[r("¥"+n(l.value.orderInfo.paidAmount),1)]),_:1}),t(d,{label:"商品名称",span:2},{default:o(()=>[r(n(l.value.orderInfo.productName),1)]),_:1}),t(d,{label:"商品规格",span:2},{default:o(()=>[r(n(l.value.orderInfo.productSpec),1)]),_:1}),t(d,{label:"支付时间"},{default:o(()=>[r(n(l.value.orderInfo.payTime),1)]),_:1}),t(d,{label:"支付方式"},{default:o(()=>[r(n(l.value.orderInfo.paymentMethod),1)]),_:1}),t(d,{label:"过期时间",span:2},{default:o(()=>[r(n(l.value.orderInfo.expiryTime),1)]),_:1})]),_:1}),e[12]||(e[12]=s("div",{class:"section-title",style:{"margin-top":"20px"}},"退款申请信息",-1)),t(h,{column:1,border:"",size:"small"},{default:o(()=>[t(d,{label:"退款理由"},{default:o(()=>[r(n(l.value.reason),1)]),_:1}),t(d,{label:"当前状态"},{default:o(()=>[t(j,{type:C(l.value.status)},{default:o(()=>[r(n(D(l.value.status)),1)]),_:1},8,["type"])]),_:1}),l.value.status==="rejected"&&l.value.rejectReason?(b(),U(d,{key:0,label:"驳回原因"},{default:o(()=>[s("span",Ne,n(l.value.rejectReason),1)]),_:1})):k("",!0)]),_:1})])):k("",!0)]),_:1},8,["modelValue","title"]),t(V,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=a=>g.value=a),title:"驳回退款",width:"400px","append-to-body":""},{footer:o(()=>[s("span",ke,[t(i,{onClick:e[5]||(e[5]=a=>g.value=!1)},{default:o(()=>[...e[16]||(e[16]=[r("取消",-1)])]),_:1}),t(i,{type:"danger",onClick:L},{default:o(()=>[...e[17]||(e[17]=[r("确认驳回",-1)])]),_:1})])]),default:o(()=>[t(Q,{model:_,"label-width":"80px"},{default:o(()=>[t(J,{label:"驳回原因"},{default:o(()=>[t(I,{modelValue:_.reason,"onUpdate:modelValue":e[4]||(e[4]=a=>_.reason=a),type:"textarea",rows:3,placeholder:"请输入驳回原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(V,{modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=a=>y.value=a),title:"确认同意退款",width:"400px","append-to-body":""},{footer:o(()=>[s("span",Ce,[t(i,{onClick:e[7]||(e[7]=a=>y.value=!1)},{default:o(()=>[...e[18]||(e[18]=[r("取消",-1)])]),_:1}),t(i,{type:"primary",onClick:z},{default:o(()=>[...e[19]||(e[19]=[r("确认同意",-1)])]),_:1})])]),default:o(()=>[e[20]||(e[20]=s("span",null,"确认同意该退款申请吗？操作后资金将退回用户钱包。",-1))]),_:1},8,["modelValue"])])}}}),ht=re(De,[["__scopeId","data-v-27f3e0b9"]]);export{ht as default};
