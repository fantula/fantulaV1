import{cp as se,bw as oe,b_ as Ve,b$ as ne,c1 as ke,b9 as Ie,r as ee,g,J as de,cs as ce,K as me,c8 as Re,c9 as j,c3 as Pe,f as ye,c2 as he,am as pe,ch as be,c as $,o as L,b as Me,w as Ee,a as D,n as U,l,t as Fe,aD as Q,bn as Be,cy as Ke,bd as Xe,h as Ye,cZ as $e,c5 as Ue,G as ve,D as ie,F as ue,k as fe,aG as We,c6 as Oe}from"./gYbOYKrZ.js";import{E as Ae}from"./B94kvl1B.js";import{a as Ne,E as _e}from"./CaswxL1d.js";import{u as je}from"./BdJc3h2o.js";import{C as Te,I as we,U as re}from"./BB_Ol6Sd.js";import{d as xe}from"./BPYHQo7_.js";import{c as Ge}from"./B-n2-D39.js";import{a as He,c as Je,d as Ze,b as qe}from"./D4AXxtJy.js";import{t as Qe,d as Ce}from"./Cq9Fpw4b.js";const ze=Symbol("sliderContextKey"),De=Ve({modelValue:{type:ne([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ke,inputSize:ke,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ne(Function),default:void 0},disabled:{type:Boolean,default:void 0},range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ne(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ne,default:"top"},marks:{type:ne(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...je(["ariaLabel"])}),ge=e=>se(e)||oe(e)&&e.every(se),et={[re]:ge,[we]:ge,[Te]:ge},tt=Ve({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ne,default:"top"}}),lt={[re]:e=>se(e)},at=(e,t,d)=>{const a=ee(),m=ee(!1),n=g(()=>t.value instanceof Function),i=g(()=>n.value&&t.value(e.modelValue)||e.modelValue),b=xe(()=>{d.value&&(m.value=!0)},50),V=xe(()=>{d.value&&(m.value=!1)},50);return{tooltip:a,tooltipVisible:m,formatValue:i,displayTooltip:b,hideTooltip:V}},nt=(e,t,d)=>{const{disabled:a,min:m,max:n,step:i,showTooltip:b,persistent:V,precision:r,sliderSize:v,formatTooltip:c,emitChange:w,resetSize:W,updateDragging:O}=Ie(ze),{tooltip:R,tooltipVisible:M,formatValue:x,displayTooltip:C,hideTooltip:P}=at(e,c,b),N=ee(),S=g(()=>`${(e.modelValue-m.value)/(n.value-m.value)*100}%`),T=g(()=>e.vertical?{bottom:S.value}:{left:S.value}),A=()=>{t.hovering=!0,C()},k=()=>{t.hovering=!1,t.dragging||P()},E=u=>{a.value||(u.preventDefault(),H(u),window.addEventListener("mousemove",K),window.addEventListener("touchmove",K),window.addEventListener("mouseup",I),window.addEventListener("touchend",I),window.addEventListener("contextmenu",I),N.value.focus())},F=u=>{a.value||(t.newPosition=Number.parseFloat(S.value)+u/(n.value-m.value)*100,X(t.newPosition),w())},o=()=>{F(-i.value)},f=()=>{F(i.value)},B=()=>{F(-i.value*4)},J=()=>{F(i.value*4)},G=()=>{a.value||(X(0),w())},Z=()=>{a.value||(X(100),w())},q=u=>{const y=Re(u);let h=!0;switch(y){case j.left:case j.down:o();break;case j.right:case j.up:f();break;case j.home:G();break;case j.end:Z();break;case j.pageDown:B();break;case j.pageUp:J();break;default:h=!1;break}h&&u.preventDefault()},z=u=>{let y,h;return u.type.startsWith("touch")?(h=u.touches[0].clientY,y=u.touches[0].clientX):(h=u.clientY,y=u.clientX),{clientX:y,clientY:h}},H=u=>{t.dragging=!0,t.isClick=!0;const{clientX:y,clientY:h}=z(u);e.vertical?t.startY=h:t.startX=y,t.startPosition=Number.parseFloat(S.value),t.newPosition=t.startPosition},K=u=>{if(t.dragging){t.isClick=!1,C(),W();let y;const{clientX:h,clientY:te}=z(u);e.vertical?(t.currentY=te,y=(t.startY-t.currentY)/v.value*100):(t.currentX=h,y=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+y,X(t.newPosition)}},I=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||P(),t.isClick||X(t.newPosition),w()},0),window.removeEventListener("mousemove",K),window.removeEventListener("touchmove",K),window.removeEventListener("mouseup",I),window.removeEventListener("touchend",I),window.removeEventListener("contextmenu",I))},X=async u=>{if(u===null||Number.isNaN(+u))return;u=Ge(u,0,100);const y=Math.floor((n.value-m.value)/i.value),h=y*i.value/(n.value-m.value)*100,te=h+(100-h)/2;let Y;if(u<h){const s=h/y,_=Math.round(u/s);Y=m.value+_*i.value}else u<te?Y=m.value+y*i.value:Y=n.value;Y=Number.parseFloat(Y.toFixed(r.value)),Y!==e.modelValue&&d(re,Y),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await me(),t.dragging&&C(),R.value.updatePopper()};return de(()=>t.dragging,u=>{O(u)}),ce(N,"touchstart",E,{passive:!1}),{disabled:a,button:N,tooltip:R,tooltipVisible:M,showTooltip:b,persistent:V,wrapperStyle:T,formatValue:x,handleMouseEnter:A,handleMouseLeave:k,onButtonDown:E,onKeyDown:q,setPosition:X}},ot=["tabindex"],st=ye({name:"ElSliderButton",__name:"button",props:tt,emits:lt,setup(e,{expose:t,emit:d}){const a=e,m=d,n=he("slider"),i=pe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),b=g(()=>c.value?w.value:!1),{disabled:V,button:r,tooltip:v,showTooltip:c,persistent:w,tooltipVisible:W,wrapperStyle:O,formatValue:R,handleMouseEnter:M,handleMouseLeave:x,onButtonDown:C,onKeyDown:P,setPosition:N}=nt(a,i,m),{hovering:S,dragging:T}=be(i);return t({onButtonDown:C,onKeyDown:P,setPosition:N,hovering:S,dragging:T}),(A,k)=>(L(),$("div",{ref_key:"button",ref:r,class:U([l(n).e("button-wrapper"),{hover:l(S),dragging:l(T)}]),style:Q(l(O)),tabindex:l(V)?void 0:0,onMouseenter:k[0]||(k[0]=(...E)=>l(M)&&l(M)(...E)),onMouseleave:k[1]||(k[1]=(...E)=>l(x)&&l(x)(...E)),onMousedown:k[2]||(k[2]=(...E)=>l(C)&&l(C)(...E)),onFocus:k[3]||(k[3]=(...E)=>l(M)&&l(M)(...E)),onBlur:k[4]||(k[4]=(...E)=>l(x)&&l(x)(...E)),onKeydown:k[5]||(k[5]=(...E)=>l(P)&&l(P)(...E))},[Me(l(_e),{ref_key:"tooltip",ref:v,visible:l(W),placement:A.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":A.tooltipClass,disabled:!l(c),persistent:b.value},{content:Ee(()=>[D("span",null,Fe(l(R)),1)]),default:Ee(()=>[D("div",{class:U([l(n).e("button"),{hover:l(S),dragging:l(T)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,ot))}});var Le=Pe(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const rt=Ve({mark:{type:ne([String,Object]),default:void 0}});var it=ye({name:"ElSliderMarker",props:rt,setup(e){const t=he("slider"),d=g(()=>Be(e.mark)?e.mark:e.mark.label),a=g(()=>Be(e.mark)?void 0:e.mark.style);return()=>Ke("div",{class:t.e("marks-text"),style:a.value},d.value)}});const ut=(e,t,d)=>{const{formItem:a}=He(),m=Xe(),n=ee(),i=ee(),b={firstButton:n,secondButton:i},V=Je(),r=g(()=>Math.min(t.firstValue,t.secondValue)),v=g(()=>Math.max(t.firstValue,t.secondValue)),c=g(()=>e.range?`${100*(v.value-r.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),w=g(()=>e.range?`${100*(r.value-e.min)/(e.max-e.min)}%`:"0%"),W=g(()=>e.vertical?{height:e.height}:{}),O=g(()=>e.vertical?{height:c.value,bottom:w.value}:{width:c.value,left:w.value}),R=()=>{if(m.value){const o=m.value.getBoundingClientRect();t.sliderSize=o[e.vertical?"height":"width"]}},M=o=>{const f=e.min+o*(e.max-e.min)/100;if(!e.range)return n;let B;return Math.abs(r.value-f)<Math.abs(v.value-f)?B=t.firstValue<t.secondValue?"firstButton":"secondButton":B=t.firstValue>t.secondValue?"firstButton":"secondButton",b[B]},x=o=>{const f=M(o);return f.value.setPosition(o),f},C=o=>{t.firstValue=o??e.min,N(e.range?[r.value,v.value]:o??e.min)},P=o=>{t.secondValue=o,e.range&&N([r.value,v.value])},N=o=>{d(re,o),d(we,o)},S=async()=>{await me(),d(Te,e.range?[r.value,v.value]:e.modelValue)},T=o=>{var f,B,J,G,Z,q;if(V.value||t.dragging)return;R();let z=0;if(e.vertical){const H=(J=(B=(f=o.touches)==null?void 0:f.item(0))==null?void 0:B.clientY)!=null?J:o.clientY;z=(m.value.getBoundingClientRect().bottom-H)/t.sliderSize*100}else{const H=(q=(Z=(G=o.touches)==null?void 0:G.item(0))==null?void 0:Z.clientX)!=null?q:o.clientX,K=m.value.getBoundingClientRect().left;z=(H-K)/t.sliderSize*100}if(!(z<0||z>100))return x(z)};return{elFormItem:a,slider:m,firstButton:n,secondButton:i,sliderDisabled:V,minValue:r,maxValue:v,runwayStyle:W,barStyle:O,resetSize:R,setPosition:x,emitChange:S,onSliderWrapperPrevent:o=>{var f,B;((f=b.firstButton.value)!=null&&f.dragging||(B=b.secondButton.value)!=null&&B.dragging)&&o.preventDefault()},onSliderClick:o=>{T(o)&&S()},onSliderDown:async o=>{const f=T(o);f&&(await me(),f.value.onButtonDown(o))},onSliderMarkerDown:o=>{if(V.value||t.dragging)return;x(o)&&S()},setFirstValue:C,setSecondValue:P}},dt=(e,t,d,a)=>({stops:g(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=Math.ceil((e.max-e.min)/e.step),b=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((r,v)=>(v+1)*b);return e.range?V.filter(r=>r<100*(d.value-e.min)/(e.max-e.min)||r>100*(a.value-e.min)/(e.max-e.min)):V.filter(r=>r>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),ct=e=>g(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),mt=(e,t,d,a,m,n)=>{const i=r=>{m(re,r),m(we,r)},b=()=>e.range?![d.value,a.value].every((r,v)=>r===t.oldValue[v]):e.modelValue!==t.oldValue,V=()=>{var r,v;e.min>e.max&&Qe("Slider","min should not be greater than max.");const c=e.modelValue;e.range&&oe(c)?c[1]<e.min?i([e.min,e.min]):c[0]>e.max?i([e.max,e.max]):c[0]<e.min?i([e.min,c[1]]):c[1]>e.max?i([c[0],e.max]):(t.firstValue=c[0],t.secondValue=c[1],b()&&(e.validateEvent&&((r=n?.validate)==null||r.call(n,"change").catch(w=>Ce())),t.oldValue=c.slice())):!e.range&&se(c)&&!Number.isNaN(c)&&(c<e.min?i(e.min):c>e.max?i(e.max):(t.firstValue=c,b()&&(e.validateEvent&&((v=n?.validate)==null||v.call(n,"change").catch(w=>Ce())),t.oldValue=c)))};V(),de(()=>t.dragging,r=>{r||V()}),de(()=>e.modelValue,(r,v)=>{t.dragging||oe(r)&&oe(v)&&r.every((c,w)=>c===v[w])&&t.firstValue===r[0]&&t.secondValue===r[1]||V()},{deep:!0}),de(()=>[e.min,e.max],()=>{V()})},vt=(e,t,d)=>{const a=ee();return Ye(async()=>{e.range?(oe(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!se(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),ce(window,"resize",d),await me(),d()}),{sliderWrapper:a}},ft=["id","role","aria-label","aria-labelledby"],gt={key:1},bt=ye({name:"ElSlider",__name:"slider",props:De,emits:et,setup(e,{expose:t,emit:d}){const a=e,m=d,n=he("slider"),{t:i}=$e(),b=pe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:V,slider:r,firstButton:v,secondButton:c,sliderDisabled:w,minValue:W,maxValue:O,runwayStyle:R,barStyle:M,resetSize:x,emitChange:C,onSliderWrapperPrevent:P,onSliderClick:N,onSliderDown:S,onSliderMarkerDown:T,setFirstValue:A,setSecondValue:k}=ut(a,b,m),{stops:E,getStopStyle:F}=dt(a,b,W,O),{inputId:o,isLabeledByFormItem:f}=Ze(a,{formItemContext:V}),B=qe(),J=g(()=>a.inputSize||B.value),G=g(()=>a.ariaLabel||i("el.slider.defaultLabel",{min:a.min,max:a.max})),Z=g(()=>a.range?a.rangeStartLabel||i("el.slider.defaultRangeStartLabel"):G.value),q=g(()=>a.formatValueText?a.formatValueText(y.value):`${y.value}`),z=g(()=>a.rangeEndLabel||i("el.slider.defaultRangeEndLabel")),H=g(()=>a.formatValueText?a.formatValueText(h.value):`${h.value}`),K=g(()=>[n.b(),n.m(B.value),n.is("vertical",a.vertical),{[n.m("with-input")]:a.showInput}]),I=ct(a);mt(a,b,W,O,m,V);const X=g(()=>{const s=[a.min,a.max,a.step].map(_=>{const le=`${_}`.split(".")[1];return le?le.length:0});return Math.max.apply(null,s)}),{sliderWrapper:u}=vt(a,b,x),{firstValue:y,secondValue:h,sliderSize:te}=be(b),Y=s=>{b.dragging=s};return ce(u,"touchstart",P,{passive:!1}),ce(u,"touchmove",P,{passive:!1}),Ue(ze,{...be(a),sliderSize:te,disabled:w,precision:X,emitChange:C,resetSize:x,updateDragging:Y}),t({onSliderClick:N}),(s,_)=>{var le,Se;return L(),$("div",{id:s.range?l(o):void 0,ref_key:"sliderWrapper",ref:u,class:U(K.value),role:s.range?"group":void 0,"aria-label":s.range&&!l(f)?G.value:void 0,"aria-labelledby":s.range&&l(f)?(le=l(V))==null?void 0:le.labelId:void 0},[D("div",{ref_key:"slider",ref:r,class:U([l(n).e("runway"),{"show-input":s.showInput&&!s.range},l(n).is("disabled",l(w))]),style:Q(l(R)),onMousedown:_[0]||(_[0]=(...p)=>l(S)&&l(S)(...p)),onTouchstartPassive:_[1]||(_[1]=(...p)=>l(S)&&l(S)(...p))},[D("div",{class:U(l(n).e("bar")),style:Q(l(M))},null,6),Me(Le,{id:s.range?void 0:l(o),ref_key:"firstButton",ref:v,"model-value":l(y),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":s.range||!l(f)?Z.value:void 0,"aria-labelledby":!s.range&&l(f)?(Se=l(V))==null?void 0:Se.labelId:void 0,"aria-valuemin":s.min,"aria-valuemax":s.range?l(h):s.max,"aria-valuenow":l(y),"aria-valuetext":q.value,"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":l(w),"onUpdate:modelValue":l(A)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),s.range?(L(),ve(Le,{key:0,ref_key:"secondButton",ref:c,"model-value":l(h),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":z.value,"aria-valuemin":l(y),"aria-valuemax":s.max,"aria-valuenow":l(h),"aria-valuetext":H.value,"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":l(w),"onUpdate:modelValue":l(k)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ie("v-if",!0),s.showStops?(L(),$("div",gt,[(L(!0),$(ue,null,fe(l(E),(p,ae)=>(L(),$("div",{key:ae,class:U(l(n).e("stop")),style:Q(l(F)(p))},null,6))),128))])):ie("v-if",!0),l(I).length>0?(L(),$(ue,{key:2},[D("div",null,[(L(!0),$(ue,null,fe(l(I),(p,ae)=>(L(),$("div",{key:ae,style:Q(l(F)(p.position)),class:U([l(n).e("stop"),l(n).e("marks-stop")])},null,6))),128))]),D("div",{class:U(l(n).e("marks"))},[(L(!0),$(ue,null,fe(l(I),(p,ae)=>(L(),ve(l(it),{key:ae,mark:p.mark,style:Q(l(F)(p.position)),onMousedown:We(yt=>l(T)(p.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ie("v-if",!0)],38),s.showInput&&!s.range?(L(),ve(l(Ae),{key:0,ref:"input","model-value":l(y),class:U(l(n).e("input")),step:s.step,disabled:l(w),controls:s.showInputControls,min:s.min,max:s.max,precision:X.value,size:J.value,"onUpdate:modelValue":l(A),onChange:l(C)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):ie("v-if",!0)],10,ft)}}});var Vt=Pe(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const Pt=Oe(Vt);export{Pt as E,De as a,ze as b,et as s};
