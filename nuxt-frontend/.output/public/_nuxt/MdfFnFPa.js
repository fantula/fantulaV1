import{f as L,c as d,a as t,G as A,w as y,b as i,o as n,F as I,k as S,E as N,l as E,H as j,I as q,_ as T,r as w,J as U,n as O,t as k,K as X,D as P,d as Y,L as K,M as Q,N as Z,s as tt,O as et,P as st,Q as ot,u as nt,R as at,S as it,h as ct,q as rt,T as lt,y as dt,U as _t}from"./o2XBa361.js";import{E as W}from"./BTJpnMK3.js";import{E as ut,a as gt}from"./Ba5pZ5if.js";import{E as H,a as z}from"./C9v55j5T.js";/* empty css        *//* empty css        */import{E as mt}from"./C1T5KPmY.js";/* empty css        */import{g as R}from"./CvWALV8R.js";import{u as pt}from"./DxN84sMZ.js";import"./t2w4jifC.js";import"./Bh6H2ams.js";import"./DtTI1xRr.js";import"./CleHDoLI.js";import"./Cq9Fpw4b.js";import"./Ds34GQx2.js";import"./Dzr5IOAO.js";import"./hXKBSGVD.js";import"./B_FoF6yT.js";import"./DVQwC1Y0.js";import"./DxBhpsT5.js";import"./CQuNCUIC.js";import"./BB_Ol6Sd.js";const ht={class:"banner-section"},vt={class:"banner-container"},ft=["onClick"],yt={class:"image-placeholder"},bt={key:1,class:"banner-skeleton"},xt=L({__name:"BannerSection",props:{banners:{}},setup(p){const h=a=>{a.link&&(a.link.startsWith("http")?window.open(a.link,"_blank"):q(a.link))};return(a,l)=>{const _=N,g=W,e=gt,o=ut,c=z,u=H;return n(),d("div",ht,[t("div",vt,[p.banners&&p.banners.length>0?(n(),A(o,{key:0,interval:5e3,arrow:"always",height:"360px",class:"custom-carousel"},{default:y(()=>[(n(!0),d(I,null,S(p.banners,v=>(n(),A(e,{key:v.id},{default:y(()=>[t("div",{class:"banner-item",onClick:C=>h(v)},[i(g,{src:v.image,fit:"cover",class:"banner-image",loading:"lazy"},{placeholder:y(()=>[t("div",yt,[i(_,{class:"is-loading"},{default:y(()=>[i(E(j))]),_:1})])]),_:1},8,["src"])],8,ft)]),_:2},1024))),128))]),_:1})):(n(),d("div",bt,[i(u,{style:{width:"100%"},animated:""},{template:y(()=>[i(c,{variant:"rect",style:{width:"100%",height:"360px","border-radius":"16px"}})]),_:1})]))])])}}}),kt=T(xt,[["__scopeId","data-v-b84bd4e1"]]),Ct={class:"category-nav"},wt={class:"category-outer"},It=["onClick"],St={class:"cat-label"},$t=L({__name:"CategoryNav",props:{categories:{},activeId:{}},emits:["change"],setup(p,{emit:h}){const a=p,l=h,_=w(null);U(()=>a.activeId,()=>{X(()=>{const o=_.value?.querySelector(".category-item.active");o&&g(o)})},{immediate:!0});const g=o=>{const c=_.value;if(o&&c){const u=o.offsetLeft,v=o.offsetWidth,C=c.clientWidth;let b=u-C/2+v/2;const r=c.scrollWidth-C;b<0&&(b=0),b>r&&(b=r),c.scrollTo({left:b,behavior:"smooth"})}},e=(o,c)=>{l("change",c);const u=o.currentTarget;g(u)};return(o,c)=>(n(),d("section",Ct,[t("div",wt,[t("div",{class:"category-scroll",ref_key:"scrollContainer",ref:_},[(n(!0),d(I,null,S(a.categories,u=>(n(),d("div",{key:u.id,class:O(["category-item",{active:a.activeId===u.id}]),onClick:v=>e(v,u.id)},[t("span",St,k(u.name),1)],10,It))),128))],512)])]))}}),Et=T($t,[["__scopeId","data-v-7cf8d9ba"]]),Lt={class:"goods-section"},Tt={class:"container"},At={key:0,class:"goods-grid"},Bt={style:{padding:"24px"}},Mt={style:{display:"flex","justify-content":"space-between","margin-bottom":"20px"}},Nt={key:1,class:"goods-grid"},qt=["onClick"],Dt={class:"goods-image-container"},Gt={class:"image-placeholder"},Pt={class:"goods-card-content"},Rt=["title"],Ft={class:"goods-price-row"},Ot={class:"price-val"},Wt={key:0,class:"selling-tags"},Ht={class:"goods-stats"},zt={class:"stat-item"},Vt={class:"stat-value"},Jt={class:"stat-item rating"},jt={class:"stat-value"},Ut={class:"action-btn-wrap"},Xt={class:"select-btn"},Yt={key:2,class:"empty-state"},Kt=L({__name:"GoodsSection",props:{goodsList:{},loading:{type:Boolean}},setup(p){const h=e=>{q(`/goods/${e}`)},a=e=>({热卖:"bg-hot",新品:"bg-new",推荐:"bg-recommend",限时:"bg-limited",优惠:"bg-promo"})[e]||"",l=e=>e>=1e4?(e/1e4).toFixed(1)+"w+":e>=1e3?(e/1e3).toFixed(1)+"k+":e,_=e=>e?Array.isArray(e)?e:typeof e=="string"&&e.includes(",")?e.split(","):[]:[],g=e=>e==null?"0.00":(typeof e=="string"?parseFloat(e):e).toFixed(2);return(e,o)=>{const c=z,u=H,v=W,C=N,b=mt;return n(),d("section",Lt,[t("div",Tt,[p.loading?(n(),d("div",At,[(n(),d(I,null,S(8,r=>t("div",{key:r,class:"goods-card"},[t("div",Bt,[i(u,{animated:""},{template:y(()=>[i(c,{variant:"image",style:{width:"100%",height:"160px","border-radius":"12px","margin-bottom":"20px"}}),i(c,{variant:"h3",style:{width:"80%",margin:"0 auto 10px"}}),i(c,{variant:"text",style:{width:"50%",margin:"0 auto 20px"}}),t("div",Mt,[i(c,{variant:"text",style:{width:"30%"}}),i(c,{variant:"text",style:{width:"30%"}})]),i(c,{variant:"button",style:{width:"100%",height:"40px","border-radius":"20px"}})]),_:1})])])),64))])):p.goodsList&&p.goodsList.length>0?(n(),d("div",Nt,[(n(!0),d(I,null,S(p.goodsList,r=>(n(),d("div",{key:r.id,class:"goods-card",onClick:$=>h(r.id)},[r.badge_label&&r.badge_label!=="不展示"?(n(),d("div",{key:0,class:O(["badge-label",a(r.badge_label)])},k(r.badge_label),3)):P("",!0),t("div",Dt,[i(v,{src:r.image,fit:"cover",class:"goods-image",loading:"lazy"},{placeholder:y(()=>[t("div",Gt,[i(c,{variant:"image",style:{width:"100%",height:"100%"}})])]),_:1},8,["src"])]),t("div",Pt,[t("h3",{class:"goods-title",title:r.product_name},k(r.product_name),9,Rt),t("div",Ft,[t("span",Ot,k(g(r.display_price)),1),o[0]||(o[0]=t("span",{class:"price-unit"},"/起",-1))]),_(r.tags).length?(n(),d("div",Wt,[(n(!0),d(I,null,S(_(r.tags).slice(0,3),($,B)=>(n(),d("span",{key:B,class:"sell-tag"},k($),1))),128))])):P("",!0),t("div",Ht,[t("div",zt,[o[1]||(o[1]=t("span",{class:"stat-label"},"销量",-1)),t("span",Vt,k(l(r.initial_sales||0)),1)]),t("div",Jt,[o[2]||(o[2]=t("span",{class:"stat-label"},"好评度",-1)),t("span",jt,k(r.rating)+"%",1)])]),t("div",Ut,[t("div",Xt,[o[3]||(o[3]=Y(" 查看详情 ",-1)),i(C,{class:"btn-icon"},{default:y(()=>[i(E(K))]),_:1})])])])],8,qt))),128))])):(n(),d("div",Yt,[i(b,{description:"暂无相关商品"})]))])])}}}),Qt=T(Kt,[["__scopeId","data-v-692bc394"]]),Zt={class:"about-section"},te={class:"about-bg"},ee={class:"about-cards"},se={class:"about-icon"},oe={class:"about-card-title"},ne={class:"about-card-desc"},ae=L({__name:"AboutSection",setup(p){const h=[{icon:Z,title:"大团队开发",desc:"所有商品均为团队开发，品质保障"},{icon:tt,title:"人工客服服务",desc:"提供完善的售后服务，购物无忧"},{icon:et,title:"大平台更放心",desc:"十年开发经验，服务千万用户"},{icon:st,title:"全网矩阵",desc:"覆盖全国平台，快速送达"}];return(a,l)=>{const _=N;return n(),d("section",Zt,[t("div",te,[l[1]||(l[1]=t("div",{class:"about-title"},"关于我们",-1)),l[2]||(l[2]=t("div",{class:"about-subtitle"},"提供高品质优质服务",-1)),t("div",ee,[(n(),d(I,null,S(h,g=>t("div",{class:"about-card",key:g.title},[t("div",se,[i(_,{size:48},{default:y(()=>[(n(),A(Q(g.icon)))]),_:2},1024)]),t("div",oe,k(g.title),1),t("div",ne,k(g.desc),1)])),64))]),t("button",{class:"about-more-btn",onClick:l[0]||(l[0]=g=>("navigateTo"in a?a.navigateTo:E(q))("/faq"))},"查看更多 →")])])}}}),ie=T(ae,[["__scopeId","data-v-46f69d0d"]]);let F=!1;function ce(){if(F)return;const p=Object.values(ot).map(a=>a.mascotImg).filter(a=>!!a),h=[...new Set(p)];h.forEach(a=>{const l=new Image;l.src=a}),F=!0,console.log(`[ModalPreloader] 预加载 ${h.length} 个素材`)}const re=()=>({getCache:l=>{if(typeof window>"u")return null;try{const _=localStorage.getItem(l);if(!_)return null;const{data:g,expiry:e}=JSON.parse(_);return Date.now()>e?(localStorage.removeItem(l),null):g}catch{return null}},setCache:(l,_)=>{if(!(typeof window>"u"))try{localStorage.setItem(l,JSON.stringify({data:_,expiry:Date.now()+3e5}))}catch{}}}),le={class:"home-page"},de={class:"goods-container"},_e=L({__name:"index",setup(p){const h=nt(),a=at(),l=it(),{getCache:_,setCache:g}=re();pt({title:"凡图拉 - 优质商品平台",meta:[{name:"description",content:"凡图拉提供优质商品和服务，精选各类商品，确保品质与价格的完美平衡。"},{name:"keywords",content:"凡图拉,商品,购物,电商,优质商品"},{property:"og:title",content:"凡图拉 - 优质商品平台"},{property:"og:description",content:"凡图拉提供优质商品和服务，精选各类商品，确保品质与价格的完美平衡。"},{property:"og:type",content:"website"},{property:"og:url",content:l.public.siteUrl||"http://localhost:3000"}]});const e=w([]),o=w([]),c=w([]),u=w(""),v=w(!1),C=w("slide-right"),b=async()=>{const m=_("home_banners");m&&(e.value=m);try{const s=await _t.getBannerList();s?.success&&s.data&&(e.value=s.data,g("home_banners",s.data))}catch(s){console.error("获取轮播图失败:",s)}},r=async()=>{const m=_("home_categories");if(m&&m.length>0)return o.value=m,m[0].id;try{const s=await R.getCategories();if(s?.success&&s.data&&s.data.length>0)return o.value=s.data,g("home_categories",s.data),s.data[0].id}catch(s){console.error("获取分类失败:",s)}return null},$=async m=>{v.value=!0;try{const s=await R.getGoodsList({categoryId:m,page:1,limit:12});s?.success&&s.data?.list?c.value=s.data.list:c.value=[]}catch(s){console.error("获取商品列表失败:",s),c.value=[]}finally{v.value=!1}},B=async()=>{const[m,s]=await Promise.all([b(),r()]),x=h.query.category_id;let f=x?String(x):s;x&&o.value.length>0&&!o.value.find(M=>String(M.id)===String(x))&&s&&(f=s),f&&(u.value=f,await $(f))},V=async m=>{const s=o.value.findIndex(f=>f.id===u.value),x=o.value.findIndex(f=>f.id===m);s!==-1&&x!==-1&&(C.value=x>s?"slide-right":"slide-left"),u.value=m,a.replace({query:{...h.query,category_id:m}}),await $(m)};ct(()=>{ce(),B()});const D=rt();return(m,s)=>{const x=kt,f=Et,G=Qt,M=ie,J=dt;return n(),d("div",le,[i(x,{banners:e.value},null,8,["banners"]),i(f,{categories:o.value,activeId:u.value,onChange:V},null,8,["categories","activeId"]),t("div",de,[i(lt,{name:C.value,mode:"out-in"},{default:y(()=>[(n(),A(G,{key:u.value,goodsList:c.value,loading:v.value},null,8,["goodsList","loading"]))]),_:1},8,["name"])]),i(M),i(J,{visible:E(D).showLogin,onClose:s[0]||(s[0]=ue=>E(D).closeLogin())},null,8,["visible"])])}}}),De=T(_e,[["__scopeId","data-v-450ecfd7"]]);export{De as default};
