import{f as B,z as F,r as v,g as b,h as R,a1 as V,c,a as t,G as h,D as L,b as s,w as n,t as d,n as _,ay as W,$ as A,aa as I,E as q,C as G,o as i,l as u,a4 as C,Y as P,az as Q,V as U,F as Y,k as j,aA as H,aB as J,aC as K,d as O,_ as X}from"./CEI0siaN.js";import{E as Z}from"./BjbJQEzT.js";import{E as tt}from"./CRYDGWf-.js";/* empty css        *//* empty css        *//* empty css        */import{W as at}from"./1A56VrIH.js";import"./97-vZjNt.js";import"./DqBrY_lx.js";import"./wVnq5BSo.js";import"./Bh6H2ams.js";import"./BC9Y1jC9.js";import"./Dnj8X3EN.js";const et={class:"wallet-page"},st={class:"asset-hero-card"},lt={class:"hero-content"},ot={class:"hero-header"},nt={class:"header-main"},it={class:"card-icon-wrapper"},rt={class:"info-btn"},dt={class:"balance-display"},ut={class:"balance-number"},ct={class:"amount-integer"},mt={class:"amount-decimal"},vt={class:"hero-footer"},_t={class:"ledger-section"},pt={class:"ledger-header"},ft={class:"glass-pill-tabs"},gt={class:"ledger-stream"},bt={key:0,class:"stream-loading"},ht={key:1,class:"stream-empty"},yt={class:"empty-bubble"},kt={key:2,class:"stream-list"},wt={class:"stream-content"},Ct={class:"stream-title"},xt={class:"stream-date"},Dt=B({__name:"wallet",setup(St){F();const x=V();G();const p=v(!1),f=v(0),m=v([]),g=v(!0),o=v("all"),D=b(()=>Math.floor(f.value).toLocaleString()),S=b(()=>(f.value%1).toFixed(2).split(".")[1]),y=b(()=>o.value==="all"?m.value:o.value==="income"?m.value.filter(e=>e.amount>0):o.value==="expense"?m.value.filter(e=>e.amount<0):m.value),k=async()=>{g.value=!0;try{const e=await I.getWalletData();e.success&&e.data&&(f.value=e.data.balance||0,m.value=e.data.transactions||[])}finally{setTimeout(()=>{g.value=!1},300)}},w=e=>e>0?"income":"expense",E=e=>Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),M=e=>new Date(e).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),T=()=>{p.value=!1,k()};return R(async()=>{await k(),x.query.amount&&(p.value=!0)}),(e,a)=>{const r=q,$=Z,N=tt;return i(),c("div",et,[t("div",st,[a[8]||(a[8]=t("div",{class:"hero-aurora-bg"},null,-1)),t("div",lt,[t("div",ot,[t("div",nt,[t("div",it,[s(r,null,{default:n(()=>[s(u(C))]),_:1})]),a[4]||(a[4]=t("div",{class:"header-text"},[t("span",{class:"card-label"},"我的额度"),t("div",{class:"card-tag"},"My Quota")],-1))]),s($,{content:"凡图拉额度仅用于平台内服务使用，不可提现或转让",placement:"top",effect:"dark"},{default:n(()=>[t("div",rt,[s(r,null,{default:n(()=>[s(u(P))]),_:1})])]),_:1})]),t("div",dt,[t("div",ut,[t("span",ct,d(D.value),1),t("span",mt,"."+d(S.value),1)]),a[5]||(a[5]=t("div",{class:"balance-unit"},"点",-1))]),t("div",vt,[t("button",{class:"neon-action-btn",onClick:a[0]||(a[0]=l=>p.value=!0)},[s(r,null,{default:n(()=>[s(u(Q))]),_:1}),a[6]||(a[6]=t("span",null,"立即充值",-1)),a[7]||(a[7]=t("div",{class:"btn-glow"},null,-1))])])]),s(r,{class:"card-bg-icon"},{default:n(()=>[s(u(C))]),_:1})]),t("div",_t,[t("div",pt,[a[9]||(a[9]=t("h3",{class:"section-title"},"额度流水",-1)),t("div",ft,[t("div",{class:_(["pill-tab",{active:o.value==="all"}]),onClick:a[1]||(a[1]=l=>o.value="all")},"全部",2),t("div",{class:_(["pill-tab income",{active:o.value==="income"}]),onClick:a[2]||(a[2]=l=>o.value="income")},"获取",2),t("div",{class:_(["pill-tab expense",{active:o.value==="expense"}]),onClick:a[3]||(a[3]=l=>o.value="expense")},"消耗",2)])]),t("div",gt,[g.value?(i(),c("div",bt,[s(N,{animated:"",rows:3})])):y.value.length===0?(i(),c("div",ht,[t("div",yt,[s(r,null,{default:n(()=>[s(u(U))]),_:1})]),t("span",null,"暂无"+d(o.value==="all"?"":o.value==="income"?"获取":"消耗")+"记录",1)])):(i(),c("div",kt,[s(W,{name:"list-fade"},{default:n(()=>[(i(!0),c(Y,null,j(y.value,(l,z)=>(i(),c("div",{key:l.id,class:"glass-stream-item",style:H({animationDelay:`${z*.05}s`})},[t("div",{class:_(["stream-icon-box",w(l.amount)])},[l.amount>0?(i(),h(r,{key:0},{default:n(()=>[s(u(J))]),_:1})):(i(),h(r,{key:1},{default:n(()=>[s(u(K))]),_:1}))],2),t("div",wt,[t("div",Ct,d(l.description||l.type),1),t("div",xt,d(M(l.created_at)),1)]),t("div",{class:_(["stream-amount",w(l.amount)])},[O(d(l.amount>0?"+":"")+d(E(l.amount))+" ",1),a[10]||(a[10]=t("span",{class:"stream-unit"},"点",-1))],2)],4))),128))]),_:1})]))])]),p.value?(i(),h(at,{key:0,"initial-amount":Number((e._.provides[A]||e.$route).query.amount),onClose:T},null,8,["initial-amount"])):L("",!0)])}}}),It=X(Dt,[["__scopeId","data-v-6affe454"]]);export{It as default};
