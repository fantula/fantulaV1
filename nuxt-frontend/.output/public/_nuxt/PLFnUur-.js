import{f as C,G as _,o,_ as w,z as N,r as D,h as U,c as n,a as e,D as m,b as u,w as h,l as c,t as p,F as y,k as g,d as A,$ as P,C as S,E as V,a0 as E,a1 as F,a2 as R,n as W,M as q,a3 as z,a4 as G,a5 as H,a6 as T,a7 as j,P as J,s as K,a8 as O,a9 as Q,aa as X}from"./gYbOYKrZ.js";import{B as Y}from"./DfUoue4O.js";import{u as Z}from"./DRfUzgkD.js";const ee=C({__name:"LogoutModal",props:{visible:{type:Boolean}},emits:["close","confirm"],setup(k){return(a,l)=>(o(),_(Y,{visible:k.visible,title:"退出登录",message:"确定要退出当前账号吗？","confirm-text":"确认退出","theme-id":"suit-001",onClose:l[0]||(l[0]=i=>a.$emit("close")),onConfirm:l[1]||(l[1]=i=>a.$emit("confirm"))},null,8,["visible"]))}}),se=w(ee,[["__scopeId","data-v-709700aa"]]),oe={class:"profile-page"},te={class:"profile-container"},ae={class:"profile-layout"},le={class:"profile-sidebar"},ne={class:"sidebar-header"},ie={class:"user-hero-card"},re={key:0,class:"user-hero-loading"},ce={key:1,class:"user-hero-content"},de={class:"avatar-wrapper"},ue=["src"],fe={class:"user-info"},pe={class:"user-nickname"},_e={class:"user-id-badge"},ve={class:"sidebar-menu"},me={key:0,class:"menu-group-label"},he=["onClick"],ke={class:"icon-wrapper"},be={class:"menu-text"},ye={key:0,class:"active-glow"},ge={class:"sidebar-footer"},Ce={class:"profile-main"},we={class:"profile-content-frame"},xe={class:"page-content-wrapper"},$e=C({__name:"profile",setup(k){Z({title:"个人中心 - 凡图拉",meta:[{name:"description",content:"凡图拉个人中心"}]});const a=N(),l=S(),i=F(),x=[{key:"main",label:"",items:[{key:"profile",label:"个人中心",icon:z,to:"/profile"},{key:"wallet",label:"我的额度",icon:G,to:"/profile/wallet"},{key:"orders",label:"我的订单",icon:H,to:"/profile/order"},{key:"exchange",label:"兑换中心",icon:T,to:"/profile/exchange"},{key:"favorites",label:"我的收藏",icon:j,to:"/profile/favorites"},{key:"referral",label:"返现推广",icon:J,to:"/profile/referral"},{key:"tickets",label:"我的工单",icon:K,to:"/profile/tickets"},{key:"messages",label:"我的消息",icon:O,to:"/profile/messages"}]}],b=t=>{const s=i.path;return t.key==="profile"?s==="/profile":t.key==="orders"?s.startsWith("/profile/orders")||s.startsWith("/profile/order/"):s.startsWith(t.to)},$=t=>{if(i.path===t.to||t.key==="profile"&&i.path==="/profile"){const s={...i.query,refresh:Date.now()};l.push({path:t.to,query:s})}else l.push(t.to)},B=()=>{l.push("/")},f=D(!1),L=()=>{f.value=!0},M=async()=>{f.value=!1,await X.logout(),a.logout(),l.push("/")};return U(()=>{a.isLoggedIn&&a.fetchUserInfo()}),(t,s)=>{const v=V,I=E;return o(),n("div",oe,[e("div",te,[s[6]||(s[6]=e("h1",{class:"simple-welcome-text"},"欢迎回来",-1)),e("div",ae,[e("aside",le,[e("div",ne,[e("div",{class:"back-home-btn",onClick:B},[u(v,{class:"arrow-icon-left"},{default:h(()=>[u(c(R))]),_:1}),s[1]||(s[1]=e("span",null,"返回首页",-1))]),e("div",ie,[c(a).loading?(o(),n("div",re,[...s[2]||(s[2]=[e("div",{class:"avatar-skeleton"},null,-1),e("div",{class:"info-skeleton"},[e("div",{class:"line-1"}),e("div",{class:"line-2"})],-1)])])):(o(),n("div",ce,[e("div",de,[e("img",{src:c(a).user?.avatar||"/images/client/pc/avatars/avatar-cat.png",class:"user-avatar"},null,8,ue),s[3]||(s[3]=e("div",{class:"status-dot"},null,-1))]),e("div",fe,[e("h3",pe,p(c(a).user?.nickname||"FANTULA User"),1),e("div",_e,[e("span",null,"UID: "+p(c(a).user?.uid||"---"),1)])])]))])]),e("nav",ve,[(o(),n(y,null,g(x,d=>e("div",{key:d.key,class:"menu-group"},[d.label?(o(),n("div",me,p(d.label),1)):m("",!0),(o(!0),n(y,null,g(d.items,r=>(o(),n("div",{key:r.key,class:W(["menu-item",{active:b(r)}]),onClick:Be=>$(r)},[e("div",ke,[u(v,{class:"menu-icon"},{default:h(()=>[(o(),_(q(r.icon)))]),_:2},1024)]),e("span",be,p(r?.label),1),b(r)?(o(),n("div",ye)):m("",!0)],10,he))),128))])),64))]),e("div",ge,[e("button",{class:"logout-btn",onClick:L},[u(v,null,{default:h(()=>[u(c(Q))]),_:1}),s[4]||(s[4]=A(" 退出登录 ",-1))])])]),e("main",Ce,[e("div",we,[s[5]||(s[5]=e("div",{class:"phantom-ambassador"},null,-1)),e("div",xe,[(o(),_(I,{key:(t._.provides[P]||t.$route).fullPath}))])])])])]),f.value?(o(),_(se,{key:0,onClose:s[0]||(s[0]=d=>f.value=!1),onConfirm:M})):m("",!0)])}}}),Ne=w($e,[["__scopeId","data-v-f8f16d9a"]]);export{Ne as default};
