import{bl as h,f as Y,b_ as X,c2 as I,b as B,cy as D,aI as b,b$ as k,r as N,h as A,cz as H,cg as W,cA as C}from"./o2XBa361.js";import{P as w}from"./CQuNCUIC.js";const $=e=>{if(!e)return{onClick:h,onMousedown:h,onMouseup:h};let o=!1,c=!1;return{onClick:t=>{o&&c&&e(t),o=c=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{c=t.target===t.currentTarget}}},j=X({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),U={click:e=>e instanceof MouseEvent},F="overlay";var K=Y({name:"ElOverlay",props:j,emits:U,setup(e,{slots:o,emit:c}){const l=I(F),n=M=>{c("click",M)},{onClick:u,onMousedown:t,onMouseup:f}=$(e.customMaskEvent?void 0:n);return()=>e.mask?B("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:t,onMouseup:f},[b(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):D("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(o,"default")])}});const q=K,G=(e,o,c,l)=>{const n={offsetX:0,offsetY:0},u=N(!1),t=(s,a)=>{if(e.value){const{offsetX:m,offsetY:v}=n,i=e.value.getBoundingClientRect(),r=i.left,d=i.top,p=i.width,g=i.height,E=document.documentElement.clientWidth,L=document.documentElement.clientHeight,T=-r+m,z=-d+v,O=E-r-p+m,S=L-d-(g<L?g:0)+v;l?.value||(s=Math.min(Math.max(s,T),O),a=Math.min(Math.max(a,z),S)),n.offsetX=s,n.offsetY=a,e.value.style.transform=`translate(${C(s)}, ${C(a)})`}},f=s=>{const a=s.clientX,m=s.clientY,{offsetX:v,offsetY:i}=n,r=p=>{u.value||(u.value=!0);const g=v+p.clientX-a,E=i+p.clientY-m;t(g,E)},d=()=>{u.value=!1,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",d)},M=()=>{o.value&&e.value&&(o.value.addEventListener("mousedown",f),window.addEventListener("resize",y))},x=()=>{o.value&&e.value&&(o.value.removeEventListener("mousedown",f),window.removeEventListener("resize",y))},P=()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},y=()=>{const{offsetX:s,offsetY:a}=n;t(s,a)};return A(()=>{H(()=>{c.value?M():x()})}),W(()=>{x()}),{isDragging:u,resetPosition:P,updatePosition:y}};export{q as E,$ as a,j as b,U as o,G as u};
