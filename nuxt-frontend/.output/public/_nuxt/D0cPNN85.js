import{ak as G,f as N,r as m,g as $,h as z,aa as L,G as D,ac as Q,w as i,o,a as t,c as r,k as W,n as _,D as C,t as v,b as l,d as F,l as p,ay as O,E as P,F as U,i as Y,v as j,az as V,aA as H,L as J,au as K,B as X,_ as q,z as Z,a1 as tt,aB as st,$ as et,C as at,a4 as I,Y as lt,aC as ot,V as nt,aD as it,aE as ut,aF as dt}from"./gYbOYKrZ.js";import{E as rt}from"./CaswxL1d.js";import{E as ct}from"./CFTg8q6G.js";/* empty css        *//* empty css        *//* empty css        */import"./BdJc3h2o.js";import"./C3yI_83l.js";import"./BlcygIWm.js";import"./Bh6H2ams.js";import"./CUkNyi1D.js";import"./Dnj8X3EN.js";const vt=G("/images/client/pc/zhifu2.png"),pt={class:"recharge-content"},mt={class:"split-layout"},_t={class:"left-panel"},ft={class:"section-container"},bt={class:"amount-grid"},yt=["onClick"],gt={class:"option-content"},ht={class:"amount-row"},$t={class:"amount-main"},kt={key:0,class:"bonus-tag"},wt=["disabled"],Ct={class:"section-container"},xt={class:"pay-methods"},Mt={key:0,class:"pay-check"},At={key:0,class:"pay-check"},Dt={class:"modal-footer"},Tt={key:0,class:"actual-arrival-info"},Bt={class:"value"},Et={key:0,class:"bonus-hint"},Ft={class:"action-row"},Rt=["disabled"],St={class:"btn-text"},Vt={class:"security-tip"},It=N({__name:"WalletRechargeModal",props:{initialAmount:{type:Number,default:0}},emits:["close"],setup(R,{emit:T}){const k=T,y=R,u=m([]),b=m(!1),a=m(0),g=m(null),f=m("alipay"),h=$(()=>a.value!==-1&&u.value[a.value]?u.value[a.value].value:g.value||0),w=$(()=>a.value!==-1&&u.value[a.value]?u.value[a.value].bonus:0),x=$(()=>h.value+w.value),M=$(()=>h.value>0);function A(e){a.value=e,e!==-1&&(g.value=null)}function B(){b.value=!0,setTimeout(()=>{X.success(`已发起充值 ¥${h.value.toFixed(2)} (${f.value==="alipay"?"支付宝":"微信"})`),b.value=!1,k("close")},800)}return z(async()=>{b.value=!0;try{const e=await L.getActiveTiers();e.success&&e.data&&(u.value=e.data.map(s=>({value:s.value,bonus:parseInt(s.desc.replace(/[^0-9]/g,"")||"0")})))}catch(e){console.error("加载充值档位失败",e)}finally{b.value=!1}if(y.initialAmount>0){const e=u.value.findIndex(s=>s.value===y.initialAmount);e!==-1?a.value=e:(a.value=-1,g.value=y.initialAmount)}}),(e,s)=>{const d=P,E=Q;return o(),D(E,{visible:!0,title:"购置额度",width:"860px","show-footer":!1,"theme-id":"suit-002",onClose:s[4]||(s[4]=c=>e.$emit("close"))},{default:i(()=>[t("div",pt,[s[17]||(s[17]=t("div",{class:"modal-subtitle"},"Purchase Quota",-1)),t("div",mt,[t("div",_t,[t("div",ft,[s[8]||(s[8]=t("div",{class:"section-label"},"选择额度",-1)),t("div",bt,[(o(!0),r(U,null,W(u.value,(c,n)=>(o(),r("div",{key:c.value,class:_(["amount-option",{active:a.value===n}]),onClick:S=>A(n)},[t("div",gt,[t("div",ht,[t("span",$t,v(c.value),1),s[5]||(s[5]=t("span",{class:"unit"},"点",-1))]),c.bonus>0?(o(),r("div",kt,[l(d,null,{default:i(()=>[l(p(O))]),_:1}),F(" 送 "+v(c.bonus),1)])):C("",!0)])],10,yt))),128)),t("div",{class:_(["amount-option","custom-option",{active:a.value===-1}]),onClick:s[0]||(s[0]=c=>A(-1))},[...s[6]||(s[6]=[t("span",{class:"custom-label"},"自定义",-1)])],2)]),t("div",{class:_(["custom-input-wrapper",{visible:a.value===-1}])},[Y(t("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>g.value=c),type:"number",min:"1",placeholder:"请输入充值金额",disabled:a.value!==-1},null,8,wt),[[j,g.value,void 0,{number:!0}]]),s[7]||(s[7]=t("span",{class:"input-suffix"},"点",-1))],2)]),t("div",Ct,[s[13]||(s[13]=t("div",{class:"section-label"},"支付方式",-1)),t("div",xt,[t("div",{class:_(["pay-method",f.value==="alipay"?"active":""]),onClick:s[2]||(s[2]=c=>f.value="alipay")},[s[9]||(s[9]=t("div",{class:"icon-container alipay"},[t("img",{class:"pay-icon",src:vt,alt:"支付宝"})],-1)),s[10]||(s[10]=t("span",null,"支付宝",-1)),f.value==="alipay"?(o(),r("div",Mt,[l(d,null,{default:i(()=>[l(p(V))]),_:1})])):C("",!0)],2),t("div",{class:_(["pay-method",f.value==="wechat"?"active":""]),onClick:s[3]||(s[3]=c=>f.value="wechat")},[s[11]||(s[11]=t("div",{class:"icon-container wechat"},[t("img",{class:"pay-icon",src:H,alt:"微信"})],-1)),s[12]||(s[12]=t("span",null,"微信",-1)),f.value==="wechat"?(o(),r("div",At,[l(d,null,{default:i(()=>[l(p(V))]),_:1})])):C("",!0)],2)])]),t("div",Dt,[M.value?(o(),r("div",Tt,[s[14]||(s[14]=t("span",{class:"label"},"实际到账:",-1)),t("span",Bt,v(x.value)+" 点",1),w.value>0?(o(),r("span",Et,"(含赠送 "+v(w.value)+" 点)",1)):C("",!0)])):C("",!0),t("div",Ft,[t("button",{class:"btn-confirm",disabled:!M.value,onClick:B},[t("span",St,"立即支付 ¥"+v(h.value.toFixed(2)),1),l(d,{class:"btn-icon"},{default:i(()=>[l(p(J))]),_:1})],8,Rt)]),t("div",Vt,[l(d,null,{default:i(()=>[l(p(K))]),_:1}),s[15]||(s[15]=F(" 安全加密支付 ",-1))])])]),s[16]||(s[16]=t("div",{class:"right-spacer"},null,-1))])])]),_:1})}}}),Nt=q(It,[["__scopeId","data-v-309fdb8b"]]),zt={class:"wallet-page"},Lt={class:"asset-hero-card"},Wt={class:"hero-content"},Pt={class:"hero-header"},Ut={class:"header-main"},qt={class:"card-icon-wrapper"},Gt={class:"info-btn"},Qt={class:"balance-display"},Ot={class:"balance-number"},Yt={class:"amount-integer"},jt={class:"amount-decimal"},Ht={class:"hero-footer"},Jt={class:"ledger-section"},Kt={class:"ledger-header"},Xt={class:"glass-pill-tabs"},Zt={class:"ledger-stream"},ts={key:0,class:"stream-loading"},ss={key:1,class:"stream-empty"},es={class:"empty-bubble"},as={key:2,class:"stream-list"},ls={class:"stream-content"},os={class:"stream-title"},ns={class:"stream-date"},is=N({__name:"wallet",setup(R){Z();const T=tt();at();const k=m(!1),y=m(0),u=m([]),b=m(!0),a=m("all"),g=$(()=>Math.floor(y.value).toLocaleString()),f=$(()=>(y.value%1).toFixed(2).split(".")[1]),h=$(()=>a.value==="all"?u.value:a.value==="income"?u.value.filter(e=>e.amount>0):a.value==="expense"?u.value.filter(e=>e.amount<0):u.value),w=async()=>{b.value=!0;try{const e=await L.getWalletData();e.success&&e.data&&(y.value=e.data.balance||0,u.value=e.data.transactions||[])}finally{setTimeout(()=>{b.value=!1},300)}},x=e=>e>0?"income":"expense",M=e=>Math.abs(e).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),A=e=>new Date(e).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),B=()=>{k.value=!1,w()};return z(async()=>{await w(),T.query.amount&&(k.value=!0)}),(e,s)=>{const d=P,E=rt,c=ct;return o(),r("div",zt,[t("div",Lt,[s[8]||(s[8]=t("div",{class:"hero-aurora-bg"},null,-1)),t("div",Wt,[t("div",Pt,[t("div",Ut,[t("div",qt,[l(d,null,{default:i(()=>[l(p(I))]),_:1})]),s[4]||(s[4]=t("div",{class:"header-text"},[t("span",{class:"card-label"},"我的额度"),t("div",{class:"card-tag"},"My Quota")],-1))]),l(E,{content:"凡图拉额度仅用于平台内服务使用，不可提现或转让",placement:"top",effect:"dark"},{default:i(()=>[t("div",Gt,[l(d,null,{default:i(()=>[l(p(lt))]),_:1})])]),_:1})]),t("div",Qt,[t("div",Ot,[t("span",Yt,v(g.value),1),t("span",jt,"."+v(f.value),1)]),s[5]||(s[5]=t("div",{class:"balance-unit"},"点",-1))]),t("div",Ht,[t("button",{class:"neon-action-btn",onClick:s[0]||(s[0]=n=>k.value=!0)},[l(d,null,{default:i(()=>[l(p(ot))]),_:1}),s[6]||(s[6]=t("span",null,"立即充值",-1)),s[7]||(s[7]=t("div",{class:"btn-glow"},null,-1))])])]),l(d,{class:"card-bg-icon"},{default:i(()=>[l(p(I))]),_:1})]),t("div",Jt,[t("div",Kt,[s[9]||(s[9]=t("h3",{class:"section-title"},"额度流水",-1)),t("div",Xt,[t("div",{class:_(["pill-tab",{active:a.value==="all"}]),onClick:s[1]||(s[1]=n=>a.value="all")},"全部",2),t("div",{class:_(["pill-tab income",{active:a.value==="income"}]),onClick:s[2]||(s[2]=n=>a.value="income")},"获取",2),t("div",{class:_(["pill-tab expense",{active:a.value==="expense"}]),onClick:s[3]||(s[3]=n=>a.value="expense")},"消耗",2)])]),t("div",Zt,[b.value?(o(),r("div",ts,[l(c,{animated:"",rows:3})])):h.value.length===0?(o(),r("div",ss,[t("div",es,[l(d,null,{default:i(()=>[l(p(nt))]),_:1})]),t("span",null,"暂无"+v(a.value==="all"?"":a.value==="income"?"获取":"消耗")+"记录",1)])):(o(),r("div",as,[l(st,{name:"list-fade"},{default:i(()=>[(o(!0),r(U,null,W(h.value,(n,S)=>(o(),r("div",{key:n.id,class:"glass-stream-item",style:it({animationDelay:`${S*.05}s`})},[t("div",{class:_(["stream-icon-box",x(n.amount)])},[n.amount>0?(o(),D(d,{key:0},{default:i(()=>[l(p(ut))]),_:1})):(o(),D(d,{key:1},{default:i(()=>[l(p(dt))]),_:1}))],2),t("div",ls,[t("div",os,v(n.description||n.type),1),t("div",ns,v(A(n.created_at)),1)]),t("div",{class:_(["stream-amount",x(n.amount)])},[F(v(n.amount>0?"+":"")+v(M(n.amount))+" ",1),s[10]||(s[10]=t("span",{class:"stream-unit"},"点",-1))],2)],4))),128))]),_:1})]))])]),k.value?(o(),D(Nt,{key:0,"initial-amount":Number((e._.provides[et]||e.$route).query.amount),onClose:B},null,8,["initial-amount"])):C("",!0)])}}}),hs=q(is,[["__scopeId","data-v-6affe454"]]);export{hs as default};
