{"file":"categories-CxLjC_D3.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA,UAAA,UAAA,IAAA,KAAA;AACA,UAAA,aAAA,IAAA,KAAA;AACA,UAAA,gBAAA,IAAA,KAAA;AACA,UAAA,SAAA,IAAA,KAAA;AACA,UAAA,UAAA,IAAA;AACA,UAAA,gBAAA,IAAA;AACA,UAAAA,cAAA,IAAA,EAAA;AAEA,UAAA,OAAA,SAAA,EAAA,IAAA,IAAA,MAAA,IAAA,QAAA,MAAA;AACA,UAAA,QAAA,SAAA,EAAA,MAAA,CAAA,EAAA,UAAA,MAAA,SAAA,SAAA,SAAA,OAAA,CAAA,EAAA,CAAA;AAGA,UAAA,iBAAA,YAAA;AACI,cAAA,QAAA;AACA,UAAA;AACI,cAAA,MAAA,MAAA,iBAAA,cAAA;AACA,YAAA,IAAA,SAAA;AACI,UAAAA,YAAA,QAAA,IAAA;AACA,mBAAA,YAAA;AAAA,QAAqB;AAAA,MACzB,UAAA;AACQ,gBAAA,QAAA;AAAA,MAAgB;AAAA,IAAM;AAGtC,UAAA,eAAA,MAAA;AAII,YAAA,KAAA,cAAA,OAAA;AACA,UAAA,CAAA,GAAA;AACA,YAAA,QAAA,GAAA,cAAA,+BAAA;AACA,UAAA,OAAA;AACI,iBAAA,OAAA,OAAA;AAAA,UAAuB,QAAA;AAAA,UACX,WAAA;AAAA,UACG,YAAA;AAAA,UACC,OAAA,OAAA,QAAA;AAER,kBAAA,EAAA,UAAA,SAAA,IAAA;AACA,gBAAA,aAAA,SAAA;AACA,kBAAA,QAAAA,YAAA,MAAA,OAAA,UAAA,CAAA,EAAA,CAAA;AACA,YAAAA,YAAA,MAAA,OAAA,UAAA,GAAA,KAAA;AACA,kBAAA,cAAA;AAAA,UAAoB;AAAA,QACxB,CAAA;AAAA,MACH;AAAA,IACL;AAGJ,UAAA,gBAAA,YAAA;AACI,YAAA,QAAAA,YAAA,MAAA,IAAA,CAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,YAAA,EAAA,EAAA;AACA,YAAA,MAAA,MAAA,iBAAA,gBAAA,KAAA;AACA,UAAA,IAAA,QAAgB,WAAA,QAAA,OAAA;AAAA,WAAyB;AAClC,kBAAA,MAAA,QAAA;AAA2B,uBAAA;AAAA,MAAe;AAAA,IAAE;AAIvD,UAAA,gBAAA,MAAA;AAA8B,aAAA,QAAA;AAAsB,WAAA,OAAA;AAAc,WAAA,SAAA;AAAkB,oBAAA,QAAA;AAAA,IAAsB;AAC1G,UAAA,iBAAA,CAAA,QAAA;AAAuC,aAAA,QAAA;AAAqB,WAAA,KAAA,IAAA;AAAgB,WAAA,OAAA,IAAA;AAAoB,WAAA,SAAA,IAAA;AAAwB,oBAAA,QAAA;AAAA,IAAoB;AAE5I,UAAA,aAAA,YAAA;AACI,UAAA,CAAA,QAAA,MAAA;AACA,YAAA,QAAA,MAAA,SAAA,OAAA,UAAA;AACI,YAAA,CAAA,MAAA;AACA,mBAAA,QAAA;AACA,YAAA;AACI,gBAAA,MAAA,OAAA,QAAA,iBAAA,iBAAA,iBAAA;AACA,gBAAA,UAAA,EAAA,MAAA,KAAA,MAAA,QAAA,KAAA,OAAA;AACA,cAAA,CAAA,OAAA,MAAA,SAAA,aAAAA,YAAA,MAAA;AAEA,gBAAA,MAAA,OAAA,QAAA,KAAA,KAAA;AACA,gBAAA,MAAA,OAAA,OAAA,QAAA,IAAA,KAAA,IAAA,OAAA,IAAA,IAAA,OAAA;AAEA,cAAA,IAAA,SAAA;AACI,sBAAA,QAAA,OAAA,QAAA,SAAA,MAAA;AACA,0BAAA,QAAA;AACA,2BAAA;AAAA,UAAe,MACZ,WAAA,MAAA,IAAA,KAAA;AAAA,QAAyB,UAAA;AACxB,qBAAA,QAAA;AAAA,QAAmB;AAAA,MAAM,CAAA;AAAA,IACxC;AAGL,UAAA,YAAA,MAAA,QAAA,OAAA,YAAA;AAEA,UAAA,qBAAA,OAAA,QAAA;AACI,UAAA,gBAAA;AACA,UAAA;AACI,cAAA,MAAA,MAAA,iBAAA,eAAA,IAAA,IAAA,EAAA,QAAA,IAAA,QAAA;AACA,YAAA,IAAA,QAAgB,WAAA,QAAA,IAAA,WAAA,OAAA,SAAA,MAAA;AAAA,aAAuD;AAChE,cAAA,SAAA,IAAA,WAAA,OAAA,QAAA;AAAiD,oBAAA,MAAA,IAAA,KAAA;AAAA,QAAyB;AAAA,MAAE,QAAA;AAC7E,YAAA,SAAA,IAAA,WAAA,OAAA,QAAA;AAAA,MAA2C,UAAA;AAAiB,YAAA,gBAAA;AAAA,MAAoB;AAAA,IAAM;AAGpG,UAAA,gBAAA,CAAA,QAAA;AACI,UAAA,IAAA,gBAAA,EAAA,QAAiC,aAAA,MAAA,QAAA,IAAA,aAAA,YAAA,IAAA;AACjC,mBAAA,QAAA,WAAA,IAAA,IAAA,MAAA,MAAA,EAAA,MAAA,UAAA,CAAA,EAAA,KAAA,YAAA;AACI,cAAA,MAAA,MAAA,iBAAA,eAAA,IAAA,EAAA;AACA,YAAA,IAAA,SAAA;AAAkB,oBAAA,QAAA,MAAA;AAA2B,yBAAA;AAAA,QAAe,MACvD,WAAA,MAAA,IAAA,KAAA;AAAA,MAAyB,CAAA;AAAA,IACjC;;;;;;;;;;;;AA5LE,YAAA,OAAAC,eAAAC,WAAA,EAAA,OAAA,mBAAA,MAAA,CAAA,CAAA,mBAAA;;;QACmB,MAAA;AAAA,MAAoB,GAAA,MAAA,OAAA,CAAA;;;;;;cAKhB,MAAAC,MAAAC,eAAA;AAAA,YAAuB,GAAA;AAAA;;;;;;kBAAW;AAAA;;;;;;cACrC,MAAAD,MAAAE,YAAA;AAAA,cAAiB,SAAA;AAAA,YAAc,GAAA;AAAA;;;;;;kBAAqB;AAAA;;;;;;;gBADH,SAAA;AAAA,gBAA9C,MAAAF,MAAAC,eAAA;AAAA,cAAuB,GAAA;AAAA;kBAAWE,gBAAA,IAAA;AAAA,gBAAA,CAAA;AAAA;;;gBAC2B,MAAA;AAAA,gBAAhE,MAAAH,MAAAE,YAAA;AAAA,gBAAiB,SAAA;AAAA,cAAc,GAAA;AAAA;kBAAqBC,gBAAA,QAAA;AAAA,gBAAA,CAAA;AAAA;;;;;;;;;QAMnE,KAAA;AAAA,QAAA,MAAAN,YAAA;AAAA,QACG,SAAA,QAAA;AAAA,QACG,WAAA;AAAA,MACF,GAAA;AAAA;;;;cAEe,OAAA;AAAA,YAAW,GAAA;AAAA;;;;;;;;;wBACI;AAAA;;;;;;;sBAAU,SAAAO,QAAA,MAAA;AAAA,wBAAVC,YAAAL,MAAAM,YAAA,CAAA;AAAA,sBAAA,CAAA;AAAA;;;;;;;;;;;;;;;wBAEU;AAAA;;;;;;;;sBAAlBD,YAAA,oBAAA,MAAA;AAAA,wBAA4B,SAAAD,QAAA,MAAA;AAAA,0BAAVC,YAAAL,MAAAM,YAAA,CAAA;AAAA,wBAAA,CAAA;AAAA;;;;;;;;;;cAI1B,OAAA;AAAA,cAAa,aAAA;AAAA,YAAiB,GAAA,MAAA,UAAA,QAAA,CAAA;;;cAC7B,OAAA;AAAA,cAAW,OAAA;AAAA,YAAW,GAAA;AAAA;;;;oBACG,QAAA;AAAA,oBAAc,MAAA;AAAA,kBAAa,GAAA;AAAA;;;sBAAiB,OAAA;;;wBAAA;AAAA;;;;;;;sBAAgB,MAAA;AAAA,sBAA5D,QAAA;AAAA,sBAAc,MAAA;AAAA,oBAAa,GAAA;AAAA;wBAAwBH,gBAAAI,gBAAA,SAAA,CAAA,GAAA,CAAA;AAAA,sBAAP,CAAA;AAAA;;;;;;;;;cAErE,OAAA;AAAA,cAAY,OAAA;AAAA,YAAY,GAAA;AAAA;;AACP,yBAAAC,mBAAA,mBAAA,EAAA,QAAA,QAAA,GAAA;AAAA,oBAAc,SAAAJ,QAAA,CAAA,IAAA,QAAA,UAAA,cAAA;;AAAI,+BAAA,GAAAK,eAAA,IAAA,iBAAA,CAAA,CAAA,EAAA;AAAA,sBAAiB,OAAA;;;wBAAA;AAAA;;;;;;;sBAArB,SAAAL,QAAA,MAAA;AAAA,wBAA6BD,gBAAAI,gBAAA,IAAA,iBAAA,CAAA,GAAA,CAAA;AAAA,sBAAR,CAAA;AAAA;;;;;;;;;cAEpD,OAAA;AAAA,cAAW,OAAA;AAAA,YAAY,GAAA;AAAA;;;;oBAGvB,uBAAA,CAAA,WAAA,IAAA,SAAA;AAAA,oBAAM,gBAAA;AAAA,oBACN,kBAAA;AAAA,oBACE,SAAA,IAAA;AAAA,oBACD,UAAA,CAAA,WAAA,mBAAA,GAAA;AAAA,kBACiB,GAAA,MAAA,UAAA,SAAA,CAAA;AAAA;;;sBAChC,YAAA,IAAA;AAAA,sBALc,uBAAA,CAAA,WAAA,IAAA,SAAA;AAAA,sBAAM,gBAAA;AAAA,sBACN,kBAAA;AAAA,sBACE,SAAA,IAAA;AAAA,sBACD,UAAA,CAAA,WAAA,mBAAA,GAAA;AAAA,oBACiB,GAAA,MAAA,GAAA,CAAA,cAAA,uBAAA,WAAA,UAAA,CAAA;AAAA;;;;;;;cAIlB,OAAA;AAAA,cAAa,OAAA;AAAA,YAAY,GAAA;AAAA;;AACT,yBAAA,GAAAE,eAAA,IAAA,KAAA,IAAA,UAAA,EAAA,eAAA,OAAA,CAAA,CAAA,EAAA;AAAA,gBAAmC,OAAA;;;kBAAA;AAAA;;;;;;cAGnD,OAAA;AAAA,cAAW,OAAA;AAAA,cAAY,OAAA;AAAA,YAAc,GAAA;AAAA;;;;oBAE3C,MAAA;AAAA,oBAAU,SAAA,CAAA,WAAA,eAAA,GAAA;AAAA,kBAAoC,GAAA;AAAA;;;;;;wBAAK;AAAA;;;;;;oBACnD,MAAA;AAAA,oBAAU,SAAA,CAAA,WAAA,cAAA,GAAA;AAAA,kBAAkC,GAAA;AAAA;;;;;;wBAAK;AAAA;;;;;;;sBADc,MAAA;AAAA,sBAA/D,MAAA;AAAA,sBAAU,SAAA,CAAA,WAAA,eAAA,GAAA;AAAA,oBAAoC,GAAA;AAAA;wBAAKN,gBAAA,IAAA;AAAA,sBAAA,CAAA;AAAA;;;sBACU,MAAA;AAAA,sBAA7D,MAAA;AAAA,sBAAU,SAAA,CAAA,WAAA,cAAA,GAAA;AAAA,oBAAkC,GAAA;AAAA;wBAAKA,gBAAA,IAAA;AAAA,sBAAA,CAAA;AAAA;;;;;;;;;;gBA3BhD,OAAA;AAAA,gBALK,OAAA;AAAA,cAAW,GAAA;AAAA;kBACcE,YAAA,oBAAA,MAAA;AAAA,oBAAA,SAAAD,QAAA,MAAA;AAAA,sBAAVC,YAAAL,MAAAM,YAAA,CAAA;AAAA,oBAAA,CAAA;AAAA;;;;kBAE0BD,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA;AAAA,oBAAlCA,YAAA,oBAAA,MAAA;AAAA,sBAA4B,SAAAD,QAAA,MAAA;AAAA,wBAAVC,YAAAL,MAAAM,YAAA,CAAA;AAAA,sBAAA,CAAA;AAAA;;;;;;;gBAIY,MAAA;AAAA,gBAAtC,OAAA;AAAA,gBAAa,aAAA;AAAA,cAAiB,CAAA;AAAA;gBAGlC,OAAA;AAAA,gBAFK,OAAA;AAAA,gBAAW,OAAA;AAAA,cAAW,GAAA;AAAA;kBACdD,YAAA,mBAAA;AAAA,oBAA6E,MAAA;AAAA,oBAA5D,QAAA;AAAA,oBAAc,MAAA;AAAA,kBAAa,GAAA;AAAA;sBAAwBF,gBAAAI,gBAAA,SAAA,CAAA,GAAA,CAAA;AAAA,oBAAP,CAAA;AAAA;;;;;;gBAI1E,OAAA;AAAA,gBAFK,OAAA;AAAA,gBAAY,OAAA;AAAA,cAAY,GAAA;AAAA;kBACnBF,YAAA,mBAAA,EAAA,QAAA,QAAA,GAAA;AAAA,oBAA0B,SAAAD,QAAA,MAAA;AAAA,sBAA6BD,gBAAAI,gBAAA,IAAA,iBAAA,CAAA,GAAA,CAAA;AAAA,oBAAR,CAAA;AAAA;;;;;;gBAYzD,OAAA;AAAA,gBAVK,OAAA;AAAA,gBAAW,OAAA;AAAA,cAAY,GAAA;AAAA;kBAClBF,YAAA,sBAAA;AAAA,oBAOnB,YAAA,IAAA;AAAA,oBALc,uBAAA,CAAA,WAAA,IAAA,SAAA;AAAA,oBAAM,gBAAA;AAAA,oBACN,kBAAA;AAAA,oBACE,SAAA,IAAA;AAAA,oBACD,UAAA,CAAA,WAAA,mBAAA,GAAA;AAAA,kBACiB,GAAA,MAAA,GAAA,CAAA,cAAA,uBAAA,WAAA,UAAA,CAAA;AAAA;;;;gBAMvB,OAAA;AAAA,gBAFK,OAAA;AAAA,gBAAa,OAAA;AAAA,cAAY,GAAA;AAAA;kBACpBF,gBAAAI,gBAAA,IAAA,KAAA,IAAA,UAAA,EAAA,eAAA,OAAA,CAAA,GAAA,CAAA;AAAA,gBAA8C,CAAA;AAAA;;;gBAQxD,OAAA;AAAA,gBALK,OAAA;AAAA,gBAAW,OAAA;AAAA,gBAAY,OAAA;AAAA,cAAc,GAAA;AAAA;kBAChCF,YAAA,sBAAA;AAAA,oBACoD,MAAA;AAAA,oBAA/D,MAAA;AAAA,oBAAU,SAAA,CAAA,WAAA,eAAA,GAAA;AAAA,kBAAoC,GAAA;AAAA;sBAAKF,gBAAA,IAAA;AAAA,oBAAA,CAAA;AAAA;;;oBACU,MAAA;AAAA,oBAA7D,MAAA;AAAA,oBAAU,SAAA,CAAA,WAAA,cAAA,GAAA;AAAA,kBAAkC,GAAA;AAAA;sBAAKA,gBAAA,IAAA;AAAA,oBAAA,CAAA;AAAA;;;;;;;;;;;;QAOzD,uBAAA,CAAA,WAAA,cAAA,QAAA;AAAA,QAAa,OAAA,OAAA,QAAA,SAAA;AAAA,QACR,SAAA,WAAA;AAAA,QACJ,WAAA;AAAA,QACA,UAAA;AAAA,MACD,GAAA;AAAA;;;;cAEQ;AAAA,cAAO,SAAA;AAAA,cAAkB,KAAA;AAAA,cAAA,eAAA;AAAA,YAAsB,GAAA;AAAA;;;;oBACzC,MAAA;AAAA,kBAAU,GAAA;AAAA;;;;0BACH,uBAAA,CAAA,WAAA,KAAA,OAAA;AAAA,0BAAI,aAAA;AAAA,wBAAc,GAAA,MAAA,UAAA,SAAA,CAAA;AAAA;;;4BAAY,YAAA,KAAA;AAAA,4BAA9B,uBAAA,CAAA,WAAA,KAAA,OAAA;AAAA,4BAAI,aAAA;AAAA,0BAAc,GAAA,MAAA,GAAA,CAAA,cAAA,qBAAA,CAAA;AAAA;;;;;;;oBAEzB,MAAA;AAAA,kBAAU,GAAA;AAAA;;;;0BACG,uBAAA,CAAA,WAAA,KAAA,SAAA;AAAA,wBAAM,GAAA;AAAA;;AACvB,qCAAAK,mBAAA,qBAAA,EAAA,OAAA,KAAA,GAAA;AAAA,gCAAU,SAAAJ,QAAA,CAAA,IAAA,QAAA,UAAA,cAAA;;;;;;oCAAG;AAAA;;;;AACb,qCAAAI,mBAAA,qBAAA,EAAA,OAAA,MAAA,GAAA;AAAA,gCAAW,SAAAJ,QAAA,CAAA,IAAA,QAAA,UAAA,cAAA;;;;;;oCAAG;AAAA;;;;;;;kCADJ,SAAAA,QAAA,MAAA;AAAA,oCAAGD,gBAAA,IAAA;AAAA,kCAAA,CAAA;AAAA;;;kCACF,SAAAC,QAAA,MAAA;AAAA,oCAAGD,gBAAA,IAAA;AAAA,kCAAA,CAAA;AAAA;;;;;;;;;;4BACV,YAAA,KAAA;AAAA,4BAHa,uBAAA,CAAA,WAAA,KAAA,SAAA;AAAA,0BAAM,GAAA;AAAA;8BACCE,YAAA,qBAAA,EAAA,OAAA,KAAA,GAAA;AAAA,gCAAd,SAAAD,QAAA,MAAA;AAAA,kCAAGD,gBAAA,IAAA;AAAA,gCAAA,CAAA;AAAA;;;gCACF,SAAAC,QAAA,MAAA;AAAA,kCAAGD,gBAAA,IAAA;AAAA,gCAAA,CAAA;AAAA;;;;;;;;;;;;;sBAJf,OAAA;AAAA,sBAFK,MAAA;AAAA,oBAAU,GAAA;AAAA;wBAC2BE,YAAA,qBAAA;AAAA,0BAAA,YAAA,KAAA;AAAA,0BAA9B,uBAAA,CAAA,WAAA,KAAA,OAAA;AAAA,0BAAI,aAAA;AAAA,wBAAc,GAAA,MAAA,GAAA,CAAA,cAAA,qBAAA,CAAA;AAAA;;;;sBAO9B,OAAA;AAAA,sBALK,MAAA;AAAA,oBAAU,GAAA;AAAA;wBAIVA,YAAA,2BAAA;AAAA,0BAAA,YAAA,KAAA;AAAA,0BAHa,uBAAA,CAAA,WAAA,KAAA,SAAA;AAAA,wBAAM,GAAA;AAAA;4BACCA,YAAA,qBAAA,EAAA,OAAA,KAAA,GAAA;AAAA,8BAAd,SAAAD,QAAA,MAAA;AAAA,gCAAGD,gBAAA,IAAA;AAAA,8BAAA,CAAA;AAAA;;;8BACF,SAAAC,QAAA,MAAA;AAAA,gCAAGD,gBAAA,IAAA;AAAA,8BAAA,CAAA;AAAA;;;;;;;;;;;;;;;;gBAGvB,OAAA;AAAA,gBAVO;AAAA,gBAAO,SAAA;AAAA,gBAAkB,KAAA;AAAA,gBAAA,eAAA;AAAA,cAAsB,GAAA;AAAA;kBAG9CE,YAAA,yBAAA;AAAA,oBAAA,OAAA;AAAA,oBAFK,MAAA;AAAA,kBAAU,GAAA;AAAA;sBAC2BA,YAAA,qBAAA;AAAA,wBAAA,YAAA,KAAA;AAAA,wBAA9B,uBAAA,CAAA,WAAA,KAAA,OAAA;AAAA,wBAAI,aAAA;AAAA,sBAAc,GAAA,MAAA,GAAA,CAAA,cAAA,qBAAA,CAAA;AAAA;;;;oBAO9B,OAAA;AAAA,oBALK,MAAA;AAAA,kBAAU,GAAA;AAAA;sBAIVA,YAAA,2BAAA;AAAA,wBAAA,YAAA,KAAA;AAAA,wBAHa,uBAAA,CAAA,WAAA,KAAA,SAAA;AAAA,sBAAM,GAAA;AAAA;0BACCA,YAAA,qBAAA,EAAA,OAAA,KAAA,GAAA;AAAA,4BAAd,SAAAD,QAAA,MAAA;AAAA,8BAAGD,gBAAA,IAAA;AAAA,4BAAA,CAAA;AAAA;;;4BACF,SAAAC,QAAA,MAAA;AAAA,8BAAGD,gBAAA,IAAA;AAAA,4BAAA,CAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":["categories","_ssrRenderAttrs","_mergeProps","_unref","Refresh","Plus","_createTextVNode","_withCtx","_createVNode","Rank","_toDisplayString","_ssrRenderComponent","_ssrInterpolate"],"sources":["../../../../pages/_mgmt_9Xfa3/products/categories.vue"],"sourcesContent":["<template>\n  <div class=\"category-page\">\n     <PageTipHeader title=\"拖拽表格行可调整分类排序\" type=\"info\" />\n\n     <!-- Action Bar -->\n     <AdminActionCard>\n        <template #actions>\n           <el-button @click=\"loadCategories\" :icon=\"Refresh\">刷新</el-button>\n           <el-button type=\"primary\" :icon=\"Plus\" @click=\"openAddDialog\">添加商品分类</el-button>\n        </template>\n     </AdminActionCard>\n\n     <!-- Data Table -->\n     <AdminDataTable \n        ref=\"adminTableRef\"\n        :data=\"categories\" \n        :loading=\"loading\"\n        row-key=\"id\"\n     >\n        <el-table-column width=\"60\" align=\"center\">\n           <template #header><el-icon><Rank /></el-icon></template>\n           <template #default>\n              <div class=\"drag-handle\"><el-icon><Rank /></el-icon></div>\n           </template>\n        </el-table-column>\n\n        <el-table-column prop=\"name\" label=\"分类名称\" min-width=\"200\" />\n        <el-table-column label=\"排序\" width=\"80\" align=\"center\">\n           <template #default=\"{ $index }\"><el-tag type=\"info\" effect=\"plain\" size=\"small\">{{ $index + 1 }}</el-tag></template>\n        </el-table-column>\n        <el-table-column label=\"商品数\" width=\"100\" align=\"center\">\n           <template #default=\"{ row }\"><el-tag effect=\"plain\">{{ row.product_count || 0 }}</el-tag></template>\n        </el-table-column>\n        <el-table-column label=\"状态\" width=\"100\" align=\"center\">\n           <template #default=\"{ row }\">\n               <el-switch \n                  v-model=\"row.status\" \n                  active-value=\"on\" \n                  inactive-value=\"off\" \n                  :loading=\"row.statusLoading\"\n                  @change=\"handleStatusChange(row)\" \n               />\n           </template>\n        </el-table-column>\n        <el-table-column label=\"创建时间\" width=\"170\" align=\"center\">\n           <template #default=\"{ row }\">{{ new Date(row.created_at).toLocaleString('zh-CN') }}</template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"150\" fixed=\"right\" align=\"center\">\n           <template #default=\"{ row }\">\n              <el-button link type=\"primary\" @click=\"openEditDialog(row)\">编辑</el-button>\n              <el-button link type=\"danger\" @click=\"confirmDelete(row)\">删除</el-button>\n           </template>\n        </el-table-column>\n     </AdminDataTable>\n     \n     <!-- Add/Edit Dialog -->\n     <AdminDataDialog\n        v-model=\"dialogVisible\"\n        :title=\"isEdit ? '编辑分类' : '添加分类'\"\n        :loading=\"submitting\"\n        @confirm=\"submitForm\"\n        @closed=\"resetForm\"\n     >\n        <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"80px\">\n           <el-form-item label=\"名称\" prop=\"name\">\n              <el-input v-model=\"form.name\" placeholder=\"请输入分类名称\" />\n           </el-form-item>\n           <el-form-item label=\"状态\" prop=\"status\">\n              <el-radio-group v-model=\"form.status\">\n                 <el-radio value=\"on\">启用</el-radio>\n                 <el-radio value=\"off\">停用</el-radio>\n              </el-radio-group>\n           </el-form-item>\n        </el-form>\n     </AdminDataDialog>\n\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, onMounted, nextTick } from 'vue'\nimport { Plus, Rank, Refresh } from '@element-plus/icons-vue'\nimport { adminCategoryApi, type ProductCategory } from '@/api/admin-supabase'\nimport { ElMessage, ElMessageBox, type FormInstance } from 'element-plus'\nimport Sortable from 'sortablejs'\nimport AdminActionCard from '@/components/admin/base/AdminActionCard.vue'\nimport AdminDataTable from '@/components/admin/base/AdminDataTable.vue'\nimport AdminDataDialog from '@/components/admin/base/AdminDataDialog.vue'\nimport PageTipHeader from '@/components/admin/base/PageTipHeader.vue'\n\ndefinePageMeta({ title: '商品分类管理' })\n\nconst loading = ref(false)\nconst submitting = ref(false)\nconst dialogVisible = ref(false)\nconst isEdit = ref(false)\nconst formRef = ref<FormInstance>()\nconst adminTableRef = ref() // Ref to AdminDataTable component\nconst categories = ref<any[]>([])\n\nconst form = reactive({ id: '', name: '', status: 'on' as 'on' | 'off' })\nconst rules = reactive({ name: [{ required: true, message: '请输入名称', trigger: 'blur' }] })\n\n// Logic\nconst loadCategories = async () => {\n    loading.value = true\n    try {\n        const res = await adminCategoryApi.getCategories()\n        if(res.success) {\n            categories.value = res.categories\n            nextTick(initSortable)\n        }\n    } finally { loading.value = false }\n}\n\nconst initSortable = () => {\n    // Find tbody inside AdminDataTable -> el-table\n    // AdminDataTable root is div.admin-data-table\n    // el-table is inside .table-container\n    const el = adminTableRef.value?.$el\n    if(!el) return\n    const tbody = el.querySelector('.el-table__body-wrapper tbody')\n    if(tbody) {\n        Sortable.create(tbody, {\n            handle: '.drag-handle',\n            animation: 200,\n            ghostClass: 'sortable-ghost',\n            onEnd: async (evt: any) => {\n                const { oldIndex, newIndex } = evt\n                if(oldIndex === newIndex) return\n                const moved = categories.value.splice(oldIndex, 1)[0]\n                categories.value.splice(newIndex, 0, moved)\n                await saveSortOrder()\n            }\n        })\n    }\n}\n\nconst saveSortOrder = async () => {\n    const items = categories.value.map((c, i) => ({ id: c.id, sort_order: i }))\n    const res = await adminCategoryApi.batchUpdateSort(items)\n    if(res.success) ElMessage.success('排序已更新')\n    else { ElMessage.error('排序更新失败'); loadCategories() }\n}\n\n// Dialog Actions\nconst openAddDialog = () => { isEdit.value = false; form.name=''; form.status='on'; dialogVisible.value = true }\nconst openEditDialog = (row: any) => { isEdit.value = true; form.id=row.id; form.name=row.name; form.status=row.status; dialogVisible.value=true }\n\nconst submitForm = async () => {\n    if(!formRef.value) return\n    await formRef.value.validate(async (valid) => {\n        if(!valid) return\n        submitting.value = true\n        try {\n            const api = isEdit.value ? adminCategoryApi.updateCategory : adminCategoryApi.createCategory\n            const payload: any = { name: form.name, status: form.status }\n            if(!isEdit.value) payload.sort_order = categories.value.length\n            \n            const arg = isEdit.value ? form.id : payload\n            const res = await (isEdit.value ? api(form.id, payload) : api(payload))\n            \n            if(res.success) {\n                ElMessage.success(isEdit.value ? '更新成功' : '添加成功')\n                dialogVisible.value = false\n                loadCategories()\n            } else ElMessage.error(res.error)\n        } finally { submitting.value = false }\n    })\n}\n\nconst resetForm = () => formRef.value?.resetFields()\n\nconst handleStatusChange = async (row: any) => {\n    row.statusLoading = true\n    try {\n        const res = await adminCategoryApi.updateCategory(row.id, { status: row.status })\n        if(res.success) ElMessage.success(row.status === 'on' ? '启用成功' : '停用成功')\n        else { row.status = row.status === 'on' ? 'off' : 'on'; ElMessage.error(res.error) }\n    } catch { row.status = row.status === 'on' ? 'off' : 'on' } finally { row.statusLoading = false }\n}\n\nconst confirmDelete = (row: any) => {\n    if(row.product_count > 0) return ElMessageBox.alert(`分类下有 ${row.product_count} 商品，无法删除`, '提示')\n    ElMessageBox.confirm(`确认删除分类 \"${row.name}\"?`, '警告', { type: 'warning' }).then(async ()=> {\n        const res = await adminCategoryApi.deleteCategory(row.id)\n        if(res.success) { ElMessage.success('删除成功'); loadCategories() }\n        else ElMessage.error(res.error)\n    })\n}\n\nonMounted(loadCategories)\n</script>\n\n<style scoped>\n.drag-handle { cursor: grab; padding: 5px; color: #ccc; display: flex; justify-content: center; }\n.drag-handle:hover { color: var(--el-color-primary); }\n:deep(.sortable-ghost) { opacity: 0.4; background: #ecf5ff !important; }\n:deep(.sortable-ghost td) { background: #ecf5ff !important; }\n</style>\n"],"version":3}