{"file":"index-BZhUBU5A.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_unref","_ssrRenderComponent","_withCtx","_createVNode","Warning"],"sources":["../../../../composables/client/useOrderList.ts","../../../../pages/profile/order/index.vue"],"sourcesContent":["/**\n * 客户端订单列表 Composable\n * 遵循 CLIENT_DEVELOPMENT_GUIDE.md 规范\n */\n\nimport { ref, computed } from 'vue'\nimport { clientOrderApi, type ClientOrder, type ClientPreOrder } from '@/api/client'\nimport { useBizFormat } from '@/composables/common/useBizFormat'\nimport { useBizConfig } from '@/composables/common/useBizConfig'\n\nexport function useOrderList() {\n    // ========================================\n    // 状态\n    // ========================================\n    const loading = ref(false)\n    const orders = ref<ClientOrder[]>([])\n    const preOrders = ref<ClientPreOrder[]>([])\n    const currentTab = ref('all')\n\n    // ========================================\n    // 全局工具\n    // ========================================\n    const { formatPrice, formatDate } = useBizFormat()\n    const { getOrderStatusLabel, getOrderStatusType } = useBizConfig()\n\n    // ========================================\n    // Tab 定义\n    // ========================================\n    const tabs = [\n        { label: '全部订单', value: 'all' },\n        { label: '待支付', value: 'pending' },\n        { label: '待发货', value: 'pending_delivery' },\n        { label: '使用中', value: 'active' },\n        { label: '已过期', value: 'expired' },\n        { label: '退款/售后', value: 'refund' } // 包含 refunding + refunded\n    ]\n\n    // ========================================\n    // 计算属性\n    // ========================================\n\n    // 合并订单列表 (待支付 + 已支付) - 扁平化字段供模板使用\n    const allOrders = computed(() => {\n        // 将预订单格式化\n        const pendingList = preOrders.value.map(o => ({\n            id: o.id,\n            order_no: o.order_no,\n            status: 'pending' as const,\n            total_amount: o.total_amount,\n            quantity: o.quantity,\n            created_at: o.created_at,\n            // 扁平化字段 (供模板直接使用)\n            product_name: o.product_snapshot?.product_name || '待支付商品',\n            product_image: o.product_snapshot?.image || '',\n            spec_text: formatSpec(o.sku_snapshot?.spec_combination),\n            isPending: true\n        }))\n\n        // 格式化已支付订单\n        const paidList = orders.value.map(o => ({\n            id: o.id,\n            order_no: o.order_no,\n            status: o.status,\n            total_amount: o.total_amount,\n            quantity: o.quantity,\n            created_at: o.created_at,\n            // 扁平化字段\n            product_name: o.product_snapshot?.product_name || '未知商品',\n            product_image: o.product_snapshot?.image || '',\n            spec_text: formatSpec(o.sku_snapshot?.spec_combination),\n            isPending: false\n        }))\n\n        // 合并并按时间排序\n        const merged = [...pendingList, ...paidList]\n        merged.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\n        return merged\n    })\n\n    // 状态过滤策略定义\n    const filterStrategies: Record<string, (order: any) => boolean> = {\n        'all': () => true,\n        // 待支付: 仅显示预订单 (pending)\n        'pending': (o) => o.isPending === true && o.status === 'pending',\n        // 待发货: 仅显示正式订单\n        'pending_delivery': (o) => !o.isPending && o.status === 'pending_delivery',\n        // 使用中: 仅显示正式订单\n        'active': (o) => !o.isPending && o.status === 'active',\n        // 已过期: 仅显示正式订单 (预订单过期会被自动清理或不显示)\n        'expired': (o) => !o.isPending && o.status === 'expired',\n        // 退款/售后: 包含退款中和已退款\n        'refund': (o) => !o.isPending && ['refunding', 'refunded'].includes(o.status)\n    }\n\n    // 根据 Tab 过滤\n    const filteredList = computed(() => {\n        const strategy = filterStrategies[currentTab.value]\n        if (!strategy) return allOrders.value\n        return allOrders.value.filter(strategy)\n    })\n\n    // ========================================\n    // 方法\n    // ========================================\n\n    /**\n     * 加载订单列表\n     */\n    async function loadList() {\n        loading.value = true\n        try {\n            // 并行获取已支付订单和待支付预订单\n            const [ordersRes, preOrdersRes] = await Promise.all([\n                clientOrderApi.getOrderList(),\n                clientOrderApi.getPendingPreOrders()\n            ])\n\n            if (ordersRes.success) {\n                orders.value = ordersRes.data || []\n            }\n\n            if (preOrdersRes.success) {\n                preOrders.value = preOrdersRes.data || []\n            }\n        } catch (error) {\n            console.error('加载订单列表失败:', error)\n        } finally {\n            loading.value = false\n        }\n    }\n\n    /**\n     * 切换 Tab\n     */\n    function changeTab(tabValue: string) {\n        currentTab.value = tabValue\n    }\n\n    /**\n     * 删除预订单 (取消待支付订单)\n     */\n    async function deletePreOrder(preOrderId: string): Promise<boolean> {\n        const res = await clientOrderApi.cancelPreOrder(preOrderId)\n        if (res.success) {\n            // 从列表中移除\n            preOrders.value = preOrders.value.filter(o => o.id !== preOrderId)\n            return true\n        }\n        return false\n    }\n\n    /**\n     * 格式化规格显示\n     */\n    function formatSpec(spec: Record<string, string> | undefined): string {\n        if (!spec) return ''\n        if (typeof spec === 'string') return spec\n        return Object.values(spec).join(' / ')\n    }\n\n    /**\n     * 获取当前 Tab 的中文名\n     */\n    function getCurrentTabLabel(): string {\n        return tabs.find(t => t.value === currentTab.value)?.label || '订单'\n    }\n\n    return {\n        // 状态\n        loading,\n        orders,\n        preOrders,\n        currentTab,\n        tabs,\n\n        // 计算属性\n        allOrders,\n        filteredList,\n\n        // 方法\n        loadList,\n        changeTab,\n        deletePreOrder,\n        formatSpec,\n        getCurrentTabLabel,\n\n        // 全局工具\n        formatPrice,\n        formatDate,\n        getOrderStatusLabel,\n        getOrderStatusType\n    }\n}\n","<template>\n  <div class=\"orders-page\">\n    <!-- Header -->\n    <div class=\"section-header\">\n      <h2 class=\"section-title\">我的订单</h2>\n      <div class=\"section-subtitle\">Order History</div>\n    </div>\n\n    <!-- Tabs (Premium Glass Pill Style) -->\n    <div class=\"order-tabs\">\n      <div \n        v-for=\"tab in tabs\" \n        :key=\"tab.value\"\n        :class=\"['tab-item', { active: currentTab === tab.value }]\"\n        @click=\"currentTab = tab.value\"\n      >\n        <span>{{ tab.label }}</span>\n        <!-- Glow Indicator -->\n        <div class=\"active-glow\" v-if=\"currentTab === tab.value\"></div>\n      </div>\n    </div>\n\n    <!-- Content Area -->\n    <div class=\"orders-scroll-area\">\n      <div class=\"orders-container\">\n        <!-- Loading -->\n        <div v-if=\"loading\" class=\"loading-state\">\n          <div class=\"glass-loader\"></div>\n          <p>正在加载订单...</p>\n        </div>\n\n        <!-- Empty -->\n        <div v-else-if=\"filteredList.length === 0\" class=\"empty-state\">\n          <div class=\"empty-icon-wrapper\">\n            <el-icon class=\"empty-icon\"><Box /></el-icon>\n          </div>\n          <div class=\"empty-text\">暂无{{ getCurrentTabLabel() }}记录</div>\n          <button class=\"go-shopping-btn\" @click=\"router.push('/')\">前往选购</button>\n        </div>\n        \n        <!-- List -->\n        <div v-else class=\"order-list\">\n          <div \n            v-for=\"item in filteredList\" \n            :key=\"item.id\" \n            class=\"order-card\"\n            :class=\"['status-' + (item.isPending ? 'pending' : item.status)]\"\n            @click=\"handleItemClick(item)\"\n          >\n            <!-- Card Status Line (Left Border) -->\n            <div class=\"status-line\"></div>\n\n            <!-- Card Content -->\n            <div class=\"card-inner\">\n              <!-- Top Row: No & Status -->\n              <div class=\"card-header\">\n                <div class=\"order-no-group\">\n                  <span class=\"label\">NO.</span>\n                  <span class=\"value\">{{ item.order_no }}</span>\n                </div>\n                \n                <!-- Premium Status Pill -->\n                <div class=\"status-pill\" :class=\"item.isPending ? 'pending' : item.status\">\n                  <div class=\"dot\"></div>\n                  <span>{{ item.isPending ? '待支付' : getStatusText(item.status) }}</span>\n                </div>\n              </div>\n\n              <!-- Main Row: Image & Info -->\n              <div class=\"card-body\">\n                <div class=\"product-thumb\">\n                  <img v-if=\"item.product_image\" :src=\"item.product_image\" class=\"thumb-img\" />\n                  <div v-else class=\"placeholder-img\"><el-icon><Picture /></el-icon></div>\n                </div>\n\n                <div class=\"product-info\">\n                  <div class=\"name-row\">\n                    <h3 class=\"product-name\">{{ item.product_name }}</h3>\n                    <span class=\"spec-tag\">{{ item.spec_text || '标准规格' }}</span>\n                  </div>\n                  \n                  <div class=\"price-row\">\n              <div class=\"price\">\n                <span class=\"amount\">{{ Number(item.total_amount).toFixed(2) }}</span>\n                <span class=\"unit\">点</span>\n              </div>\n              <div class=\"qty\">x{{ item.quantity }}</div>\n            </div>\n                </div>\n              </div>\n\n              <!-- Card Footer: Time & Actions -->\n              <div class=\"card-footer\">\n                <div class=\"order-time\">{{ formatTime(item.created_at) }}</div>\n                \n                <!-- Actions -->\n                 <div class=\"card-actions\">\n                   <!-- 待支付: 删除/去支付 -->\n                   <template v-if=\"item.isPending || item.status === 'pending'\">\n                      <button class=\"action-btn delete\" @click.stop=\"openConfirmModal(item, true)\">\n                        <el-icon><Delete /></el-icon>\n                      </button>\n                      <button class=\"action-btn pay\" @click.stop=\"handleItemClick(item)\">去支付</button>\n                   </template>\n\n                   <!-- 无效订单: 清理按钮 -->\n                   <template v-else-if=\"['expired', 'refunded', 'cancelled'].includes(item.status)\">\n                      <button class=\"action-btn cleanup\" @click.stop=\"openConfirmModal(item, false)\">\n                         <el-icon><Delete /></el-icon> 清理记录\n                      </button>\n                   </template>\n\n                   <!-- 有效订单: 查看详情 -->\n                   <template v-else>\n                      <button class=\"action-btn view\">查看详情 <el-icon><ArrowRight /></el-icon></button>\n                   </template>\n                 </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Cleanup Confirmation Modal (BaseModal) -->\n    <BaseModal\n      v-model:visible=\"confirmModalVisible\"\n      :title=\"confirmModalType === 'pending' ? '取消订单' : '清理记录'\"\n      width=\"400px\"\n      confirmText=\"确认删除\"\n      confirm-type=\"danger\"\n      :loading=\"confirmLoading\"\n      show-mascot\n      @confirm=\"handleConfirmDelete\"\n    >\n      <div class=\"confirm-content\">\n        <div class=\"confirm-icon\">\n          <el-icon><Warning /></el-icon>\n        </div>\n        <p class=\"confirm-text\">{{ confirmModalMessage }}</p>\n      </div>\n    </BaseModal>\n\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/**\n * 我的订单页面 (Premium Refactor)\n * 2026-01-21: 视觉升级 & 无效订单拦截逻辑\n * 优化: 使用 BaseModal 替代 ElMessageBox，限制最大宽度\n */\nimport { onMounted, ref, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { Box, Picture, Delete, ArrowRight, Warning } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\nimport { useOrderList } from '@/composables/client/useOrderList'\nimport BaseModal from '@/components/base/BaseModal.vue'\n\ndefinePageMeta({ ssr: false })\n\nconst router = useRouter()\n\nconst {\n  loading,\n  filteredList,\n  currentTab,\n  tabs,\n  loadList,\n  changeTab,\n  deletePreOrder,\n  formatSpec,\n  getCurrentTabLabel,\n  formatDate,\n  getOrderStatusLabel\n} = useOrderList()\n\n// --- Lifecycle ---\nonMounted(() => {\n  loadList()\n})\n\n// --- Methods ---\nconst getStatusText = (status: string) => getOrderStatusLabel(status)\nconst formatTime = (time: string) => formatDate(time)\n\n// 核心跳转逻辑 (Smart Intercept)\nconst handleItemClick = (item: any) => {\n  // 1. 待支付 -> 结账页\n  if (item.status === 'pending' || item.isPending) {\n    router.push(`/checkout/${item.id}`)\n    return\n  }\n\n  // 2. 无效订单 (已过期/已退款/已取消) -> 拦截 -> 询问是否删除\n  const invalidStatuses = ['expired', 'refunded', 'cancelled']\n  if (invalidStatuses.includes(item.status)) {\n    openConfirmModal(item, false)\n    return\n  }\n\n  // 3. 有效订单 -> 详情页\n  router.push(`/profile/order/${item.id}`)\n}\n\n// --- Modal Logic ---\nconst confirmModalVisible = ref(false)\nconst confirmLoading = ref(false)\nconst confirmModalType = ref<'pending' | 'cleanup'>('cleanup')\nconst confirmTargetItem = ref<any>(null)\n\nconst confirmModalMessage = computed(() => {\n  return confirmModalType.value === 'pending'\n    ? '确定要取消这个订单吗？取消后将释放锁定库存。'\n    : '该订单已无效(过期或退款)，确认要从列表中移除吗？'\n})\n\n// 打开确认框\nconst openConfirmModal = (item: any, isPreOrder: boolean) => {\n  confirmTargetItem.value = item\n  confirmModalType.value = isPreOrder ? 'pending' : 'cleanup'\n  confirmModalVisible.value = true\n}\n\n// 确认删除\nconst handleConfirmDelete = async () => {\n  if (!confirmTargetItem.value) return\n  \n  confirmLoading.value = true\n  try {\n    if (confirmModalType.value === 'pending') {\n      const success = await deletePreOrder(confirmTargetItem.value.id)\n      if (success) {\n        ElMessage.success('订单已取消')\n        confirmModalVisible.value = false\n      } else {\n        ElMessage.error('操作失败')\n      }\n    } else {\n      // 模拟历史订单删除\n      // TODO: Call API\n      setTimeout(() => {\n         ElMessage.success('记录已清理')\n         confirmModalVisible.value = false\n         // 前端临时移除效果 (需重新加载列表刷新)\n         loadList() \n      }, 500)\n    }\n  } catch (e) {\n    console.error(e)\n  } finally {\n    confirmLoading.value = false\n  }\n}\n</script>\n\n<style scoped>\n.orders-page {\n  display: flex; flex-direction: column; height: 100%;\n  font-family: 'Outfit', sans-serif; color: #F8FAFC;\n}\n\n/* Header */\n.section-header {\n  flex-shrink: 0; padding: 24px 32px 16px; display: flex; align-items: baseline; gap: 12px;\n}\n.section-title { font-size: 20px; font-weight: 700; color: #fff; margin: 0; }\n.section-subtitle { font-size: 12px; color: #64748B; text-transform: uppercase; letter-spacing: 1px; }\n\n/* Tabs (Premium Pill) */\n.order-tabs {\n  flex-shrink: 0; display: flex; gap: 12px; padding: 0 32px 16px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n.tab-item {\n  position: relative; padding: 8px 16px; border-radius: 100px;\n  color: #64748B; font-size: 13px; font-weight: 500; cursor: pointer;\n  transition: all 0.3s;\n}\n.tab-item:hover { color: #94A3B8; background: rgba(255,255,255,0.03); }\n.tab-item.active { color: #fff; font-weight: 600; background: rgba(255,255,255,0.05); }\n.active-glow {\n  position: absolute; inset: 0; border-radius: 100px;\n  box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n/* Scroll Area & Container Limit - WIDE */\n.orders-scroll-area { flex: 1; overflow-y: auto; padding: 24px 32px; }\n.orders-container { max-width: 900px; margin: 0 auto; }\n\n/* List */\n.order-list { display: flex; flex-direction: column; gap: 12px; padding-bottom: 40px; }\n\n/* Premium Order Card (Aggressive Compact) */\n.order-card {\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  border-radius: 16px;\n  position: relative; overflow: hidden;\n  cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  min-height: 100px;\n}\n.order-card:hover {\n  background: rgba(30, 41, 59, 0.6);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px -8px rgba(0,0,0,0.5);\n  border-color: rgba(255,255,255,0.1);\n}\n\n/* Status Line (Left Border) */\n.status-line {\n  position: absolute; left: 0; top: 0; bottom: 0; width: 4px;\n  background: #64748B; opacity: 0.8;\n}\n\n/* Card Content - COMPACT PADDING */\n.card-inner { \n  padding: 16px 20px; padding-left: 28px; /* Extra left for status line separation */\n  display: flex; flex-direction: column; gap: 0; \n}\n\n/* Header */\n.card-header { \n  display: flex; justify-content: space-between; align-items: center; \n  margin-bottom: 12px;\n}\n.order-no-group { display: flex; gap: 6px; font-family: 'Monaco', monospace; font-size: 13px; color: #64748B; }\n.order-no-group .value { color: #94A3B8; }\n\n/* Status Pill */\n.status-pill {\n  display: flex; align-items: center; gap: 6px;\n  padding: 4px 12px; border-radius: 100px;\n  font-size: 12px; font-weight: 700;\n  background: rgba(255,255,255,0.05); color: #94A3B8;\n  letter-spacing: 0.5px;\n}\n.status-pill .dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; box-shadow: 0 0 6px currentColor; }\n\n/* Body - COMPACT */\n.card-body { display: flex; gap: 16px; align-items: center; }\n.product-thumb {\n  width: 56px; height: 56px; border-radius: 12px; background: rgba(0,0,0,0.3); overflow: hidden; border: 1px solid rgba(255,255,255,0.05); flex-shrink: 0;\n}\n.thumb-img { width: 100%; height: 100%; object-fit: cover; }\n.placeholder-img { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #334155; }\n\n.product-info { flex: 1; display: flex; flex-direction: column; gap: 2px; justify-content: center; } /* Gap reduced */\n\n/* INLINE NAME & SPEC */\n.name-row {\n  display: flex; flex-wrap: wrap; align-items: center; gap: 8px;\n}\n.product-name { font-size: 15px; font-weight: 600; color: #fff; margin: 0; line-height: 1.4; }\n\n.spec-tag {\n  font-size: 11px; font-weight: 500; color: #94A3B8;\n  background: rgba(255,255,255,0.08); padding: 2px 8px; border-radius: 4px;\n  border: 1px solid rgba(255,255,255,0.05);\n}\n\n.price-row { display: flex; align-items: baseline; gap: 10px; margin-top: 2px; }\n.price { display: flex; align-items: baseline; gap: 2px; }\n.price .amount { font-size: 18px; font-weight: 700; color: #fff; letter-spacing: -0.5px; font-family: 'Outfit', sans-serif; }\n.price .unit { font-size: 12px; color: #F59E0B; font-weight: 600; }\n.qty { font-size: 12px; color: #64748B; font-weight: 500; }\n\n/* Footer - TIGHTER */\n.card-footer {\n  display: flex; justify-content: space-between; align-items: center; \n  margin-top: 14px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.05);\n}\n.order-time { font-size: 12px; color: #475569; }\n\n.card-actions { display: flex; gap: 10px; }\n.action-btn {\n  padding: 6px 14px; border-radius: 10px; border: 1px solid transparent;\n  font-size: 12px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px;\n  background: rgba(255,255,255,0.03); color: #94A3B8; transition: all 0.2s;\n  border: 1px solid rgba(255,255,255,0.05);\n}\n.action-btn:hover { background: rgba(255,255,255,0.08); color: #fff; border-color: rgba(255,255,255,0.1); transform: translateY(-1px); }\n\n/* Swipe Pay Button */\n.action-btn.pay {\n  background: linear-gradient(135deg, #F97316 0%, #FB923C 100%);\n  color: #fff; border: none; padding: 6px 18px;\n  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.25);\n}\n.action-btn.pay:hover { \n  background: linear-gradient(135deg, #EA580C 0%, #F97316 100%);\n  box-shadow: 0 6px 15px rgba(249, 115, 22, 0.35);\n  transform: translateY(-1px);\n}\n\n.action-btn.delete { color: #64748B; padding: 6px 10px; }\n.action-btn.delete:hover { color: #EF4444; background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.2); }\n\n.action-btn.cleanup { color: #64748B; padding: 6px 12px; }\n.action-btn.cleanup:hover { color: #F87171; background: rgba(239, 68, 68, 0.05); border-color: rgba(239, 68, 68, 0.2); }\n\n/* --- Status Colors (Generated by class) --- */\n/* Pending */\n.order-card.status-pending .status-line { background: #F97316; box-shadow: 0 0 10px rgba(249, 115, 22, 0.4); }\n.status-pill.pending { color: #F97316; background: rgba(249, 115, 22, 0.1); border: 1px solid rgba(249, 115, 22, 0.2); }\n\n/* Pending Delivery */\n.order-card.status-pending_delivery .status-line { background: #3B82F6; box-shadow: 0 0 10px rgba(59, 130, 246, 0.4); }\n.status-pill.pending_delivery { color: #3B82F6; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); }\n\n/* Active */\n.order-card.status-active .status-line { background: #22C55E; box-shadow: 0 0 10px rgba(34, 197, 94, 0.4); }\n.status-pill.active { color: #22C55E; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2); }\n\n/* Refunding */\n.order-card.status-refunding .status-line { background: #EAB308; }\n.status-pill.refunding { color: #EAB308; background: rgba(234, 179, 8, 0.1); border: 1px solid rgba(234, 179, 8, 0.2); }\n\n/* Expired/Refunded */\n.order-card.status-expired .status-line, .order-card.status-refunded .status-line, .order-card.status-cancelled .status-line { background: #475569; }\n.order-card.status-expired, .order-card.status-refunded { opacity: 0.7; }\n.order-card.status-expired:hover, .order-card.status-refunded:hover { opacity: 1; }\n\n/* Empty/Loading */\n.loading-state, .empty-state {\n  flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #64748B; min-height: 400px;\n}\n.glass-loader { width: 32px; height: 32px; border: 3px solid rgba(255,255,255,0.1); border-top-color: #3B82F6; border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 20px; }\n@keyframes spin { to { transform: rotate(360deg); } }\n.empty-icon-wrapper {\n  width: 80px; height: 80px; background: rgba(255, 255, 255, 0.03); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;\n}\n.empty-icon { font-size: 32px; opacity: 0.4; }\n.go-shopping-btn {\n  margin-top: 24px; background: linear-gradient(135deg, #3B82F6, #2563eb); border: none; color: #fff; padding: 10px 28px; border-radius: 100px; cursor: pointer; font-weight: 600;\n  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: all 0.2s;\n}\n.go-shopping-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4); }\n\n/* Confirm Content */\n.confirm-content { display: flex; align-items: center; gap: 16px; padding: 12px 0; }\n.confirm-icon { \n  width: 48px; height: 48px; border-radius: 50%; background: rgba(239, 68, 68, 0.1); color: #EF4444; \n  display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;\n}\n.confirm-text { color: #E2E8F0; font-size: 15px; line-height: 1.5; margin: 0; }\n</style>"],"version":3}