{"version":3,"file":"_id_-BmMX4F2y.js","sources":["../../../../components/order/FulfillmentShared.vue","../../../../components/order/FulfillmentCdk.vue","../../../../components/order/FulfillmentSubmitForm.vue","../../../../components/order/FulfillmentHistory.vue","../../../../components/order/RenewalModal.vue","../../../../components/order/RefundModal.vue","../../../../components/modal/business/TicketApplyModal.vue","../../../../components/ContactModal.vue","../../../../components/order/ProductInfoCard.vue","../../../../pages/profile/order/[id].vue"],"sourcesContent":["<template>\n  <div class=\"glass-card delivery-card\">\n    \n    <!-- Ë¥¶Âè∑ÂêàÁßü (Shared) - Single Slot View -->\n    <div class=\"delivery-content\">\n      \n        <!-- 1. Credential Card (Account & Password) -->\n        <div class=\"credential-card\">\n           <div class=\"credential-header\">\n              <!-- Promoted Slot Badge (Premium Look) -->\n              <div class=\"slot-title-badge\">\n                 <div class=\"icon-box\"><el-icon><User /></el-icon></div>\n                 <span class=\"label\">ÊÇ®ÁöÑ‰ΩçÁΩÆ:</span>\n                 <span class=\"value\">{{ formatSlotIndex(slotIndex) }}Âè∑</span>\n              </div>\n           </div>\n\n           <div class=\"credential-body\">\n              <div v-for=\"(val, key) in parseCdkCode(cdkItem)\" :key=\"key\" class=\"credential-row\">\n                 <div class=\"row-label\">{{ key }}</div>\n                 <div class=\"row-value-group\">\n                    <span class=\"row-value large-text\">{{ val }}</span>\n                    <button class=\"copy-btn-icon\" @click=\"copyText(String(val))\">\n                       <el-icon><CopyDocument /></el-icon>\n                    </button>\n                 </div>\n              </div>\n           </div>\n        </div>\n\n      <!-- 2. Roommates (Full Slot List) -->\n      <div class=\"roommates-section\">\n        <div class=\"roommates-header\">\n          <span class=\"header-title\">ÂíåÊÇ®ÂÖ±‰∫´ÁöÑÂèãÂèã</span>\n          <span class=\"header-count\">{{ occupiedCount }}/{{ maxSlots }} Â∑≤ÂÖ•Â∫ß</span>\n        </div>\n        \n        <div class=\"profiles-scroll-container\">\n           <div \n              v-for=\"slot in allSlots\" \n              :key=\"slot.index\" \n              class=\"profile-item\"\n              :class=\"{ 'is-me': slot.isMe }\"\n           >\n              <div class=\"avatar-ring\" :class=\"{ 'empty': !slot.user, 'active': slot.user }\">\n                 <img v-if=\"slot.user && slot.user.avatar\" :src=\"slot.user.avatar\" class=\"profile-avatar\" />\n                 <div v-else-if=\"slot.user\" class=\"profile-avatar placeholder\">\n                    {{ (slot.user.nickname || 'U')[0].toUpperCase() }}\n                 </div>\n                 <div v-else class=\"profile-avatar placeholder empty-icon\">\n                    <el-icon><Plus /></el-icon>\n                 </div>\n              </div>\n              \n              <span class=\"profile-name\">\n                 {{ slot.isMe ? 'Êàë' : (slot.user?.nickname || 'ÂæÖÂä†ÂÖ•') }}\n              </span>\n              \n              <span class=\"slot-number-tag\">{{ slot.index }}Âè∑</span>\n           </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, watch, computed } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { User, CopyDocument, Plus } from '@element-plus/icons-vue'\nimport { getSupabaseClient } from '@/utils/supabase'\n\ninterface CdkItem {\n  id: string\n  code: string\n  parsed: any\n  accountData: any\n}\n\ninterface CoSharingUser {\n  id: string\n  avatar: string | null\n  nickname: string | null\n  slot_index: number\n}\n\nconst props = defineProps<{\n  cdkItem: CdkItem\n  slotIndex: number\n}>()\n\nconst coSharingUsers = ref<CoSharingUser[]>([])\n\n// --- Logic for Slots ---\n// 1. Get Max Slots from CDK\nconst maxSlots = computed(() => {\n    if (!props.cdkItem) return 5 // Default fallback\n    // Check accountData for max_slots\n    if (props.cdkItem.accountData && props.cdkItem.accountData.max_slots) {\n        return Number(props.cdkItem.accountData.max_slots)\n    }\n    return 5\n})\n\n// 2. Identify My Slot\n// We use the prop slotIndex directly\nconst mySlotIndex = computed(() => props.slotIndex)\n\n// 3. Build Full Slot List\nconst allSlots = computed(() => {\n    const slots = []\n    for (let i = 1; i <= maxSlots.value; i++) {\n        const user = coSharingUsers.value.find(u => u.slot_index === i)\n        // Check if this slot matches the \"Me\" slot index passed in\n        const isMe = (i === Number(mySlotIndex.value))\n        slots.push({\n            index: i,\n            user,\n            isMe\n        })\n    }\n    return slots\n})\n\nconst occupiedCount = computed(() => coSharingUsers.value.length)\n\n\n// Ëß£Êûê CDK code ‰∏∫Â≠óÊÆµÂØπË±°\nconst parseCdkCode = (item: CdkItem) => {\n  if (!item) return {}\n  // ‰ºòÂÖà‰ΩøÁî®Â∑≤Ëß£ÊûêÁöÑ parsed\n  if (item.parsed && typeof item.parsed === 'object') {\n    return item.parsed\n  }\n  // Â∞ùËØïËß£Êûê code\n  try {\n    return JSON.parse(item.code)\n  } catch {\n    return { 'ÊøÄÊ¥ªÁ†Å': item.code }\n  }\n}\n\nconst copyText = (t: string) => {\n  navigator.clipboard.writeText(t).then(() => ElMessage.success('Â∑≤Â§çÂà∂'))\n}\n\nconst formatSlotIndex = (idx?: number) => {\n  if (idx === undefined) return '--'\n  return String(idx).padStart(2, '0')\n}\n\n// Ëé∑ÂèñÂÖ±‰∫´Áî®Êà∑ÂàóË°®\nconst fetchCoSharingUsers = async () => {\n  if (!props.cdkItem || !props.cdkItem.id) return\n  const cdkId = props.cdkItem.id\n\n  try {\n    const client = getSupabaseClient()\n    const { data, error } = await client\n      .from('slot_occupancies')\n      .select(`\n        user_id,\n        slot_index,\n        profiles:user_id (\n          id,\n          avatar,\n          nickname\n        )\n      `)\n      .eq('cdk_id', cdkId)\n      .eq('status', 'using')\n      .not('user_id', 'is', null)\n\n    if (!error && data) {\n      coSharingUsers.value = data\n        .filter((item: any) => item.profiles)\n        .map((item: any) => ({\n          id: item.profiles.id,\n          avatar: item.profiles.avatar,\n          nickname: item.profiles.nickname,\n          slot_index: item.slot_index\n        }))\n    }\n  } catch (err) {\n    console.error('Ëé∑ÂèñÂÖ±‰∫´Áî®Êà∑Â§±Ë¥•:', err)\n  }\n}\n\nonMounted(() => {\n  fetchCoSharingUsers()\n})\n\nwatch(() => props.cdkItem, () => {\n  fetchCoSharingUsers()\n}, { deep: true })\n</script>\n\n<style scoped>\n.glass-card {\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  margin-top: 16px;\n}\n\n.delivery-content { \n  display: flex; flex-direction: column; \n}\n\n/* 1. Credential Card */\n.credential-card {\n    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);\n    /* border-radius: 16px; removed inside card */\n    /* border: 1px solid rgba(255,255,255,0.08); */\n    overflow: hidden;\n}\n\n.credential-header {\n    padding: 16px 24px;\n    background: rgba(0,0,0,0.1);\n    display: flex; align-items: center; \n    border-bottom: 1px solid rgba(255,255,255,0.05);\n}\n\n/* Premium Slot Badge Title */\n.slot-title-badge {\n    display: flex; align-items: center; gap: 10px;\n}\n\n.icon-box {\n    width: 32px; height: 32px;\n    background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2));\n    border: 1px solid rgba(16, 185, 129, 0.3);\n    border-radius: 8px;\n    display: flex; align-items: center; justify-content: center;\n    color: #34D399; font-size: 16px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.slot-title-badge .label {\n    font-size: 14px; font-weight: 500; color: #94A3B8;\n}\n\n.slot-title-badge .value {\n    font-size: 16px; font-weight: 700; color: #fff;\n    font-family: 'Outfit', sans-serif; \n    letter-spacing: 0.5px;\n    text-shadow: 0 0 10px rgba(16, 185, 129, 0.3); \n}\n\n.credential-body {\n    padding: 16px 20px;\n    display: flex; flex-direction: column; gap: 12px;\n}\n\n.credential-row {\n    display: flex; flex-direction: column; gap: 4px;\n}\n\n.row-label { font-size: 12px; color: #64748B; }\n\n.row-value-group {\n    display: flex; align-items: center; gap: 10px;\n}\n\n.row-value {\n    font-family: 'Monaco', monospace; font-size: 16px; color: #fff; letter-spacing: 0.5px;\n    background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px;\n}\n\n.copy-btn-icon {\n    background: rgba(255,255,255,0.1); border: none; color: #94A3B8;\n    width: 28px; height: 28px; border-radius: 6px;\n    display: flex; align-items: center; justify-content: center;\n    cursor: pointer; transition: all 0.2s;\n}\n.copy-btn-icon:hover { background: rgba(255,255,255,0.2); color: #fff; transform: translateY(-1px); }\n\n\n/* 2. Roommates Section (Netflix Style) */\n.roommates-section {\n    border-top: 1px solid rgba(255,255,255,0.05);\n    padding: 20px 24px 24px;\n    background: linear-gradient(to bottom, rgba(15,23,42,0.4), rgba(15,23,42,0.6));\n}\n\n.roommates-header {\n    display: flex; justify-content: space-between; align-items: center;\n    margin-bottom: 16px;\n}\n.header-title { font-size: 13px; font-weight: 600; color: #CBD5E1; }\n.header-count { font-size: 12px; color: #64748B; }\n\n.profiles-scroll-container {\n    display: flex; align-items: flex-start; gap: 20px;\n    overflow-x: auto;\n    padding-bottom: 8px; \n    scrollbar-width: none; \n}\n.profiles-scroll-container::-webkit-scrollbar { display: none; }\n\n.profile-item {\n    display: flex; flex-direction: column; align-items: center; gap: 8px;\n    width: 64px; flex-shrink: 0;\n    transition: transform 0.2s;\n    cursor: pointer;\n}\n.profile-item:hover { transform: translateY(-2px); }\n\n.avatar-ring {\n    width: 56px; height: 56px;\n    border-radius: 12px;\n    border: 2px solid rgba(255,255,255,0.1);\n    padding: 2px; \n    display: flex; align-items: center; justify-content: center;\n    transition: border-color 0.3s;\n}\n\n.profile-item:hover .avatar-ring { border-color: #E2E8F0; }\n\n/* Placeholder Avatar with Gradient */\n.profile-avatar.placeholder {\n    background: linear-gradient(135deg, #475569, #334155);\n    color: #CBD5E1; font-weight: 700; font-size: 20px;\n    border: none;\n}\n.profile-avatar {\n    width: 100%; height: 100%;\n    border-radius: 8px; \n    object-fit: cover;\n    background: #1E293B;\n}\n\n.profile-name {\n    font-size: 11px; color: #94A3B8; text-align: center;\n    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n    width: 100%;\n    transition: color 0.2s;\n}\n.profile-item:hover .profile-name { color: #fff; }\n\n/* Empty Slot Styling */\n.empty-slot { opacity: 0.5; cursor: default; }\n.empty-slot:hover { transform: none; }\n.avatar-ring.empty { border-style: dashed; border-color: rgba(255,255,255,0.1); color: #64748B; }\n\n/* Me Highlight - Subtle gold ring or text */\n.profile-item.is-me .avatar-ring {\n    border-color: #10B981; /* Green for me */\n    box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);\n}\n.profile-item.is-me .profile-name {\n    color: #10B981; font-weight: 700;\n}\n</style>\n\n","<template>\n  <div class=\"gift-card-container\">\n    \n    <!-- Case A: Single Code (Rich Display) -->\n    <div v-if=\"cdkList.length === 1\" class=\"gift-cards-wrapper\">\n       <div class=\"gift-card-item\">\n         <div class=\"card-strip\">\n            <span class=\"strip-text\">DIGITAL VOUCHER</span>\n            <div class=\"strip-decoration\"></div>\n         </div>\n         <div class=\"card-content\">\n            <div class=\"code-label\">ÂÖëÊç¢Á†Å / REDEEM CODE</div>\n            <div class=\"code-display-row\">\n               <span class=\"the-code\">{{ cdkList[0].code }}</span>\n            </div>\n            <div class=\"action-row\">\n               <button class=\"copy-pill-btn\" @click=\"copyText(cdkList[0].code)\">\n                  <el-icon><CopyDocument /></el-icon> Â§çÂà∂Âç°ÂØÜ\n               </button>\n            </div>\n         </div>\n         <div class=\"shine-effect\"></div>\n       </div>\n    </div>\n\n    <!-- Case B: Multiple Codes (Compact Stack) -->\n    <div v-else-if=\"cdkList.length > 1\" class=\"compact-stack-wrapper\">\n       <div class=\"glass-header\">\n          <div class=\"header-left\">\n             <el-icon class=\"stack-icon\"><Files /></el-icon>\n             <span class=\"stack-title\">ÂåÖÂê´ {{ cdkList.length }} ÁªÑÊøÄÊ¥ªÁ†Å</span>\n          </div>\n          <button class=\"batch-copy-btn\" @click=\"copyAll\">\n             Â§çÂà∂ÂÖ®ÈÉ®\n          </button>\n       </div>\n       \n       <div class=\"stack-list\">\n          <div v-for=\"(item, idx) in cdkList\" :key=\"idx\" class=\"stack-item\">\n             <div class=\"stack-index\">{{ idx + 1 }}</div>\n             <div class=\"stack-code\">{{ item.code }}</div>\n             <button class=\"icon-copy-btn\" @click=\"copyText(item.code)\">\n                <el-icon><CopyDocument /></el-icon>\n             </button>\n          </div>\n       </div>\n    </div>\n\n    <div v-else class=\"empty-state\">\n      ÊöÇÊó†ËØ¶ÁªÜ‰∫§‰ªò‰ø°ÊÅØ\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ElMessage } from 'element-plus'\nimport { CopyDocument, Files } from '@element-plus/icons-vue'\n\ninterface CdkItem {\n  id: string\n  code: string\n  parsed: any\n  accountData: any\n}\n\nconst props = defineProps<{\n  cdkList: CdkItem[]\n}>()\n\nconst copyText = (t: string) => {\n  navigator.clipboard.writeText(t).then(() => ElMessage.success('Â∑≤Â§çÂà∂'))\n}\n\nconst copyAll = () => {\n   const allText = props.cdkList.map(c => c.code).join('\\n')\n   copyText(allText)\n}\n</script>\n\n<style scoped>\n.gift-card-container {\n  margin-top: 16px;\n  display: flex; flex-direction: column; gap: 16px;\n}\n\n/* --- Case A: Single Card Styles --- */\n.gift-card-item {\n  position: relative;\n  background: linear-gradient(135deg, #1e293b, #0f172a);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.gift-card-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.card-strip {\n  background: linear-gradient(90deg, #F59E0B, #D97706);\n  height: 6px; width: 100%; position: relative;\n}\n.strip-text {\n  font-size: 9px; font-weight: 800; color: rgba(0,0,0,0.4); \n  letter-spacing: 2px; margin-left: 12px; margin-top: 12px; \n  position: absolute; top: 0; left: 0;\n}\n\n.card-content {\n  padding: 24px 28px;\n  display: flex; flex-direction: column; align-items: center; gap: 16px;\n}\n\n.code-label {\n  font-size: 11px; color: #64748B; font-weight: 600; letter-spacing: 1px; text-transform: uppercase;\n}\n\n.code-display-row {\n  width: 100%; text-align: center; padding: 12px 16px;\n  background: rgba(0,0,0,0.3); border-radius: 8px; border: 1px dashed rgba(255,255,255,0.1);\n}\n\n.the-code {\n  font-family: 'Monaco', 'Courier New', monospace;\n  font-size: 20px; font-weight: 700; color: #F8FAFC; letter-spacing: 1.5px; word-break: break-all;\n}\n\n.action-row { width: 100%; display: flex; justify-content: center; }\n\n.copy-pill-btn {\n  display: flex; align-items: center; gap: 8px;\n  padding: 8px 24px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 20px;\n  color: #E2E8F0; font-size: 13px; font-weight: 600;\n  cursor: pointer; transition: all 0.2s;\n}\n.copy-pill-btn:hover { background: rgba(255, 255, 255, 0.2); color: #fff; transform: translateY(-1px); }\n\n.shine-effect {\n  position: absolute; top: 0; left: 0; width: 100%; height: 100%;\n  background: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.05), transparent 70%);\n  pointer-events: none;\n}\n\n/* --- Case B: Compact Stack Styles --- */\n.compact-stack-wrapper {\n   background: rgba(30, 41, 59, 0.4);\n   border: 1px solid rgba(255, 255, 255, 0.08);\n   border-radius: 12px; overflow: hidden;\n}\n\n.glass-header {\n   padding: 12px 20px;\n   background: rgba(0,0,0,0.2);\n   border-bottom: 1px solid rgba(255,255,255,0.05);\n   display: flex; justify-content: space-between; align-items: center;\n}\n\n.header-left { display: flex; align-items: center; gap: 8px; color: #E2E8F0; font-weight: 600; font-size: 14px; }\n.stack-icon { color: #3B82F6; }\n\n.batch-copy-btn {\n   font-size: 12px; color: #3B82F6; background: none; border: none; cursor: pointer; font-weight: 500;\n}\n.batch-copy-btn:hover { text-decoration: underline; }\n\n.stack-list { }\n\n.stack-item {\n   display: flex; align-items: center; gap: 12px;\n   padding: 12px 20px;\n   border-bottom: 1px solid rgba(255,255,255,0.03);\n   transition: background 0.2s;\n}\n.stack-item:last-child { border-bottom: none; }\n.stack-item:hover { background: rgba(255,255,255,0.05); }\n\n.stack-index {\n   font-size: 11px; color: #64748B; width: 20px; font-family: 'Monaco', monospace;\n}\n\n.stack-code {\n   flex: 1;\n   font-family: 'Monaco', monospace; font-size: 14px; color: #CBD5E1;\n   word-break: break-all;\n}\n\n.icon-copy-btn {\n   width: 28px; height: 28px; border-radius: 6px;\n   background: rgba(255,255,255,0.05); border: none; color: #94A3B8;\n   display: flex; align-items: center; justify-content: center; cursor: pointer;\n}\n.icon-copy-btn:hover { background: rgba(255,255,255,0.15); color: #fff; }\n\n.empty-state { text-align: center; padding: 20px; color: #64748b; }\n</style>\n","<template>\n  <div class=\"fulfillment-submit-form glass-panel\">\n    <!-- È°∂ÈÉ®ÊèêÈÜí (Êó†ÂõæË°®ÔºåÁ∫ØÊñáÂ≠óÔºåGlassÈ£éÊ†º) -->\n    <div class=\"tip-header-glass\">\n      <span class=\"tip-text\">ÂõæÊãâÊèêÈÜíÔºöÊÇ®Ë¶ÅÂ°´ÂÜô‰ª•‰∏ã‰ø°ÊÅØÊâçÂèØ‰ª•Âì¶</span>\n    </div>\n\n    <!-- Ë°®ÂçïÂå∫Âüü -->\n    <div class=\"form-area\">\n      <div v-for=\"field in fields\" :key=\"field.key\" class=\"form-group\">\n        <label class=\"form-label\">{{ field.label }}</label>\n        <div class=\"input-wrapper\">\n           <input\n            v-model=\"formData[field.key]\"\n            class=\"glass-input\"\n            :placeholder=\"'ËØ∑ËæìÂÖ•' + field.label\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Áä∂ÊÄÅÊèêÁ§∫ (Status Cards) -->\n    <div v-if=\"latestStatus\" class=\"status-card-wrapper\">\n        <div v-if=\"latestStatus === 'submitted'\" class=\"status-card pending\">\n            <div class=\"card-icon\"><el-icon class=\"spin\"><Loading /></el-icon></div>\n            <div class=\"card-content\">\n                <div class=\"card-title\">ÂÆ°Ê†∏‰∏≠</div>\n                <div class=\"card-desc\">ÊÇ®ÁöÑÂõûÊâßÂ∑≤Êèê‰∫§ÔºåÁÆ°ÁêÜÂëòÊ≠£Âú®ÊãºÂëΩÂÆ°Ê†∏‰∏≠...</div>\n            </div>\n        </div>\n        <div v-else-if=\"latestStatus === 'approved'\" class=\"status-card success\">\n            <div class=\"card-icon\"><el-icon><CircleCheck /></el-icon></div>\n             <div class=\"card-content\">\n                <div class=\"card-title\">Â∑≤ÈÄöËøá</div>\n                <div class=\"card-desc\">ÂÖÖÂÄºÂ∑≤ÂÆåÊàêÔºåËØ∑Ê£ÄÊü•ÊÇ®ÁöÑË¥¶Êà∑Âà∞Ë¥¶ÊÉÖÂÜµ„ÄÇ</div>\n            </div>\n        </div>\n        <div v-else-if=\"latestStatus === 'rejected'\" class=\"status-card error\">\n            <div class=\"card-icon\"><el-icon><CircleClose /></el-icon></div>\n             <div class=\"card-content\">\n                <div class=\"card-title\">Â∑≤È©≥Âõû</div>\n                <div class=\"card-desc\">ÂéüÂõ†Ôºö{{ latestRejectReason }}</div>\n            </div>\n        </div>\n    </div>\n\n    <!-- ÊåâÈíÆÂå∫Âüü -->\n    <div class=\"action-footer\">\n      <!-- Êó†ËÆ∞ÂΩïÔºöÂ°´ÂÜôÂõûÊâß -->\n      <button v-if=\"!latestStatus\" class=\"glass-btn primary\" :disabled=\"isSubmitting\" @click=\"handleInsert\">\n        <el-icon class=\"btn-icon\"><EditPen /></el-icon> Â°´ÂÜôÂõûÊâß\n      </button>\n\n      <!-- submitted Áä∂ÊÄÅÔºö‰øÆÊîπÂõûÊâß -->\n      <button v-if=\"latestStatus === 'submitted'\" class=\"glass-btn secondary\" :disabled=\"isSubmitting\" @click=\"handleUpdate\">\n        <el-icon class=\"btn-icon\"><Edit /></el-icon> ‰øÆÊîπÂõûÊâß‰ø°ÊÅØ\n      </button>\n\n      <!-- rejected Áä∂ÊÄÅÔºöÈáçÊñ∞Êèê‰∫§ -->\n      <button v-if=\"latestStatus === 'rejected'\" class=\"glass-btn primary\" :disabled=\"isSubmitting\" @click=\"handleInsert\">\n        <el-icon class=\"btn-icon\"><RefreshRight /></el-icon> ÈáçÊñ∞Êèê‰∫§\n      </button>\n\n      <!-- approved Áä∂ÊÄÅÔºöÂÜçÊ¨°Êèê‰∫§ -->\n      <button v-if=\"latestStatus === 'approved'\" class=\"glass-btn secondary\" :disabled=\"isSubmitting\" @click=\"handleInsert\">\n        <el-icon class=\"btn-icon\"><DocumentAdd /></el-icon> ÂÜçÊ¨°Êèê‰∫§\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { Loading, CircleCheck, CircleClose, EditPen, Edit, RefreshRight, DocumentAdd } from '@element-plus/icons-vue' // Import icons\nimport { getSupabaseClient } from '@/utils/supabase'\nimport type { OrderFulfillment, FulfillmentField } from '@/types/order'\n\nconst props = defineProps<{\n  orderId: string\n  orderStatus: string\n  cdkFields: FulfillmentField[]\n  cdkId?: string\n}>()\n\nconst emit = defineEmits(['submit-success'])\n\n// Áä∂ÊÄÅ\nconst latestFulfillment = ref<OrderFulfillment | null>(null)\nconst isSubmitting = ref(false)\nconst formData = reactive<Record<string, string>>({})\n\n// Âä®ÊÄÅÂ≠óÊÆµÂàóË°®\nconst fields = computed(() => props.cdkFields || [])\n\n// ÊúÄÊñ∞ÂõûÊâßÁä∂ÊÄÅ\nconst latestStatus = computed(() => latestFulfillment.value?.status)\nconst latestRejectReason = computed(() => latestFulfillment.value?.reject_reason || 'Êú™Â°´ÂÜôÂéüÂõ†')\n\n// ÂàùÂßãÂåñË°®ÂçïÊï∞ÊçÆ\nconst initFormData = () => {\n  // ÂÖàÊ∏ÖÁ©∫ÊâÄÊúâÂ≠óÊÆµ\n  fields.value.forEach(f => {\n    formData[f.key] = ''\n  })\n  \n  // submitted Êàñ rejected Áä∂ÊÄÅÔºöÂ°´ÂÖÖ‰∏äÊ¨°Êèê‰∫§ÁöÑÂÜÖÂÆπ\n  if (latestFulfillment.value?.payload && \n      (latestStatus.value === 'submitted' || latestStatus.value === 'rejected')) {\n    Object.entries(latestFulfillment.value.payload).forEach(([k, v]) => {\n      // ÊéíÈô§ÂÜÖÈÉ®Â≠óÊÆµ\n      if (k === '_cdk_id') return\n      \n      if (k in formData) {\n        formData[k] = v\n      }\n    })\n  }\n}\n\n// Ëé∑ÂèñÊúÄÊñ∞ÂõûÊâß\nconst fetchLatestFulfillment = async () => {\n  if (!props.orderId) return\n  \n  try {\n    const client = getSupabaseClient()\n    let query = client\n      .from('order_fulfillments')\n      .select('*')\n      .eq('order_id', props.orderId)\n      .order('submitted_at', { ascending: false })\n      \n    // Â¶ÇÊûúÊåáÂÆö‰∫Ü cdkIdÔºåÂàôËøáÊª§ payload\n    if (props.cdkId) {\n       query = query.contains('payload', { _cdk_id: props.cdkId })\n    }\n\n    const { data, error } = await query.limit(1).maybeSingle()\n    \n    if (!error && data) {\n      latestFulfillment.value = data as OrderFulfillment\n      initFormData()\n    } else {\n      latestFulfillment.value = null\n      initFormData() // Reset if no data found\n    }\n  } catch (err) {\n    console.error('Ëé∑ÂèñÂõûÊâßÂ§±Ë¥•:', err)\n  }\n}\n\n// Êèê‰∫§ÂõûÊâßÔºàÊñ∞Âª∫ËÆ∞ÂΩï - INSERTÔºâ\nconst handleInsert = async () => {\n  isSubmitting.value = true\n  try {\n    const client = getSupabaseClient()\n    const payload: Record<string, string> = {}\n    fields.value.forEach(f => {\n      payload[f.key] = formData[f.key] || ''\n    })\n    \n    // Ê≥®ÂÖ• CDK Ê†áËØÜ (‰ΩøÁî® ID Á°Æ‰øùÂîØ‰∏Ä)\n    if (props.cdkId) {\n        payload['_cdk_id'] = props.cdkId\n    }\n    \n    const { data, error } = await client\n      .from('order_fulfillments')\n      .insert({\n        order_id: props.orderId,\n        status: 'submitted',\n        payload,\n        submitted_at: new Date().toISOString()\n      })\n      .select()\n      .single()\n    \n    if (error) {\n      ElMessage.error('Êèê‰∫§Â§±Ë¥•: ' + error.message)\n      return\n    }\n    \n    latestFulfillment.value = data as OrderFulfillment\n    ElMessage.success('ÂõûÊâßÊèê‰∫§ÊàêÂäüÔºåËØ∑Á≠âÂæÖÂÆ°Ê†∏')\n    emit('submit-success')\n  } catch (err: any) {\n    ElMessage.error(err.message || 'Êèê‰∫§Â§±Ë¥•')\n  } finally {\n    isSubmitting.value = false\n  }\n}\n\n// ‰øÆÊîπÂõûÊâßÔºàÊõ¥Êñ∞ÂΩìÂâç submitted ËÆ∞ÂΩï - UPDATEÔºâ\nconst handleUpdate = async () => {\n  if (!latestFulfillment.value) return\n  \n  isSubmitting.value = true\n  try {\n    const client = getSupabaseClient()\n    const payload: Record<string, string> = {}\n    fields.value.forEach(f => {\n      payload[f.key] = formData[f.key] || ''\n    })\n    \n    if (props.cdkId) {\n        payload['_cdk_id'] = props.cdkId\n    }\n    \n    const { error } = await client\n      .from('order_fulfillments')\n      .update({\n        payload,\n        submitted_at: new Date().toISOString()\n      })\n      .eq('id', latestFulfillment.value.id)\n    \n    if (error) {\n      ElMessage.error('‰øÆÊîπÂ§±Ë¥•: ' + error.message)\n      return\n    }\n    \n    ElMessage.success('ÂõûÊâß‰øÆÊîπÊàêÂäü')\n    await fetchLatestFulfillment()\n    emit('submit-success')\n  } catch (err: any) {\n    ElMessage.error(err.message || '‰øÆÊîπÂ§±Ë¥•')\n  } finally {\n    isSubmitting.value = false\n  }\n}\n\n// ÁõëÂê¨Â≠óÊÆµÂèòÂåñ\nwatch(() => props.cdkFields, () => {\n  initFormData()\n}, { immediate: true })\n\nonMounted(() => {\n  fetchLatestFulfillment()\n})\n\n// Êö¥Èú≤Âà∑Êñ∞ÊñπÊ≥ï\ndefineExpose({ refresh: fetchLatestFulfillment })\n</script>\n\n<style scoped>\n.glass-panel {\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  margin-top: 16px;\n  display: flex;\n  flex-direction: column;\n}\n\n/* È°∂ÈÉ®ÊèêÈÜí (Êó†Icon, Á∫ØÂáÄÁâà) */\n.tip-header-glass {\n  padding: 14px 24px;\n  background: rgba(255, 255, 255, 0.03);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n  text-align: left;\n}\n.tip-text {\n  font-size: 13px;\n  font-weight: 500;\n  color: #94A3B8; /* Subtle text color */\n  letter-spacing: 0.5px;\n}\n\n/* Ë°®ÂçïÂå∫Âüü */\n.form-area {\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form-label {\n  font-size: 13px;\n  color: #E2E8F0;\n  font-weight: 500;\n  margin-left: 2px;\n}\n\n.input-wrapper {\n  position: relative;\n}\n\n.glass-input {\n  width: 100%;\n  padding: 12px 16px;\n  background: rgba(15, 23, 42, 0.6);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n  font-size: 14px;\n  color: #fff;\n  transition: all 0.2s ease;\n  outline: none;\n}\n\n.glass-input:focus {\n  background: rgba(15, 23, 42, 0.8);\n  border-color: #3B82F6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);\n}\n\n.glass-input::placeholder {\n  color: #64748B;\n}\n\n/* Áä∂ÊÄÅÂç°Áâá */\n.status-card-wrapper {\n    padding: 0 24px 20px;\n}\n\n.status-card {\n    display: flex;\n    align-items: flex-start;\n    gap: 16px;\n    padding: 16px;\n    border-radius: 12px;\n    background: rgba(255,255,255,0.03);\n    border: 1px solid rgba(255,255,255,0.05);\n}\n\n.status-card.pending {\n    background: rgba(234, 179, 8, 0.05);\n    border-color: rgba(234, 179, 8, 0.2);\n}\n.status-card.pending .card-icon { color: #FACC15; }\n.status-card.pending .card-title { color: #FACC15; }\n\n.status-card.success {\n    background: rgba(34, 197, 94, 0.05);\n    border-color: rgba(34, 197, 94, 0.2);\n}\n.status-card.success .card-icon { color: #4ADE80; }\n.status-card.success .card-title { color: #4ADE80; }\n\n.status-card.error {\n    background: rgba(248, 113, 113, 0.05);\n    border-color: rgba(248, 113, 113, 0.2);\n}\n.status-card.error .card-icon { color: #F87171; }\n.status-card.error .card-title { color: #F87171; }\n\n.card-icon {\n    font-size: 20px;\n    padding-top: 2px;\n}\n.spin { animation: spin 2s linear infinite; }\n@keyframes spin { 100% { transform: rotate(360deg); } }\n\n.card-content { flex: 1; }\n.card-title { font-size: 14px; font-weight: 700; margin-bottom: 4px; }\n.card-desc { font-size: 13px; color: #94A3B8; line-height: 1.5; }\n\n/* Â∫ïÈÉ®ÊåâÈíÆ */\n.action-footer {\n  padding: 20px 24px;\n  background: rgba(0, 0, 0, 0.2);\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\n  display: flex;\n  justify-content: center; /* Centered */\n  padding-bottom: 24px;\n}\n\n.glass-btn {\n  padding: 10px 40px; /* Wider padding for better look info */\n  min-width: 140px;\n  height: 44px; /* Fixed height for clean look */\n  border-radius: 22px; /* Pill shape for premium feel */\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px; /* Icon gap */\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.btn-icon { font-size: 16px; }\n\n.glass-btn:disabled { opacity: 0.6; cursor: not-allowed; }\n\n.glass-btn.primary {\n  background: linear-gradient(135deg, #3B82F6, #2563EB);\n  color: white;\n  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);\n}\n.glass-btn.primary:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.5);\n}\n\n.glass-btn.secondary {\n  background: rgba(255, 255, 255, 0.05);\n  color: #E2E8F0;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n.glass-btn.secondary:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n}\n</style>\n","<template>\n  <div v-if=\"records.length > 0\" class=\"fulfillment-history glass-panel\">\n    <div class=\"history-header\">\n      <div class=\"header-left\">\n        <span class=\"icon\">üìã</span>\n        <span class=\"title\">ÂõûÊâßËÆ∞ÂΩï</span>\n        <span class=\"count-badge flex-center\">{{ records.length }}</span>\n      </div>\n      \n      <!-- Expand Toggle -->\n      <button v-if=\"records.length > 1\" class=\"expand-btn\" @click=\"toggleExpand\">\n         <span class=\"btn-text\">{{ isExpanded ? 'Êî∂Ëµ∑' : 'Â±ïÂºÄÂéÜÂè≤' }}</span>\n         <el-icon :class=\"{ 'rotate-180': isExpanded }\"><ArrowDown /></el-icon>\n      </button>\n    </div>\n    \n    <div class=\"history-list\">\n      <div \n        v-for=\"(record, index) in displayRecords\" \n        :key=\"record.id\" \n        class=\"history-card slide-in\"\n        :class=\"record.status\"\n      >\n        <!-- Card Header: Status + Time -->\n        <div class=\"card-top\">\n           <div class=\"status-indicator\" :class=\"record.status\">\n              <el-icon v-if=\"record.status === 'approved'\"><CircleCheck /></el-icon>\n              <el-icon v-else-if=\"record.status === 'rejected'\"><CircleClose /></el-icon>\n              <el-icon v-else><Loading /></el-icon>\n              <span>{{ statusText(record.status) }}</span>\n           </div>\n           <span class=\"time-str\">{{ formatTime(record.submitted_at) }}</span>\n        </div>\n\n        <!-- Payload (Compact) -->\n        <div class=\"card-payload\">\n             <div v-for=\"(value, key) in record.payload\" :key=\"key\" class=\"payload-field\" v-show=\"key !== '_cdk_id'\">\n               <span class=\"field-label\">{{ key }}:</span>\n               <span class=\"field-value\">{{ maskValue(value) }}</span>\n             </div>\n        </div>\n\n        <!-- Reject Reason (Prominent) -->\n        <div v-if=\"record.status === 'rejected' && record.reject_reason\" class=\"reject-alert\">\n             <el-icon><Warning /></el-icon>\n             <span>È©≥ÂõûÂéüÂõ†: {{ record.reject_reason }}</span>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { ArrowDown, CircleCheck, CircleClose, Loading, Warning } from '@element-plus/icons-vue'\nimport { getSupabaseClient } from '@/utils/supabase'\nimport type { OrderFulfillment } from '@/types/order'\n\nconst props = defineProps<{\n  orderId: string\n  filterCdkId?: string\n}>()\n\nconst records = ref<OrderFulfillment[]>([])\nconst isExpanded = ref(false)\n\nconst displayRecords = computed(() => {\n    if (isExpanded.value) return records.value\n    // Default: Show only the newest one (index 0)\n    return records.value.slice(0, 1)\n})\n\nconst toggleExpand = () => isExpanded.value = !isExpanded.value\n\nconst fetchHistory = async () => {\n  if (!props.orderId) return\n  \n  try {\n    const client = getSupabaseClient()\n    let query = client\n      .from('order_fulfillments')\n      .select('*')\n      .eq('order_id', props.orderId)\n      .order('submitted_at', { ascending: false })\n\n    // ËøáÊª§ÁâπÂÆö CDK\n    if (props.filterCdkId) {\n        query = query.contains('payload', { _cdk_id: props.filterCdkId })\n    }\n\n    const { data, error } = await query\n\n    if (!error && data) {\n      records.value = data as OrderFulfillment[]\n    }\n  } catch (err) {\n    console.error('Ëé∑ÂèñÂõûÊâßÂéÜÂè≤Â§±Ë¥•:', err)\n  }\n}\n\nconst statusText = (status: string) => {\n  const map: Record<string, string> = {\n    submitted: 'ÂÆ°Ê†∏‰∏≠',\n    approved: 'Â∑≤ÈÄöËøá',\n    rejected: 'Â∑≤È©≥Âõû'\n  }\n  return map[status] || status\n}\n\nconst formatTime = (time: string) => {\n  // Simple compact time\n  const date = new Date(time)\n  const m = (date.getMonth()+1).toString().padStart(2, '0')\n  const d = date.getDate().toString().padStart(2, '0')\n  const h = date.getHours().toString().padStart(2, '0')\n  const min = date.getMinutes().toString().padStart(2, '0')\n  return `${m}-${d} ${h}:${min}`\n}\n\nconst maskValue = (value: string) => {\n  if (!value || value.length <= 4) return value\n  // Simple mask logic, user mentions show/hide functionality in plan \n  // but to keep compact, let's stick to default mask first as requested\n  return value.slice(0, 2) + '****' + value.slice(-2)\n}\n\nonMounted(() => {\n  fetchHistory()\n})\n\n// Êö¥Èú≤Âà∑Êñ∞ÊñπÊ≥ï‰æõÁà∂ÁªÑ‰ª∂Ë∞ÉÁî®\ndefineExpose({ refresh: fetchHistory })\n</script>\n\n<style scoped>\n.glass-panel {\n  background: rgba(30, 41, 59, 0.4);\n  backdrop-filter: blur(8px);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  margin-top: 16px;\n}\n\n.history-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 20px;\n  background: rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.header-left { display: flex; align-items: center; gap: 8px; }\n.title { font-size: 13px; font-weight: 600; color: #E2E8F0; }\n.count-badge {\n    background: rgba(255,255,255,0.1);\n    color: #94A3B8;\n    font-size: 11px;\n    padding: 2px 6px;\n    border-radius: 10px;\n    min-width: 20px;\n    text-align: center;\n}\n\n.expand-btn {\n    display: flex; align-items: center; gap: 4px;\n    background: transparent; border: none;\n    font-size: 12px; color: #64748B;\n    cursor: pointer; transition: color 0.2s;\n}\n.expand-btn:hover { color: #fff; }\n.rotate-180 { transform: rotate(180deg); transition: transform 0.3s; }\n\n/* List */\n.history-list {\n  padding: 16px 20px;\n  display: flex; flex-direction: column; gap: 12px;\n}\n\n.history-card {\n    background: rgba(255,255,255,0.03);\n    border: 1px solid rgba(255,255,255,0.05);\n    border-radius: 10px;\n    padding: 12px 16px;\n    transition: all 0.2s;\n}\n.slide-in { animation: slideIn 0.3s ease-out backwards; }\n@keyframes slideIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }\n\n.card-top {\n    display: flex; justify-content: space-between; align-items: center;\n    margin-bottom: 10px;\n}\n\n.status-indicator {\n    display: flex; align-items: center; gap: 6px;\n    font-size: 13px; font-weight: 500;\n}\n.status-indicator.submitted { color: #FACC15; }\n.status-indicator.approved { color: #4ADE80; }\n.status-indicator.rejected { color: #F87171; }\n\n.time-str { font-size: 12px; color: #64748B; font-family: monospace; }\n\n.card-payload {\n    display: flex; flex-wrap: wrap; gap: 12px;\n}\n\n.payload-field {\n    display: flex; align-items: center; gap: 6px;\n    padding: 4px 10px;\n    background: rgba(0,0,0,0.2);\n    border-radius: 6px;\n}\n.field-label { color: #64748B; font-size: 12px; }\n.field-value { color: #E2E8F0; font-size: 13px; font-family: monospace; }\n\n.reject-alert {\n    margin-top: 10px;\n    display: flex; align-items: center; gap: 8px;\n    background: rgba(239, 68, 68, 0.1);\n    color: #F87171;\n    padding: 8px 12px;\n    border-radius: 6px;\n    font-size: 12px;\n}\n</style>\n","<template>\n  <BaseModal\n    v-model:visible=\"visible\"\n    title=\"Áª≠Ë¥πËÆ¢Âçï\"\n    width=\"720px\"\n    :footer=\"false\"\n    show-mascot\n  >\n    <div class=\"renewal-content\">\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"loading-state\">\n        <div class=\"spinner\"></div>\n        <p>Âä†ËΩΩÁª≠Ë¥πÈÄâÈ°π...</p>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"error-state\">\n        <div class=\"error-icon\">‚ö†Ô∏è</div>\n        <p>{{ error }}</p>\n      </div>\n\n      <!-- Main Content -->\n      <div v-else class=\"renewal-form\">\n        <div class=\"renewal-split-layout\">\n          \n          <!-- Left Column: Specs & Info -->\n          <div class=\"refresh-left-col\">\n            <!-- Product Header -->\n            <div class=\"product-header-compact\">\n              <el-image :src=\"productInfo.image\" class=\"mini-thumb\" fit=\"cover\">\n                <template #placeholder><div class=\"ph\">IMG</div></template>\n              </el-image>\n              <div class=\"ph-info\">\n                 <div class=\"ph-name\">{{ productInfo.name }}</div>\n                 <div class=\"ph-expire\">ÂΩìÂâçÂà∞Êúü: {{ formatDate(currentEndTime) }}</div>\n              </div>\n            </div>\n\n            <!-- SKU Spec Selection -->\n            <div class=\"specs-wrapper\">\n              \n               <div v-if=\"specGroups.length > 0\">\n                <div v-for=\"specGroup in specGroups\" :key=\"specGroup.name\" class=\"spec-group\">\n                  <div class=\"spec-label\">{{ specGroup.name }}</div>\n                  <div class=\"spec-values\">\n                    <div \n                      v-for=\"val in specGroup.values\" \n                      :key=\"val.value\"\n                      :class=\"['spec-val-btn', { active: selectedSpecs[specGroup.name] === val.value }]\"\n                      @click=\"handleSpecSelect(specGroup.name, val.value)\"\n                    >\n                      {{ val.value }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div v-else-if=\"skuList.length > 0\" class=\"simple-sku-list\">\n                <div class=\"spec-label\">ÈÄâÊã©Êó∂Èïø</div>\n                <div class=\"spec-values\">\n                  <div \n                    v-for=\"sku in skuList\" \n                    :key=\"sku.sku_id\"\n                    :class=\"['spec-val-btn', { active: selectedSkuId === sku.sku_id }]\"\n                    @click=\"handleSimpleSkuSelect(sku)\"\n                  >\n                    {{ sku.duration }}Â§©\n                  </div>\n                </div>\n              </div>\n\n            </div>\n\n             <!-- Coupon Selection (Moved to Left) -->\n            <div class=\"coupon-section\" @click=\"showCouponModal = true\">\n              <div class=\"coupon-label\">‰ºòÊÉ†Âà∏</div>\n              <div class=\"coupon-value\">\n                <span v-if=\"selectedCoupon\" class=\"coupon-selected\">-¬•{{ discountAmount.toFixed(2) }}</span>\n                <span v-else class=\"coupon-placeholder\">ÈÄâÊã©‰ºòÊÉ†Âà∏</span>\n                <el-icon><ArrowRight /></el-icon>\n              </div>\n            </div>\n          </div>\n\n          <!-- Right Column: Summary & Actions -->\n          <div class=\"refresh-right-col\">\n             <div class=\"summary-card\">\n                <div class=\"summary-title\">ËÆ¢ÂçïÊëòË¶Å</div>\n                \n                <div class=\"summary-row\">\n                   <span>ÂïÜÂìÅÈáëÈ¢ù</span>\n                   <span>¬•{{ originalAmount.toFixed(2) }}</span>\n                </div>\n                <div class=\"summary-row\" v-if=\"discountAmount > 0\">\n                   <span>‰ºòÊÉ†ÊäµÊâ£</span>\n                   <span class=\"text-danger\">-¬•{{ discountAmount.toFixed(2) }}</span>\n                </div>\n                \n                <div class=\"divider\"></div>\n                \n                <div class=\"total-row\">\n                   <div class=\"total-label\">Â∫î‰ªòÈáëÈ¢ù</div>\n                   <div class=\"total-price\">\n                      <span class=\"unit\">¬•</span>{{ finalAmount.toFixed(2) }}\n                   </div>\n                </div>\n\n                <div class=\"new-expire-tip\" v-if=\"newEndTime\">\n                  Áª≠Ë¥πÂêéÂà∞Êúü: {{ formatDate(newEndTime) }}\n                </div>\n\n                <button\n                  class=\"pay-btn\"\n                  :disabled=\"!selectedSkuId || paying\"\n                  @click=\"handlePay\"\n                >\n                  <span v-if=\"paying\">ÊîØ‰ªò‰∏≠...</span>\n                  <span v-else>Á´ãÂç≥ÊîØ‰ªò</span>\n                </button>\n             </div>\n          </div>\n        \n        </div>\n      </div>\n    </div>\n\n    <!-- Coupon Selector Nested Modal -->\n    <CouponSelectorModal\n      v-model=\"showCouponModal\"\n      :orderAmount=\"originalAmount\"\n      :skuIds=\"selectedSkuId ? [selectedSkuId] : []\"\n      :productIds=\"productInfo.id ? [productInfo.id] : []\"\n      :currentCouponId=\"selectedCoupon?.id\"\n      @select=\"handleCouponSelect\"\n    />\n  </BaseModal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { ArrowRight } from '@element-plus/icons-vue'\nimport BaseModal from '@/components/base/BaseModal.vue'\nimport CouponSelectorModal from '@/components/modal/business/CouponSelectorModal.vue'\nimport { clientOrderApi } from '@/api/client'\nimport { type UserCoupon } from '@/api/coupon'\nimport { useUserStore } from '@/stores/user'\n\ninterface RenewalSku {\n  sku_id: string\n  spec_combination: Record<string, string>\n  price: number\n  duration: number\n  product_type: string\n  image?: string\n}\n\ninterface SpecValue {\n  value: string\n  price?: number\n  skuId: string\n}\n\ninterface SpecGroup {\n  name: string\n  values: SpecValue[]\n}\n\nconst props = defineProps<{\n  modelValue: boolean\n  orderId: string\n}>()\n\nconst emit = defineEmits(['update:modelValue', 'success'])\n\nconst router = useRouter()\nconst userStore = useUserStore()\n\nconst visible = computed({\n  get: () => props.modelValue,\n  set: (val) => emit('update:modelValue', val)\n})\n\n// State\nconst loading = ref(false)\nconst error = ref('')\nconst paying = ref(false)\nconst showCouponModal = ref(false)\n\nconst skuList = ref<RenewalSku[]>([])\nconst currentEndTime = ref('')\nconst selectedSkuId = ref('')\nconst selectedCoupon = ref<UserCoupon | null>(null)\nconst discountAmount = ref(0)\nconst selectedSpecs = reactive<Record<string, string>>({})\n\n// Product info\nconst productInfo = reactive({\n  id: '',\n  name: 'ÂïÜÂìÅ',\n  image: ''\n})\n\n// Build spec groups from SKU list\nconst specGroups = computed<SpecGroup[]>(() => {\n  if (skuList.value.length === 0) return []\n  \n  const groups: Record<string, Map<string, SpecValue>> = {}\n  \n  skuList.value.forEach(sku => {\n    const combination = sku.spec_combination || {}\n    Object.entries(combination).forEach(([name, value]) => {\n      if (!groups[name]) {\n        groups[name] = new Map()\n      }\n      // Store value with price info\n      if (!groups[name].has(value)) {\n        groups[name].set(value, {\n          value,\n          price: sku.price,\n          skuId: sku.sku_id\n        })\n      }\n    })\n  })\n  \n  return Object.entries(groups).map(([name, valuesMap]) => ({\n    name,\n    values: Array.from(valuesMap.values())\n  }))\n})\n\n// Computed\nconst selectedSku = computed(() => {\n  if (selectedSkuId.value) {\n    return skuList.value.find(s => s.sku_id === selectedSkuId.value)\n  }\n  // Try to find by spec combination\n  if (specGroups.value.length > 0) {\n    return skuList.value.find(sku => {\n      const combination = sku.spec_combination || {}\n      return Object.entries(selectedSpecs).every(([name, value]) => \n        combination[name] === value\n      )\n    })\n  }\n  return null\n})\n\nconst originalAmount = computed(() => \n  selectedSku.value?.price || 0\n)\n\nconst finalAmount = computed(() => \n  Math.max(0, originalAmount.value - discountAmount.value)\n)\n\nconst newEndTime = computed(() => {\n  if (!currentEndTime.value || !selectedSku.value) return ''\n  const endDate = new Date(currentEndTime.value)\n  endDate.setDate(endDate.getDate() + selectedSku.value.duration)\n  return endDate.toISOString()\n})\n\n// Watch for modal open\nwatch(() => props.modelValue, async (val) => {\n  if (val) {\n    await loadRenewalSkus()\n  } else {\n    // Reset state when closed\n    selectedSkuId.value = ''\n    selectedCoupon.value = null\n    discountAmount.value = 0\n    Object.keys(selectedSpecs).forEach(k => delete selectedSpecs[k])\n  }\n})\n\n// Watch for spec selection changes to update selectedSkuId\nwatch(selectedSpecs, () => {\n  if (specGroups.value.length > 0) {\n    const matched = skuList.value.find(sku => {\n      const combination = sku.spec_combination || {}\n      return Object.entries(selectedSpecs).every(([name, value]) => \n        combination[name] === value\n      )\n    })\n    if (matched) {\n      selectedSkuId.value = matched.sku_id\n    }\n  }\n}, { deep: true })\n\n// Methods\nconst loadRenewalSkus = async () => {\n  loading.value = true\n  error.value = ''\n  \n  try {\n    const res = await clientOrderApi.getRenewalSkus(props.orderId)\n    \n    if (!res.success) {\n      error.value = res.error || 'Ëé∑ÂèñÁª≠Ë¥π‰ø°ÊÅØÂ§±Ë¥•'\n      return\n    }\n    \n    skuList.value = res.skus || []\n    currentEndTime.value = res.endTime || ''\n    \n    // Set product info\n    if (res.product) {\n      productInfo.id = res.product.id\n      productInfo.name = res.product.name\n      productInfo.image = res.product.image\n    }\n    \n    // Auto-select first option\n    if (specGroups.value.length > 0) {\n      // Select first value of each spec group\n      specGroups.value.forEach(group => {\n        if (group.values.length > 0) {\n          selectedSpecs[group.name] = group.values[0].value\n        }\n      })\n    } else if (skuList.value.length > 0) {\n      // Simple mode: select first SKU\n      selectedSkuId.value = skuList.value[0].sku_id\n    }\n  } catch (e: any) {\n    error.value = e.message || 'Á≥ªÁªüÂºÇÂ∏∏'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleSpecSelect = (groupName: string, value: string) => {\n  selectedSpecs[groupName] = value\n  // Reset coupon when specs change\n  selectedCoupon.value = null\n  discountAmount.value = 0\n}\n\nconst handleSimpleSkuSelect = (sku: RenewalSku) => {\n  selectedSkuId.value = sku.sku_id\n  // Reset coupon when SKU changes\n  selectedCoupon.value = null\n  discountAmount.value = 0\n}\n\nconst handleCouponSelect = async (coupon: UserCoupon | null) => {\n  selectedCoupon.value = coupon\n  \n  if (!coupon) {\n    discountAmount.value = 0\n    return\n  }\n  \n  // Calculate discount locally (simplified)\n  if (coupon.coupon.type === 'flat') {\n    discountAmount.value = Math.min(coupon.coupon.value, originalAmount.value)\n  } else if (coupon.coupon.type === 'product') {\n    discountAmount.value = originalAmount.value\n  } else {\n    discountAmount.value = 0\n  }\n}\n\nconst handlePay = async () => {\n  if (!selectedSkuId.value || paying.value) return\n  \n  // Check balance first\n  const balance = userStore.user?.balance ?? 0\n  if (balance < finalAmount.value) {\n    ElMessage.error(`‰ΩôÈ¢ù‰∏çË∂≥ÔºåÈúÄ ¬•${finalAmount.value.toFixed(2)}ÔºåÂΩìÂâç ¬•${balance.toFixed(2)}`)\n    return\n  }\n  \n  paying.value = true\n  \n  try {\n    // Step 1: Create renewal pre-order\n    const createRes = await clientOrderApi.createRenewalPreOrder(\n      selectedSkuId.value,\n      props.orderId\n    )\n    \n    if (!createRes.success) {\n      ElMessage.error(createRes.error || 'ÂàõÂª∫Áª≠Ë¥πËÆ¢ÂçïÂ§±Ë¥•')\n      return\n    }\n    \n    const preOrderId = createRes.preOrderId!\n    \n    // Step 2: Apply coupon if selected\n    if (selectedCoupon.value) {\n      const couponRes = await clientOrderApi.applyCoupon(\n        preOrderId,\n        selectedCoupon.value.id\n      )\n      \n      if (!couponRes.success) {\n        ElMessage.warning('‰ºòÊÉ†Âà∏Â∫îÁî®Â§±Ë¥•ÔºåÂ∞ÜÊåâÂéü‰ª∑ÊîØ‰ªò')\n        discountAmount.value = 0\n      }\n    }\n    \n    // Step 3: Confirm and pay\n    const confirmRes = await clientOrderApi.confirmPreOrder(\n      preOrderId,\n      'balance',\n      selectedCoupon.value?.id\n    )\n    \n    if (!confirmRes.success) {\n      ElMessage.error(confirmRes.error || 'ÊîØ‰ªòÂ§±Ë¥•')\n      return\n    }\n    \n    // Success!\n    ElMessage.success('Áª≠Ë¥πÊàêÂäüÔºÅ')\n    await userStore.fetchUserInfo() // Refresh balance\n    \n    visible.value = false\n    emit('success', confirmRes.orderId)\n    \n    // Redirect to new order\n    router.push(`/profile/order/${confirmRes.orderId}`)\n    \n  } catch (e: any) {\n    ElMessage.error(e.message || 'Á≥ªÁªüÂºÇÂ∏∏')\n  } finally {\n    paying.value = false\n  }\n}\n\nconst formatDate = (dateStr: string) => {\n  if (!dateStr) return '-'\n  const date = new Date(dateStr)\n  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\n}\n</script>\n\n<style scoped>\n/* CSS for Two-Column Layout */\n.renewal-content { padding: 0; }\n.renewal-split-layout {\n  display: flex;\n  height: 420px; /* Fixed height for consistent modal */\n}\n\n/* Left Column */\n.refresh-left-col {\n  flex: 1.4;\n  padding: 24px;\n  overflow-y: auto;\n  border-right: 1px solid rgba(255,255,255,0.05);\n}\n\n.product-header-compact {\n  display: flex; gap: 12px; align-items: center;\n  margin-bottom: 24px;\n}\n.mini-thumb { width: 48px; height: 48px; border-radius: 8px; overflow: hidden; background: #0F172A; margin: 0; display: block; }\n.ph-info { display: flex; flex-direction: column; gap: 4px; }\n.ph-name { font-size: 15px; font-weight: 600; color: #fff; }\n.ph-expire { font-size: 12px; color: #64748B; }\n\n.specs-wrapper { min-height: 120px; }\n.spec-group { margin-bottom: 20px; }\n.spec-label { font-size: 13px; color: #94A3B8; margin-bottom: 10px; font-weight: 500; }\n.spec-values { display: flex; flex-wrap: wrap; gap: 8px; }\n\n.spec-val-btn {\n  padding: 8px 16px; \n  border-radius: 8px;\n  background: rgba(255,255,255,0.03); \n  border: 1px solid rgba(255,255,255,0.08); \n  color: #CBD5E1; font-size: 13px; \n  cursor: pointer; transition: all 0.2s;\n  min-width: 60px; text-align: center;\n}\n.spec-val-btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); }\n.spec-val-btn.active {\n  background: rgba(59, 130, 246, 0.15); \n  border-color: #3B82F6; \n  color: #fff; \n  font-weight: 600; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);\n}\n\n/* Coupon (Compact) */\n.coupon-section {\n  display: flex; justify-content: space-between; align-items: center;\n  margin-top: 24px; padding: 12px 16px;\n  background: rgba(255,255,255,0.02); border-radius: 10px;\n  border: 1px solid rgba(255,255,255,0.05); cursor: pointer;\n}\n.coupon-section:hover { background: rgba(255,255,255,0.04); }\n.coupon-label { font-size: 13px; color: #94A3B8; }\n.coupon-value { font-size: 13px; color: #64748B; display: flex; align-items: center; gap: 4px; }\n.coupon-selected { color: #F87171; font-weight: 600; }\n\n/* Right Column */\n.refresh-right-col {\n  flex: 0.85;\n  padding: 24px;\n  background: rgba(0,0,0,0.1); /* Slightly darker/distinct */\n  display: flex; flex-direction: column;\n}\n\n.summary-card {\n  height: 100%;\n  display: flex; flex-direction: column;\n}\n\n.summary-title { font-size: 14px; font-weight: 600; color: #fff; margin-bottom: 20px; }\n\n.summary-row {\n  display: flex; justify-content: space-between;\n  font-size: 13px; color: #94A3B8; margin-bottom: 10px;\n}\n.text-danger { color: #EF4444; }\n\n.divider { height: 1px; background: rgba(255,255,255,0.08); margin: 16px 0; }\n\n.total-row { margin-bottom: auto; }\n.total-label { font-size: 13px; color: #CBD5E1; margin-bottom: 4px; }\n.total-price { font-size: 32px; font-weight: 700; color: #fff; font-family: 'Outfit', sans-serif; letter-spacing: -1px; }\n.total-price .unit { font-size: 18px; margin-right: 2px; color: #64748B; }\n\n.new-expire-tip {\n  font-size: 12px; color: #64748B; margin-bottom: 16px; text-align: center;\n  background: rgba(255,255,255,0.03); padding: 6px; border-radius: 4px;\n}\n\n.pay-btn {\n  width: 100%;\n  padding: 14px;\n  background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);\n  border: none; border-radius: 12px;\n  color: #fff; font-weight: 600; font-size: 15px;\n  cursor: pointer; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n  transition: all 0.2s;\n}\n.pay-btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4); }\n.pay-btn:disabled { opacity: 0.5; cursor: not-allowed; background: #334155; box-shadow: none; }\n</style>\n","<template>\n  <BaseFormModal\n    v-model:visible=\"visible\"\n    title=\"Áî≥ËØ∑ÈÄÄÊ¨æ\"\n    subtitle=\"ÈÄÄÊ¨æÁî≥ËØ∑Â∞ÜÂú® 1-3 ‰∏™Â∑•‰ΩúÊó•ÂÜÖÂ§ÑÁêÜ\"\n    submit-text=\"Êèê‰∫§Áî≥ËØ∑\"\n    :loading=\"submitting\"\n    :submit-disabled=\"!isValid\"\n    show-mascot\n    @close=\"handleClose\"\n    @cancel=\"handleClose\"\n    @submit=\"handleSubmit\"\n  >\n    <div class=\"refund-form\">\n      <!-- Order Info -->\n      <div class=\"info-box\">\n        <div class=\"label\">ËÆ¢ÂçïÂè∑</div>\n        <div class=\"value\">{{ orderNo }}</div>\n      </div>\n\n      <!-- Warning -->\n      <div class=\"warning-box\">\n        <el-icon><Warning /></el-icon>\n        <span>Áî≥ËØ∑ÈÄÄÊ¨æÂêéÔºåÂïÜÂìÅÂ∞ÜÁ´ãÂç≥ÂÜªÁªìÊó†Ê≥ï‰ΩøÁî®„ÄÇÂ¶ÇÊúâÁñëÈóÆÂª∫ËÆÆÂÖàËÅîÁ≥ªÂÆ¢Êúç„ÄÇ</span>\n      </div>\n\n      <!-- Reason Selection -->\n      <div class=\"form-group\">\n        <label>ÈÄÄÊ¨æÂéüÂõ† <span class=\"required\">*</span></label>\n        <div class=\"reason-options\">\n          <div \n            v-for=\"r in reasons\" \n            :key=\"r\"\n            class=\"reason-tag\"\n            :class=\"{ active: form.reason === r }\"\n            @click=\"form.reason = r\"\n          >\n            {{ r }}\n          </div>\n        </div>\n      </div>\n\n      <!-- Description -->\n      <div class=\"form-group\">\n        <label>Ë°•ÂÖÖËØ¥Êòé</label>\n        <textarea \n          v-model=\"form.detail\" \n          class=\"form-textarea\" \n          rows=\"3\" \n          placeholder=\"ËØ∑Â°´ÂÜôËØ¶ÁªÜËØ¥ÊòéÔºàÈÄâÂ°´Ôºâ...\"\n        ></textarea>\n      </div>\n\n    </div>\n  </BaseFormModal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed, watch } from 'vue'\nimport BaseFormModal from '@/components/modal/base/BaseFormModal.vue'\nimport { Warning } from '@element-plus/icons-vue'\nimport { clientOrderApi } from '@/api/client/order'\nimport { ElMessage } from 'element-plus'\n\nconst props = defineProps<{\n  modelValue: boolean\n  orderId: string\n  orderNo: string\n}>()\n\nconst emit = defineEmits(['update:modelValue', 'success'])\n\nconst visible = computed({\n  get: () => props.modelValue,\n  set: (val) => emit('update:modelValue', val)\n})\n\nconst submitting = ref(false)\nconst form = reactive({\n  reason: '',\n  detail: ''\n})\n\nconst reasons = [\n  '‰π∞Èîô‰∫Ü/‰∏çÈúÄË¶Å‰∫Ü',\n  'ÂïÜÂìÅÊó†Ê≥ï‰ΩøÁî®',\n  'ÂèëË¥ßÈÄüÂ∫¶Â§™ÊÖ¢',\n  'ÂïÜÂìÅÊèèËø∞‰∏çÁ¨¶',\n  'ÂÖ∂‰ªñÂéüÂõ†'\n]\n\nconst isValid = computed(() => !!form.reason)\n\nconst handleClose = () => {\n  visible.value = false\n}\n\nconst handleSubmit = async () => {\n  if (!isValid.value) return\n  \n  submitting.value = true\n  try {\n    const res = await clientOrderApi.createRefundRequest(\n      props.orderId,\n      form.reason,\n      form.detail\n    )\n    \n    if (res.success) {\n      ElMessage.success('ÈÄÄÊ¨æÁî≥ËØ∑Â∑≤Êèê‰∫§')\n      emit('success')\n      handleClose()\n    } else {\n      ElMessage.error(res.error || 'Êèê‰∫§Â§±Ë¥•')\n    }\n  } catch (e: any) {\n    ElMessage.error(e.message || 'Á≥ªÁªüÈîôËØØ')\n  } finally {\n    submitting.value = false\n  }\n}\n\n// Reset form on open\nwatch(() => props.modelValue, (val) => {\n  if (val) {\n    form.reason = ''\n    form.detail = ''\n  }\n})\n</script>\n\n<style scoped>\n.refund-form {\n  display: flex; flex-direction: column; gap: 20px;\n}\n\n.info-box {\n  background: rgba(255,255,255,0.03);\n  padding: 12px 16px; border-radius: 8px;\n  display: flex; justify-content: space-between;\n  font-size: 14px;\n}\n.info-box .label { color: #94A3B8; }\n.info-box .value { color: #E2E8F0; font-family: monospace; }\n\n.warning-box {\n  background: rgba(234, 179, 8, 0.1);\n  border: 1px solid rgba(234, 179, 8, 0.2);\n  border-radius: 8px;\n  padding: 12px;\n  display: flex; gap: 8px; align-items: start;\n  color: #FCD34D; font-size: 13px; line-height: 1.4;\n}\n\n.form-group label {\n  display: block; font-size: 14px; color: #E2E8F0; margin-bottom: 8px; font-weight: 500;\n}\n.required { color: #EF4444; }\n\n.reason-options {\n  display: flex; flex-wrap: wrap; gap: 10px;\n}\n.reason-tag {\n  padding: 10px 18px;\n  border-radius: 12px;\n  background: rgba(255,255,255,0.03);\n  border: 1px solid rgba(255,255,255,0.1);\n  color: #94A3B8; font-size: 13px; cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n}\n.reason-tag:hover {\n  background: rgba(255,255,255,0.08);\n  border-color: rgba(255,255,255,0.2);\n  color: #F1F5F9;\n  transform: translateY(-1px);\n}\n.reason-tag.active {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.1));\n  border-color: rgba(59, 130, 246, 0.5);\n  color: #60A5FA;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);\n  font-weight: 600;\n}\n\n.form-textarea {\n  width: 100%;\n  background: rgba(0,0,0,0.2);\n  border: 1px solid rgba(255,255,255,0.1);\n  border-radius: 8px;\n  padding: 12px;\n  color: #F1F5F9;\n  font-size: 14px;\n  resize: vertical;\n  transition: border-color 0.2s;\n}\n.form-textarea:focus {\n  outline: none;\n  border-color: #3B82F6;\n}\n</style>\n","<template>\r\n  <BaseFormModal\r\n    :visible=\"true\"\r\n    title=\"Áî≥ËØ∑Â∑•Âçï\"\r\n    subtitle=\"Êàë‰ª¨Â∞ÜÂ∞ΩÂø´Â§ÑÁêÜÊÇ®ÁöÑÈóÆÈ¢òÔºåÊÇ®ÂèØ‰ª•Âú®Â∑•ÂçïÂàóË°®Êü•ÁúãËøõÂ∫¶\"\r\n    submit-text=\"Êèê‰∫§Â∑•Âçï\"\r\n    :loading=\"submitting\"\r\n    :submit-disabled=\"!isValid\"\r\n    show-mascot\r\n    mascot-position=\"right\"\r\n    @close=\"$emit('close')\"\r\n    @cancel=\"$emit('close')\"\r\n    @submit=\"submit\"\r\n  >\r\n      <div class=\"modal-body\">\r\n         <!-- Rich Order Info Card -->\r\n         <div class=\"order-card-glass\" v-if=\"orderDetail\">\r\n            <div class=\"card-image\">\r\n               <img :src=\"orderDetail.product_snapshot?.image\" alt=\"Product\" />\r\n            </div>\r\n            <div class=\"card-info\">\r\n               <div class=\"info-top\">\r\n                  <span class=\"order-no\">ËÆ¢ÂçïÂè∑ #{{ orderDetail.order_no }}</span>\r\n                  <span class=\"status-badge\">{{ formatStatus(orderDetail.status) }}</span>\r\n               </div>\r\n               <div class=\"product-name\">{{ orderDetail.product_snapshot?.product_name }}</div>\r\n               <div class=\"specs\" v-if=\"orderDetail.sku_snapshot\">\r\n                  <span v-for=\"(val, key) in orderDetail.sku_snapshot.spec_combination\" :key=\"key\">{{ val }}</span>\r\n               </div>\r\n               <div class=\"price-row\">\r\n                  <span class=\"price\">¬•{{ orderDetail.total_amount?.toFixed(2) }}</span>\r\n                  <span class=\"quantity\">x{{ orderDetail.quantity }}</span>\r\n               </div>\r\n            </div>\r\n         </div>\r\n         <!-- Loading State for Order Info -->\r\n         <div class=\"order-card-loading\" v-else-if=\"loadingOrder\">\r\n            <span class=\"loading-spinner\"></span> Âä†ËΩΩËÆ¢Âçï‰ø°ÊÅØ...\r\n         </div>\r\n\r\n         <!-- Type/Title -->\r\n         <div class=\"form-group\">\r\n            <label>ÈóÆÈ¢òÊ†áÈ¢ò <span class=\"required\">*</span></label>\r\n            <input v-model=\"form.title\" class=\"form-input\" placeholder=\"ËØ∑ÁÆÄË¶ÅÊèèËø∞ÊÇ®ÈÅáÂà∞ÁöÑÈóÆÈ¢ò\" />\r\n         </div>\r\n\r\n         <!-- Priority -->\r\n         <div class=\"form-group\">\r\n            <label>‰ºòÂÖàÁ∫ß</label>\r\n            <div class=\"priority-options\">\r\n               <div \r\n                 v-for=\"p in priorities\" :key=\"p.value\" \r\n                 class=\"p-opt\" \r\n                 :class=\"{ active: form.priority === p.value, [p.value]: true }\"\r\n                 @click=\"form.priority = p.value\"\r\n               >\r\n                 {{ p.label }}\r\n               </div>\r\n            </div>\r\n         </div>\r\n\r\n         <!-- Description -->\r\n         <div class=\"form-group\">\r\n            <label>ËØ¶ÁªÜÊèèËø∞ <span class=\"required\">*</span></label>\r\n            <textarea v-model=\"form.content\" class=\"form-textarea\" rows=\"5\" placeholder=\"ËØ∑ËØ¶ÁªÜÊèèËø∞ÈóÆÈ¢òÁªÜËäÇ...\"></textarea>\r\n         </div>\r\n\r\n         <!-- Image Upload -->\r\n         <div class=\"form-group\">\r\n            <label>Êà™ÂõæÂá≠ËØÅ (ÂèØÈÄâ)</label>\r\n            <div class=\"upload-area\">\r\n               <!-- Image List -->\r\n               <div class=\"img-preview\" v-for=\"(url, idx) in form.attachments\" :key=\"idx\">\r\n                  <img :src=\"url\" />\r\n                  <div class=\"remove-btn\" @click=\"removeImage(idx)\">√ó</div>\r\n               </div>\r\n\r\n               <!-- Upload Button -->\r\n               <div class=\"upload-btn\" v-if=\"form.attachments.length < 3\" @click=\"triggerUpload\">\r\n                  <span v-if=\"uploading\">...</span>\r\n                  <span v-else>+</span>\r\n               </div>\r\n               <input type=\"file\" ref=\"fileInput\" hidden accept=\"image/*\" @change=\"handleFileChange\" />\r\n            </div>\r\n            <div class=\"tip\">ÊúÄÂ§ö‰∏ä‰º† 3 Âº†ÂõæÁâá</div>\r\n         </div>\r\n      </div>\r\n  </BaseFormModal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, reactive, onMounted } from 'vue'\r\nimport { ticketApi } from '@/api/client/ticket'\r\nimport { clientOrderApi, type ClientOrder } from '@/api/client/order'\r\nimport { getSupabaseClient } from '@/utils/supabase'\r\nimport BaseFormModal from '@/components/modal/base/BaseFormModal.vue'\r\n\r\nconst props = defineProps({\r\n  orderId: { type: String, required: true }\r\n})\r\n\r\nconst emit = defineEmits(['close', 'success'])\r\n\r\nconst form = reactive({\r\n  title: '',\r\n  priority: 'medium',\r\n  content: '',\r\n  attachments: [] as string[]\r\n})\r\n\r\nconst priorities = [\r\n  { label: '‰∏ÄËà¨', value: 'low' },\r\n  { label: 'ÈáçË¶Å', value: 'medium' },\r\n  { label: 'Á¥ßÊÄ•', value: 'high' }\r\n]\r\n\r\nconst submitting = ref(false)\r\nconst uploading = ref(false)\r\nconst loadingOrder = ref(false)\r\nconst orderDetail = ref<ClientOrder | null>(null)\r\nconst fileInput = ref<HTMLInputElement | null>(null)\r\n\r\nconst isValid = computed(() => {\r\n  return form.title.trim() && form.content.trim()\r\n})\r\n\r\nconst formatStatus = (status: string) => {\r\n  const map: Record<string, string> = {\r\n    'active': '‰ΩøÁî®‰∏≠',\r\n    'completed': 'Â∑≤ÂÆåÊàê',\r\n    'pending': 'Â§ÑÁêÜ‰∏≠',\r\n    'expired': 'Â∑≤ËøáÊúü',\r\n    'refunding': 'ÈÄÄÊ¨æ‰∏≠',\r\n    'refunded': 'Â∑≤ÈÄÄÊ¨æ'\r\n  }\r\n  return map[status] || status\r\n}\r\n\r\nonMounted(async () => {\r\n   if (props.orderId) {\r\n      loadingOrder.value = true\r\n      try {\r\n         const res = await clientOrderApi.getOrderDetail(props.orderId)\r\n         if (res.success && res.data) {\r\n            orderDetail.value = res.data\r\n         }\r\n      } catch (e) {\r\n         console.error('Fetch order failed', e)\r\n      } finally {\r\n         loadingOrder.value = false\r\n      }\r\n   }\r\n})\r\n\r\nconst triggerUpload = () => {\r\n   fileInput.value?.click()\r\n}\r\n\r\nconst handleFileChange = async (e: Event) => {\r\n  const files = (e.target as HTMLInputElement).files\r\n  if (!files || files.length === 0) return\r\n\r\n  const file = files[0]\r\n  if (file.size > 5 * 1024 * 1024) {\r\n    alert('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 5MB')\r\n    return\r\n  }\r\n\r\n  try {\r\n    uploading.value = true\r\n    const client = getSupabaseClient()\r\n    const fileName = `${Date.now()}-${Math.random().toString(36).substring(7)}.${file.name.split('.').pop()}`\r\n    const { data, error } = await client.storage\r\n       .from('tickets')\r\n       .upload(`${props.orderId}/${fileName}`, file)\r\n\r\n    if (error) throw error\r\n    \r\n    // Get Public URL\r\n    const { data: { publicUrl } } = client.storage.from('tickets').getPublicUrl(data.path)\r\n    form.attachments.push(publicUrl)\r\n\r\n  } catch (err: any) {\r\n    console.error(err)\r\n    alert('‰∏ä‰º†Â§±Ë¥•: ' + err.message)\r\n  } finally {\r\n    uploading.value = false\r\n    // Reset input\r\n    if (fileInput.value) fileInput.value.value = ''\r\n  }\r\n}\r\n\r\nconst removeImage = (idx: number) => {\r\n  form.attachments.splice(idx, 1)\r\n}\r\n\r\nconst submit = async () => {\r\n  if (!isValid.value) return\r\n  submitting.value = true\r\n  try {\r\n     const res = await ticketApi.create(\r\n        props.orderId,\r\n        form.title,\r\n        form.content,\r\n        form.priority,\r\n        form.attachments\r\n     )\r\n     if (res.success) {\r\n        emit('success')\r\n        emit('close')\r\n     } else {\r\n        alert(res.error || 'Êèê‰∫§Â§±Ë¥•')\r\n     }\r\n  } catch (e) {\r\n     alert('Á≥ªÁªüÈîôËØØ')\r\n  } finally {\r\n     submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.modal-body { display: flex; flex-direction: column; gap: 20px; }\r\n\r\n/* Rich Order Glass Card */\r\n.order-card-glass {\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.08); /* Glass Border */\r\n  border-radius: 12px;\r\n  padding: 12px;\r\n  display: flex; gap: 14px;\r\n  transition: all 0.3s;\r\n}\r\n.order-card-glass:hover {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-color: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(0,0,0,0.2);\r\n}\r\n\r\n.card-image {\r\n  width: 72px; height: 72px; border-radius: 8px; overflow: hidden; flex-shrink: 0;\r\n  border: 1px solid rgba(255,255,255,0.05);\r\n  background: #0F172A;\r\n}\r\n.card-image img { width: 100%; height: 100%; object-fit: cover; }\r\n\r\n.card-info {\r\n  flex: 1; display: flex; flex-direction: column; justify-content: space-between; py: 2px;\r\n}\r\n\r\n.info-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }\r\n.order-no { font-size: 12px; color: #64748B; font-family: monospace; }\r\n.status-badge { \r\n  font-size: 10px; padding: 2px 6px; border-radius: 4px; \r\n  background: rgba(59, 130, 246, 0.1); color: #3B82F6; border: 1px solid rgba(59, 130, 246, 0.2);\r\n}\r\n\r\n.product-name { font-size: 14px; font-weight: 600; color: #F1F5F9; line-height: 1.3; }\r\n\r\n.specs { font-size: 12px; color: #94A3B8; display: flex; gap: 8px; margin-top: 2px; }\r\n.price-row { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 4px; }\r\n.price { font-size: 15px; font-weight: 700; color: #F97316; font-family: 'Outfit', sans-serif; }\r\n.quantity { font-size: 12px; color: #64748B; }\r\n\r\n.order-card-loading {\r\n  height: 90px; display: flex; align-items: center; justify-content: center; \r\n  background: rgba(255,255,255,0.02); border-radius: 12px; color: #64748B; font-size: 13px; gap: 8px;\r\n}\r\n.loading-spinner {\r\n  width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.2); border-top-color: #3B82F6;\r\n  border-radius: 50%; animation: spin 1s linear infinite;\r\n}\r\n\r\n.form-group label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; color: #F1F5F9; }\r\n.required { color: #EF4444; }\r\n\r\n.form-input, .form-textarea {\r\n  width: 100%; \r\n  background: rgba(0,0,0,0.3);\r\n  border: 1px solid rgba(255,255,255,0.1); \r\n  border-radius: 8px; padding: 12px;\r\n  font-size: 14px; outline: none; transition: all 0.2s;\r\n  color: #F1F5F9;\r\n}\r\n.form-input:focus, .form-textarea:focus { \r\n  border-color: #3B82F6; \r\n  box-shadow: 0 0 10px rgba(59, 130, 246, 0.2);\r\n  background: rgba(0,0,0,0.4);\r\n}\r\n.form-input::placeholder, .form-textarea::placeholder {\r\n  color: #64748B;\r\n}\r\n\r\n.priority-options { display: flex; gap: 10px; }\r\n.p-opt {\r\n  padding: 10px 24px; border-radius: 12px; \r\n  border: 1px solid rgba(255,255,255,0.1); \r\n  background: rgba(255,255,255,0.03);\r\n  cursor: pointer; font-size: 13px; color: #94A3B8; font-weight: 500;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  position: relative; overflow: hidden;\r\n}\r\n.p-opt:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); }\r\n\r\n.p-opt.active { \r\n  font-weight: 600; \r\n  color: #fff; \r\n  transform: translateY(-1px); \r\n  border-color: transparent;\r\n}\r\n\r\n/* Glass Gradients for Active States */\r\n.p-opt.low.active { \r\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 95, 70, 0.4));\r\n  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2), inset 0 0 0 1px rgba(16, 185, 129, 0.4);\r\n}\r\n.p-opt.medium.active { \r\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(180, 83, 9, 0.4));\r\n  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2), inset 0 0 0 1px rgba(245, 158, 11, 0.4);\r\n}\r\n.p-opt.high.active { \r\n  background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(153, 27, 27, 0.4)); \r\n  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2), inset 0 0 0 1px rgba(239, 68, 68, 0.4);\r\n}\r\n\r\n.upload-area { display: flex; gap: 10px; flex-wrap: wrap; }\r\n.upload-btn {\r\n  width: 80px; height: 80px; \r\n  border: 1px dashed rgba(255,255,255,0.2); \r\n  border-radius: 8px;\r\n  display: flex; align-items: center; justify-content: center; \r\n  cursor: pointer; color: #94A3B8;\r\n  transition: all 0.2s;\r\n}\r\n.upload-btn:hover { border-color: #3B82F6; color: #3B82F6; background: rgba(59, 130, 246, 0.05); }\r\n\r\n.img-preview {\r\n  width: 80px; height: 80px; border-radius: 8px; overflow: hidden; position: relative;\r\n  border: 1px solid rgba(255,255,255,0.1);\r\n}\r\n.img-preview img { width: 100%; height: 100%; object-fit: cover; }\r\n.remove-btn {\r\n  position: absolute; top: 0; right: 0; background: rgba(0,0,0,0.6); color: #fff;\r\n  width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;\r\n  cursor: pointer; font-size: 14px;\r\n}\r\n.remove-btn:hover { background: #EF4444; }\r\n.tip { font-size: 12px; color: #64748B; margin-top: 6px; }\r\n\r\n@keyframes spin { to { transform: rotate(360deg); } }\r\n</style> ","<template>\r\n  <BaseModal\r\n    :visible=\"true\"\r\n    title=\"ËÅîÁ≥ªÂÆ¢Êúç\"\r\n    width=\"400px\"\r\n    :show-footer=\"false\"\r\n    show-mascot\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"contact-content\">\r\n      <div class=\"icon-wrapper\">\r\n        <span class=\"service-icon\">üéß</span>\r\n      </div>\r\n      <p class=\"desc\">ÊÇ®ÂèØ‰ª•Áõ¥Êé•ËÅîÁ≥ªÊàë‰ª¨ÁöÑÂú®Á∫øÂÆ¢ÊúçÔºåÊàñÊã®Êâì‰∏ãÊñπÁöÑÊúçÂä°ÁÉ≠Á∫ø</p>\r\n      \r\n      <div class=\"contact-card\">\r\n        <div class=\"card-label\">ÊúçÂä°ÁÉ≠Á∫ø</div>\r\n        <div class=\"card-value\">400-123-4567</div>\r\n      </div>\r\n      \r\n      <div class=\"contact-card\">\r\n        <div class=\"card-label\">Âú®Á∫øÊó∂Èó¥</div>\r\n        <div class=\"card-value\">09:00 - 22:00 (ÊØèÊó•)</div>\r\n      </div>\r\n    </div>\r\n  </BaseModal>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport BaseModal from '@/components/base/BaseModal.vue'\r\ndefineEmits(['close'])\r\n</script>\r\n\r\n<style scoped>\r\n.contact-content {\r\n  padding: 10px 10px 30px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n\r\n.icon-wrapper {\r\n  width: 64px;\r\n  height: 64px;\r\n  background: rgba(59, 130, 246, 0.1);\r\n  border: 1px solid rgba(59, 130, 246, 0.2);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 0 20px rgba(59, 130, 246, 0.15);\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.service-icon {\r\n  font-size: 32px;\r\n}\r\n\r\n.desc {\r\n  font-size: 14px;\r\n  color: #94A3B8;\r\n  text-align: center;\r\n  line-height: 1.5;\r\n  margin: 0;\r\n  max-width: 80%;\r\n}\r\n\r\n.contact-card {\r\n  width: 100%;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.08);\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.contact-card:hover {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-color: rgba(255, 255, 255, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.card-label {\r\n  font-size: 13px;\r\n  color: #64748B;\r\n}\r\n\r\n.card-value {\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n  color: #E2E8F0;\r\n  font-family: monospace;\r\n}\r\n</style>","<template>\n  <div class=\"glass-card product-card\">\n    <!-- Left: Product Image -->\n    <div class=\"product-thumb-wrapper\" @click=\"previewImage\">\n      <img v-if=\"productImage\" :src=\"productImage\" class=\"product-img\" />\n      <div v-else class=\"placeholder\">üì¶</div>\n    </div>\n\n    <!-- Right: Product Details -->\n    <div class=\"product-details\">\n      <!-- Header: Name -->\n      <div class=\"product-name\">{{ productName }}</div>\n\n      <!-- Tags Row -->\n      <div class=\"tags-row\" :class=\"statusTheme\">\n        <!-- Spec Badges (Loop) -->\n        <span v-for=\"(spec, index) in specValues\" :key=\"index\" class=\"tag themed-tag\">\n          {{ spec }}\n        </span>\n\n        <!-- Quantity Badge -->\n        <span class=\"tag qty-tag\">x{{ quantity }}</span>\n      </div>\n\n      <!-- Footer: Price/Amount (Optional, nice to have) -->\n       <div class=\"product-footer\">\n       </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\ninterface Props {\n  // Directly accepting snapshots as requested to avoid extra fetches\n  productSnapshot?: {\n    image?: string\n    product_name?: string\n  }\n  skuSnapshot?: {\n    spec_combination?: Record<string, string>\n  }\n  quantity?: number\n  orderStatus?: string // New prop\n}\n\nconst props = defineProps<Props>()\n\nconst productImage = computed(() => props.productSnapshot?.image || '')\nconst productName = computed(() => props.productSnapshot?.product_name || 'Êú™Áü•ÂïÜÂìÅ')\nconst quantity = computed(() => props.quantity || 1)\n\n// Parse spec combination to Array\nconst specValues = computed(() => {\n  if (!props.skuSnapshot?.spec_combination) return []\n  return Object.values(props.skuSnapshot.spec_combination)\n})\n\nconst statusTheme = computed(() => {\n    // Map status to visual theme class\n    const s = props.orderStatus\n    if (s === 'active' || s === 'completed') return 'theme-success'\n    if (s === 'pending_delivery' || s === 'submitted') return 'theme-processing'\n    if (s === 'refunding' || s === 'refunded' || s === 'rejected') return 'theme-error'\n    return 'theme-default'\n})\n\nconst previewImage = () => {\n    if (productImage.value) {\n        window.open(productImage.value, '_blank')\n    }\n}\n</script>\n\n<style scoped>\n.glass-card {\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  padding: 20px;\n  display: flex;\n  gap: 20px;\n  align-items: center;\n  transition: transform 0.2s, background 0.2s;\n}\n\n.glass-card:hover {\n  background: rgba(30, 41, 59, 0.5);\n  transform: translateY(-2px);\n}\n\n/* Image Wrapper */\n.product-thumb-wrapper {\n  width: 80px;\n  height: 80px;\n  flex-shrink: 0;\n  border-radius: 16px; /* Smooth corners */\n  overflow: hidden;\n  cursor: pointer;\n  position: relative;\n  \n  /* The requested border stroke */\n  border: 2px solid rgba(255, 255, 255, 0.1); \n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n}\n\n.product-thumb-wrapper:hover {\n    border-color: rgba(59, 130, 246, 0.5); /* Blue glow on hover */\n    box-shadow: 0 8px 16px rgba(59, 130, 246, 0.2);\n}\n\n.product-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.5s;\n}\n\n.product-thumb-wrapper:hover .product-img {\n    transform: scale(1.1);\n}\n\n.placeholder {\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.05);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n}\n\n/* Details */\n.product-details {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  justify-content: center;\n}\n\n.product-name {\n  font-family: 'Outfit', sans-serif; /* Use premium font if available */\n  font-size: 18px;\n  font-weight: 700;\n  color: #fff;\n  line-height: 1.3;\n}\n\n.tags-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.tag {\n  display: inline-flex;\n  align-items: center;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 12px;\n  font-weight: 500;\n  letter-spacing: 0.5px;\n}\n\n/* Default Theme */\n.themed-tag {\n  background: rgba(255, 255, 255, 0.1);\n  color: #E2E8F0;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n/* Success Theme (Active) */\n.theme-success .themed-tag {\n  background: rgba(34, 197, 94, 0.15);\n  color: #4ADE80;\n  border-color: rgba(34, 197, 94, 0.2);\n}\n\n/* Processing Theme (Pending) */\n.theme-processing .themed-tag {\n  background: rgba(250, 204, 21, 0.15);\n  color: #FACC15;\n  border-color: rgba(250, 204, 21, 0.2);\n}\n\n/* Error Theme (Refunding) */\n.theme-error .themed-tag {\n  background: rgba(248, 113, 113, 0.15);\n  color: #F87171;\n  border-color: rgba(248, 113, 113, 0.2);\n}\n\n.qty-tag {\n  background: rgba(0, 0, 0, 0.2);\n  color: #94A3B8;\n  font-family: monospace;\n}\n</style>\n","<template>\n  <div class=\"order-detail-page\">\n    \n    <!-- 1. Sticky Status Hero Card -->\n    <div class=\"hero-sticky-wrapper\">\n      <div class=\"status-hero-card\">\n        <div class=\"hero-aurora-bg\" :class=\"order.status\"></div>\n        \n        <div class=\"hero-content\">\n          <!-- Top Row: Back | Order No | Amount (Right) -->\n          <div class=\"hero-top-row\">\n            <div class=\"top-left-group\">\n              <div class=\"back-btn\" @click=\"router.back()\">\n                <el-icon><ArrowLeft /></el-icon>\n                <span class=\"back-text\">ËøîÂõû</span>\n              </div>\n              <div class=\"order-no-badge\">\n                <span class=\"label\">ËÆ¢ÂçïÂè∑</span>\n                <span class=\"value\">{{ order.order_no || '---' }}</span>\n                <el-icon class=\"copy-icon\" @click=\"copyText(order.order_no)\"><CopyDocument /></el-icon>\n              </div>\n            </div>\n\n            <!-- Amount Display (Top Right) -->\n            <div class=\"amount-display-top\">\n              <span class=\"amount-integer\">{{ getInteger(order.totalAmount || 0) }}</span>\n              <span class=\"amount-decimal\">.{{ getDecimal(order.totalAmount || 0) }}</span>\n              <span class=\"amount-unit\">ÁÇπ</span>\n            </div>\n          </div>\n\n          <!-- Middle/Bottom Row: Status Icon+Text | Action Buttons -->\n          <div class=\"hero-main-row\">\n            \n            <!-- Status Info (Left) -->\n            <div class=\"status-group\">\n              <div class=\"status-icon-box\" :class=\"order.status\">\n                <el-icon v-if=\"order.status === 'active' || order.status === 'completed'\"><CircleCheck /></el-icon>\n                <el-icon v-else-if=\"order.status === 'pending_delivery'\"><Box /></el-icon>\n                <el-icon v-else-if=\"order.status === 'refunding' || order.status === 'refunded'\"><RefreshLeft /></el-icon>\n                <el-icon v-else><InfoFilled /></el-icon>\n              </div>\n              \n              <div class=\"status-text-wrapper\">\n                <div class=\"status-title-row\">\n                  <h1 class=\"status-title\">{{ statusText }}</h1>\n                  <!-- Countdown Badge for Active -->\n                  <div v-if=\"order.status === 'active' && remainingDays !== null\" class=\"time-badge\" :class=\"getTimeLevel(remainingDays)\">\n                     <el-icon><Timer /></el-icon> Ââ©‰Ωô {{ remainingDays }} Â§©\n                  </div>\n                </div>\n                <!-- Subtitles -->\n                 <div class=\"status-desc\">\n                    <span v-if=\"order.status === 'refunding'\">ÈÄÄÊ¨æÁî≥ËØ∑ÂæÖÂÆ°Ê†∏Ôºö{{ pendingRefundReason || 'ËØ∑ËÄêÂøÉÁ≠âÂæÖ' }}</span>\n                    <span v-else-if=\"order.status === 'pending_delivery'\">Á≥ªÁªüÊ≠£Âú®ÊûÅÈÄüÈÖçË¥ß‰∏≠</span>\n                    <span v-else-if=\"order.status === 'active'\">ÂïÜÂìÅÁä∂ÊÄÅÊ≠£Â∏∏ÔºåÂà∞ÊúüÊó∂Èó¥: {{ formatTime(order.expires_at || '') }}</span>\n                    <span v-else>‰∏ãÂçïÊó∂Èó¥: {{ formatTime(order.createdAt || '') }}</span>\n                 </div>\n              </div>\n            </div>\n\n            <!-- Action Buttons (Right) - Plan A Logic -->\n            <div class=\"hero-actions\">\n               \n               <!-- 0. Contact Service (Always Visible) -->\n               <button class=\"hero-btn secondary\" @click=\"handleAction('contact')\">\n                 <el-icon><Headset /></el-icon> ËÅîÁ≥ªÂÆ¢Êúç\n               </button>\n\n               <!-- 1. Ticket Action -->\n               <button v-if=\"activeTicketId\" class=\"hero-btn secondary\" @click=\"handleAction('view_ticket')\">\n                 <el-icon><Tickets /></el-icon> Êü•ÁúãÂ∑•Âçï\n               </button>\n               <button v-else class=\"hero-btn secondary\" @click=\"handleAction('create_ticket')\">\n                 <el-icon><Tickets /></el-icon> Áî≥ËØ∑Â∑•Âçï\n               </button>\n\n               <!-- 2. Renew Action (Hidden for One-Time) -->\n               <button v-if=\"canRenew\" class=\"hero-btn primary\" @click=\"handleAction('renew')\">\n                 <el-icon><Refresh /></el-icon> Áª≠Ë¥π\n               </button>\n\n               <!-- 3. Refund Action (Hidden for One-Time) -->\n               <!-- Case A: Pending Refund -> Cancel Button -->\n               <button v-if=\"order.status === 'refunding' || pendingRefundRequest\" class=\"hero-btn warning\" @click=\"handleAction('cancel_refund')\">\n                 <el-icon><CircleClose /></el-icon> ÂèñÊ∂àÈÄÄÊ¨æ\n               </button>\n               <!-- Case B: Can Apply Refund -->\n               <button v-else-if=\"canRefund\" class=\"hero-btn danger\" @click=\"handleAction('apply_refund')\">\n                 <el-icon><Money /></el-icon> Áî≥ËØ∑ÈÄÄÊ¨æ\n               </button>\n\n            </div>\n          </div>\n        </div>\n        \n        <!-- Optional: Decorator or texture overlay -->\n        <div class=\"noise-overlay\"></div>\n      </div>\n    </div>\n\n    <!-- 2. Content Stream (Glass Tiles) -->\n    <div class=\"content-stream\">\n      \n      <!-- Product Info Card -->\n      <!-- Product Info Card -->\n      <ProductInfoCard \n        class=\"fade-in-up\" \n        :product-snapshot=\"order.product_snapshot\"\n        :sku-snapshot=\"order.sku_snapshot\"\n        :quantity=\"order.quantity\"\n        :order-status=\"order.status\"\n      />\n\n      <!-- Delivery / Fulfillment Section (The Core) -->\n      <!-- Only show for relevant statuses (including refunding to see what happened) -->\n      <!-- Delivery / Fulfillment Section (The Core) -->\n      <!-- Only show for relevant statuses (including refunding to see what happened) -->\n      <div v-if=\"['pending_delivery', 'active', 'completed', 'refunding'].includes(order.status || '')\" class=\"fulfillment-section fade-in-up\">\n        \n        <!-- Shared Account: STRICT LOOP by Slot List -->\n        <!-- Display Rule: Display Slot1 Content... Display Slot2 Content... -->\n        <template v-if=\"order.orderType === 'shared_account'\">\n           <div v-for=\"(slot, idx) in slotList\" :key=\"slot.id || idx\" class=\"virtual-item-group\">\n               \n               <!-- Separator if multiple -->\n               <div v-if=\"slotList.length > 1\" class=\"item-separator\">\n                  <span class=\"sep-label\">ËΩ¶‰Ωç {{ idx + 1 }}</span>\n               </div>\n\n               <!-- Pass Single Slot Context -->\n               <FulfillmentShared \n                  :cdk-item=\"getCdkForSlot(slot)\"\n                  :slot-index=\"slot.slot_index\"\n               />\n           </div>\n        </template>\n        \n        <!-- One-Time CDK: Standard List -->\n        <template v-else-if=\"order.orderType === 'one_time_cdk'\">\n            <FulfillmentCdk :cdk-list=\"cdkList\" />\n        </template>\n\n        <!-- Virtual: Single View (First CDK only) -->\n        <template v-else-if=\"order.orderType === 'virtual' && cdkList.length > 0\">\n           <div class=\"virtual-item-group\">\n             <FulfillmentSubmitForm\n                :order-id=\"order.id || ''\"\n                :order-status=\"order.status || ''\"\n                :cdk-fields=\"getFieldsForCdk(cdkList[0])\"\n                :cdk-id=\"cdkList[0].id\"\n                @submit-success=\"handleFulfillmentSuccess\"\n             />\n\n             <FulfillmentHistory\n                ref=\"historyRef\"\n                :order-id=\"order.id || ''\"\n                :filter-cdk-id=\"cdkList[0].id\"\n             />\n           </div>\n        </template>\n\n      </div>\n\n      <!-- Tutorial Section -->\n      <!-- Tutorial Section -->\n      <div v-if=\"instructionImage\" class=\"glass-tile tutorial-tile fade-in-up\">\n        <div class=\"tile-header\">\n          <div class=\"header-left\">\n             <el-icon class=\"header-icon\"><Guide /></el-icon>\n             <span class=\"tile-title\">‰ΩøÁî®ËØ¥Êòé</span>\n          </div>\n        </div>\n        <div class=\"tutorial-body\" @click=\"previewImage(instructionImage)\">\n          <div class=\"image-wrapper\">\n             <img :src=\"instructionImage\" loading=\"lazy\" />\n          </div>\n          <div class=\"zoom-overlay\">\n            <div class=\"zoom-pill\">\n               <el-icon><ZoomIn /></el-icon> ÁÇπÂáªÊü•ÁúãÂ§ßÂõæ\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <!-- Modals -->\n    <RenewalModal\n      v-if=\"order.id\"\n      v-model=\"showRenewalModal\"\n      :order-id=\"order.id\"\n      @success=\"onRenewalSuccess\"\n    />\n\n    <RefundModal\n      v-if=\"order.id\"\n      v-model=\"showRefundModal\"\n      :order-id=\"order.id\"\n      :order-no=\"order.order_no\"\n      @success=\"onRefundSuccess\"\n    />\n\n    <TicketApplyModal\n      v-if=\"showTicketModal && order.id\"\n      :order-id=\"order.id\"\n      :order-info=\"{ order_no: order.order_no || '', product_name: order.product_snapshot?.product_name || '' }\"\n      @close=\"showTicketModal = false\"\n      @success=\"onTicketSuccess\"\n    />\n\n    <ContactModal\n      v-if=\"showContactModal\"\n      @close=\"showContactModal = false\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { \n  ArrowLeft, CopyDocument, CircleCheck, Timer, CircleClose, InfoFilled, \n  ZoomIn, Box, Tickets, Refresh, Money, RefreshLeft, Headset, Guide\n} from '@element-plus/icons-vue'\nimport { clientOrderApi } from '@/api/client'\nimport { ticketApi } from '@/api/client/ticket'\nimport { useBizConfig } from '@/composables/common/useBizConfig'\nimport { useBizFormat } from '@/composables/common/useBizFormat'\nimport FulfillmentShared from '@/components/order/FulfillmentShared.vue'\nimport FulfillmentCdk from '@/components/order/FulfillmentCdk.vue'\nimport FulfillmentSubmitForm from '@/components/order/FulfillmentSubmitForm.vue'\nimport FulfillmentHistory from '@/components/order/FulfillmentHistory.vue'\nimport RenewalModal from '@/components/order/RenewalModal.vue'\nimport RefundModal from '@/components/order/RefundModal.vue'\nimport TicketApplyModal from '@/components/modal/business/TicketApplyModal.vue'\nimport ContactModal from '@/components/ContactModal.vue'\nimport ProductInfoCard from '@/components/order/ProductInfoCard.vue'\nimport type { FulfillmentField } from '@/types/order'\n\ndefinePageMeta({ ssr: false })\n\nconst route = useRoute()\nconst router = useRouter()\nconst orderId = route.params.id as string\nconst loading = ref(true)\n\nconst { getOrderStatusLabel } = useBizConfig()\nconst { formatDate } = useBizFormat()\n\n// --- Data Types ---\ninterface OrderDetail {\n  id: string\n  order_no: string\n  orderType: string\n  status: string\n  quantity: number\n  totalAmount: number\n  createdAt: string\n  expires_at?: string\n  productName: string\n  productImage: string\n  skuSpec: string\n  product_snapshot?: any\n  sku_snapshot?: any\n}\n\ninterface CdkItem {\n  id: string\n  code: string\n  parsed: any\n  accountData: any\n  slotIndex?: number\n}\n\nconst order = ref<Partial<OrderDetail>>({})\nconst cdkList = ref<CdkItem[]>([])\nconst slotList = ref<any[]>([])\nconst instructionImage = ref('')\n\n// Logic State\nconst activeTicketId = ref<string | null>(null)\nconst pendingRefundRequest = ref<any>(null)\n\n// Computed Status Text\nconst statusText = computed(() => {\n  const s = order.value.status\n  if (s === 'pending_delivery') return 'ÂæÖÂèëË¥ß'\n  if (s === 'active') return '‰ΩøÁî®‰∏≠'\n  if (s === 'refunding') return 'ÈÄÄÊ¨æ‰∏≠'\n  if (s === 'refunded') return 'Â∑≤ÈÄÄÊ¨æ'\n  return getOrderStatusLabel(s || '')\n})\n\nconst pendingRefundReason = computed(() => pendingRefundRequest.value?.reason)\n\nconst remainingDays = computed(() => {\n  // @ts-ignore\n  if (!order.value.expires_at) return null\n  // @ts-ignore\n  const diff = new Date(order.value.expires_at).getTime() - Date.now()\n  if (diff <= 0) return 0\n  return Math.ceil(diff / (1000 * 60 * 60 * 24))\n})\n\nconst getTimeLevel = (days: number) => {\n  if (days <= 3) return 'critical' // Red\n  if (days <= 7) return 'warning'  // Orange\n  return 'safe'                    // Green\n}\n\n// Logic Computed\n// Rule: One-time orders don't show Renew/Refund\nconst isOneTime = computed(() => order.value.orderType === 'one_time_cdk')\n\nconst canRenew = computed(() => {\n  if (isOneTime.value) return false\n  const s = order.value.status\n  return ['active', 'expired'].includes(s || '')\n})\n\nconst canRefund = computed(() => {\n  if (isOneTime.value) return false\n  const s = order.value.status\n  // Usually refund allowed for pending_delivery or active (within X days, ignoring X days for now as per user just status)\n  return ['pending_delivery', 'active'].includes(s || '')\n})\n\n\n// Amount Helpers\nconst getInteger = (val: number) => Math.floor(val).toLocaleString()\nconst getDecimal = (val: number) => (val % 1).toFixed(2).split('.')[1] || '00'\n\n// Helper to get fields for a specific CDK\nconst getFieldsForCdk = (cdk: CdkItem): FulfillmentField[] => {\n  let keys: string[] = []\n  \n  if (cdk.parsed && typeof cdk.parsed === 'object') {\n    if (Array.isArray(cdk.parsed.fields) && cdk.parsed.fields.length > 0) {\n      keys = cdk.parsed.fields.filter((f: any) => typeof f === 'string')\n    } else if (Object.keys(cdk.parsed).length > 0) {\n      keys = Object.keys(cdk.parsed)\n    }\n  }\n\n  if (keys.length === 0) {\n    const raw = cdk.code?.trim() || ''\n    if (!raw) return []\n    let cleaned = raw.replace(/[\\(\\)ÔºàÔºâ\\[\\]„Äê„Äë]/g, '')\n    keys = cleaned.split(/[,Ôºå„ÄÅ]/).map(s => s.trim()).filter(s => s.length > 0)\n  }\n\n  return keys.map(key => ({ key, label: key, value: '' }))\n}\n\n// Helper to find CDK for a Slot\nconst getCdkForSlot = (slot: any) => {\n    if (!slot || !slot.cdk_id) return {} as CdkItem\n    return cdkList.value.find(c => c.id === slot.cdk_id) || {} as CdkItem\n}\n\nconst historyRef = ref<{ refresh: () => void } | null>(null)\nconst handleFulfillmentSuccess = () => { historyRef.value?.refresh() }\n\n// Utility\nconst formatTime = (t?: string) => t ? formatDate(t) : '-'\nconst previewImage = (url: string) => window.open(url, '_blank')\nconst copyText = (text?: string) => {\n  if(!text) return\n  navigator.clipboard.writeText(text)\n  ElMessage.success('Â∑≤Â§çÂà∂')\n}\n\n// Action Handlers\n  const handleAction = async (type: string) => {\n  \n  if (type === 'contact') {\n    showContactModal.value = true\n  }\n\n  // 1. Ticket\n  else if (type === 'create_ticket') {\n    showTicketModal.value = true\n  } \n  else if (type === 'view_ticket') {\n    if (activeTicketId.value) {\n       // TODO: Go to ticket detail if accessible, or maybe just list\n       router.push('/profile/tickets')\n    }\n  }\n\n  // 2. Renew\n  else if (type === 'renew') {\n    showRenewalModal.value = true\n  } \n\n  // 3. Refund\n  else if (type === 'apply_refund') {\n    showRefundModal.value = true\n  } \n  else if (type === 'cancel_refund') {\n    try {\n      await ElMessageBox.confirm('Á°ÆÂÆöË¶ÅÊí§ÈîÄÈÄÄÊ¨æÁî≥ËØ∑Âπ∂ÊÅ¢Â§çËÆ¢ÂçïÂêóÔºü', 'Êí§ÈîÄÈÄÄÊ¨æ', {\n         confirmButtonText: 'Á°ÆÂÆöÊí§ÈîÄ',\n         cancelButtonText: 'ÊöÇ‰∏çÊí§ÈîÄ',\n         type: 'warning'\n      })\n      \n      const res = await clientOrderApi.cancelRefundRequest(orderId)\n      if (res.success) {\n        ElMessage.success(res.message || 'Â∑≤Êí§ÈîÄ')\n        loadData() // Refresh status\n      } else {\n        ElMessage.error(res.error || 'Êí§ÈîÄÂ§±Ë¥•')\n      }\n    } catch {\n      // Cancelled\n    }\n  }\n}\n\n// Modal Success Handlers\nconst onRenewalSuccess = (newOrderId: string) => {\n    // RenewalModal already handles redirect, but we can close it here just in case\n    showRenewalModal.value = false\n}\n\nconst onTicketSuccess = () => {\n    ElMessage.success('Â∑•ÂçïÂ∑≤Êèê‰∫§')\n    loadData() // Refresh to see \"View Ticket\" button\n}\n\nconst onRefundSuccess = () => {\n    loadData() // Refresh to see \"Cancel Refund\" button\n}\n\n// Fetch\nconst showRenewalModal = ref(false)\nconst showRefundModal = ref(false)\nconst showTicketModal = ref(false)\nconst showContactModal = ref(false)\nconst ticketRefreshKey = ref(0) // Used to force refresh ticket list if needed\n\nconst loadData = async () => {\n\n  if (!orderId) return\n  loading.value = true\n  try {\n    // 1. Get Order\n    const res = await clientOrderApi.getOrderDetail(orderId)\n    if (res.success && res.data) {\n      const d = res.data\n      const pSnap = d.product_snapshot || {} as any\n      const sSnap = d.sku_snapshot || {} as any\n\n      order.value = {\n        id: d.id,\n        order_no: d.order_no,\n        orderType: d.order_type,\n        status: d.status,\n        quantity: d.quantity,\n        totalAmount: d.total_amount,\n        createdAt: d.created_at,\n        expires_at: d.expires_at,\n        productName: pSnap.product_name || '',\n        productImage: pSnap.image || '',\n        skuSpec: sSnap.spec_combination ? Object.values(sSnap.spec_combination).join(' ') : 'ÈªòËÆ§',\n        product_snapshot: pSnap,\n        sku_snapshot: sSnap\n      }\n\n      // 2. Parse CDKs & Slots\n      if (d.cdkList && Array.isArray(d.cdkList)) {\n        // Raw CDK List (used for Virtual & One-time, and as Lookup for Shared)\n        cdkList.value = d.cdkList.map((cdk: any) => ({ ...cdk }))\n        \n        // Strict Rule: Image always from CDK[0]\n        if (cdkList.value.length > 0) {\n            const first = cdkList.value[0]\n            if (first.accountData) {\n               instructionImage.value = first.accountData.image || first.accountData.help_image || first.accountData.common_image || ''\n            }\n        }\n      }\n      \n      // Strict Rule: Shared uses slotList from slot_occupancy_ids\n      if (d.slotList && Array.isArray(d.slotList)) {\n          slotList.value = d.slotList\n      } else {\n          slotList.value = []\n      }\n\n      // 3. Check Refund Request (If status is 'refunding' OR checking just in case)\n      if (d.status === 'refunding' || d.status === 'active' || d.status === 'pending_delivery') {\n         const refundRes = await clientOrderApi.getRefundRequest(orderId)\n         if (refundRes.success && refundRes.data) {\n             pendingRefundRequest.value = refundRes.data\n         } else {\n             pendingRefundRequest.value = null\n         }\n      }\n\n      // 4. Check Active Tickets\n      // We look for any currently processing ticket for this order\n      // Assuming ticketApi.getList can filter by order is hard without modifying it,\n      // but let's check what getList does. It filters by 'status' global.\n      // Ideally we need `ticketApi.getList(status, orderId)`.\n      // For now, let's fetch 'processing' tickets and search client side (not efficient but works for low volume)\n      const ticketRes = await ticketApi.getList('processing')\n      if (ticketRes.success && ticketRes.data) {\n          const match = ticketRes.data.find((t:any) => t.order_id === orderId)\n          if (match) {\n              activeTicketId.value = match.id\n          } else {\n              activeTicketId.value = null\n          }\n      }\n\n    }\n  } catch (e) {\n    console.error(e)\n  } finally {\n    loading.value = false\n  }\n}\n\nonMounted(loadData)\n</script>\n\n<style scoped>\n\n.order-detail-page {\n  display: flex; flex-direction: column; \n  width: 100%; max-width: 100%;\n  padding: 0; /* No global padding to allow full-bleed header */\n  /* overflow-x: hidden;  <-- REMOVED to fix sticky behavior */\n  padding-bottom: 40px;\n}\n\n/* --- Sticky Wrapper --- */\n.hero-sticky-wrapper {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  width: 100%;\n  /* Remove negative margins that caused overflow */\n  margin: 0;\n  padding: 0;\n  \n  /* Background to mask content behind */\n  background: #0F172A; \n  border-bottom: 1px solid rgba(255,255,255,0.02);\n}\n\n/* --- 1. Status Hero Card (Full Width Header) --- */\n.status-hero-card {\n  position: relative;\n  width: 100%; \n  height: 180px; /* Restored/Fixed Height, user wanted ~140-180? Code says 140 before */\n  /* Let's keep 140px as requested previously, or adjusted */\n  height: 140px;\n  \n  /* Full bleed: No border radius at top to flush with container */\n  /* Optional: Round bottom for style */\n  border-radius: 0; \n  /* Or if user wants floating look but flush top: */\n  /* border-radius: 0 0 24px 24px; */ \n  \n  border: none;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);\n  flex-shrink: 0;\n  background: #0F172A;\n}\n\n.noise-overlay {\n  position: absolute; inset: 0; pointer-events: none; z-index: 2;\n  background-image: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E\");\n  mix-blend-mode: overlay;\n}\n\n.hero-content {\n  position: relative; z-index: 3; height: 100%;\n  display: flex; flex-direction: column; \n  padding: 20px 32px; /* Increased side padding for aesthetics */\n  justify-content: space-between;\n}\n\n.hero-top-row { display: flex; justify-content: space-between; align-items: flex-start; }\n.top-left-group { display: flex; align-items: center; gap: 16px; }\n\n.back-btn {\n  display: flex; align-items: center; gap: 6px;\n  color: #fff; cursor: pointer; font-size: 14px; font-weight: 500;\n  opacity: 0.8; transition: opacity 0.2s;\n}\n.back-btn:hover { opacity: 1; }\n\n.order-no-badge {\n  display: flex; align-items: center; gap: 8px;\n  background: rgba(0,0,0,0.3); padding: 4px 12px; border-radius: 6px;\n  border: 1px solid rgba(255,255,255,0.05); height: 28px;\n}\n.order-no-badge .label { font-size: 11px; color: #64748B; font-weight: 700; transform: translateY(1px); }\n.order-no-badge .value { font-family: 'Monaco', monospace; color: #CBD5E1; font-size: 12px; }\n.copy-icon { cursor: pointer; color: #64748B; transition: color 0.2s; }\n.copy-icon:hover { color: #fff; }\n\n.amount-display-top { \n  font-family: 'Outfit', sans-serif; display: flex; align-items: baseline; color: #fff; line-height: 1; \n  text-shadow: 0 2px 8px rgba(0,0,0,0.3);\n}\n.amount-integer { font-size: 28px; font-weight: 700; letter-spacing: -0.5px; }\n.amount-decimal { font-size: 16px; font-weight: 500; color: #CBD5E1; }\n.amount-unit { font-size: 12px; color: #F59E0B; font-weight: 600; margin-left: 4px; }\n\n.hero-main-row { display: flex; justify-content: space-between; align-items: flex-end; }\n.status-group { display: flex; align-items: center; gap: 16px; }\n\n.status-icon-box {\n  width: 44px; height: 44px; border-radius: 12px;\n  background: rgba(255,255,255,0.1);\n  display: flex; align-items: center; justify-content: center;\n  font-size: 22px; color: #fff;\n  border: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n}\n\n.status-text-wrapper { display: flex; flex-direction: column; gap: 2px; }\n.status-title-row { display: flex; align-items: center; gap: 10px; }\n.status-title { font-size: 20px; font-weight: 700; color: #fff; margin: 0; }\n.status-desc { font-size: 12px; color: #94A3B8; font-weight: 400; }\n\n.time-badge { \n  font-size: 11px; font-weight: 600; display: flex; align-items: center; gap: 4px; \n  padding: 2px 8px; border-radius: 4px; border: 1px solid;\n}\n.time-badge.critical { color: #FECACA; background: rgba(239, 68, 68, 0.2); border-color: rgba(239, 68, 68, 0.3); animation: pulse-red 2s infinite; }\n.time-badge.warning { color: #FDE68A; background: rgba(245, 158, 11, 0.2); border-color: rgba(245, 158, 11, 0.3); }\n.time-badge.safe { color: #A7F3D0; background: rgba(16, 185, 129, 0.2); border-color: rgba(16, 185, 129, 0.3); }\n\n/* Buttons */\n.hero-actions { display: flex; gap: 10px; align-items: center; }\n\n.hero-btn {\n  display: flex; align-items: center; gap: 6px;\n  padding: 8px 16px; border-radius: 10px;\n  font-size: 13px; font-weight: 600; cursor: pointer;\n  border: none; transition: all 0.2s;\n  box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n}\n.hero-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 15px rgba(0,0,0,0.3); }\n.hero-btn:active { transform: translateY(0); }\n.hero-btn.secondary { background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.1); }\n.hero-btn.secondary:hover { background: rgba(255,255,255,0.15); }\n.hero-btn.primary { background: #3B82F6; color: #fff; box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3); }\n.hero-btn.primary:hover { background: #2563EB; }\n.hero-btn.danger { background: rgba(239, 68, 68, 0.15); color: #FCA5A5; border: 1px solid rgba(239, 68, 68, 0.3); }\n.hero-btn.danger:hover { background: rgba(239, 68, 68, 0.25); color: #fff; border-color: rgba(239, 68, 68, 0.5); }\n\n/* Gradients */\n.hero-aurora-bg {\n  position: absolute; top: 0; left: 0; width: 100%; height: 100%;\n  z-index: 1; transition: all 0.5s;\n  background: radial-gradient(circle at 10% 10%, rgba(59, 130, 246, 0.2), transparent 40%),\n              linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(10, 15, 30, 0.98) 100%);\n}\n.hero-aurora-bg.active, .hero-aurora-bg.completed {\n  background: radial-gradient(circle at 80% 20%, rgba(16, 185, 129, 0.25), transparent 50%),\n              linear-gradient(135deg, rgba(6, 78, 59, 0.3) 0%, rgba(10, 15, 30, 0.98) 100%);\n}\n.hero-aurora-bg.pending_delivery {\n  background: radial-gradient(circle at 90% 10%, rgba(249, 115, 22, 0.25), transparent 50%),\n              linear-gradient(135deg, rgba(67, 20, 7, 0.3) 0%, rgba(10, 15, 30, 0.98) 100%);\n}\n.hero-aurora-bg.refunding {\n  background: radial-gradient(circle at 50% 10%, rgba(168, 85, 247, 0.25), transparent 50%),\n              linear-gradient(135deg, rgba(88, 28, 135, 0.3) 0%, rgba(10, 15, 30, 0.98) 100%);\n}\n.hero-aurora-bg.refunded, .hero-aurora-bg.closed {\n  background: radial-gradient(circle at 50% 10%, rgba(239, 68, 68, 0.2), transparent 50%),\n              linear-gradient(135deg, rgba(69, 10, 10, 0.3) 0%, rgba(10, 15, 30, 0.98) 100%);\n}\n\n.status-icon-box.active { color: #34D399; background: rgba(16, 185, 129, 0.2); border-color: rgba(16, 185, 129, 0.3); }\n.status-icon-box.pending_delivery { color: #FB923C; background: rgba(249, 115, 22, 0.2); border-color: rgba(249, 115, 22, 0.3); }\n.status-icon-box.refunding { color: #A855F7; background: rgba(168, 85, 247, 0.2); border-color: rgba(168, 85, 247, 0.3); }\n.status-icon-box.refunded { color: #F87171; background: rgba(239, 68, 68, 0.2); border-color: rgba(239, 68, 68, 0.3); }\n\n/* --- 2. Content Stream --- */\n.content-stream { \n  display: flex; flex-direction: column; gap: 16px; \n  margin-top: 10px; \n  padding: 0 24px; /* ADDED PADDING to restore spacing for content */\n}\n\n.glass-tile {\n  background: rgba(30, 41, 59, 0.3);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  border-radius: 16px;\n  padding: 24px;\n}\n\n.tile-header { margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); }\n.tile-title { font-size: 15px; font-weight: 600; color: #E2E8F0; border-left: 3px solid #3B82F6; padding-left: 10px; }\n\n/* Product Tile */\n.product-content { display: flex; gap: 20px; }\n.product-thumb { width: 80px; height: 80px; border-radius: 12px; overflow: hidden; background: #0f172a; border: 1px solid rgba(255,255,255,0.05); }\n.product-thumb img { width: 100%; height: 100%; object-fit: cover; }\n.product-thumb .placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 24px; }\n\n.product-details { flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 8px; }\n.product-name { font-size: 18px; font-weight: 600; color: #fff; line-height: 1.4; }\n.product-meta { display: flex; gap: 10px; }\n.spec-tag, .qty-tag { padding: 2px 8px; border-radius: 6px; background: rgba(255,255,255,0.05); font-size: 12px; color: #94A3B8; }\n\n/* Tutorial */\n.header-icon { font-size: 18px; color: #3B82F6; }\n\n.tutorial-body {\n  position: relative; cursor: pointer; border-radius: 16px; overflow: hidden;\n  border: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 4px 15px rgba(0,0,0,0.3);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: rgba(0,0,0,0.2);\n}\n.tutorial-body:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 30px rgba(0,0,0,0.5);\n  border-color: rgba(59, 130, 246, 0.4);\n}\n\n.image-wrapper { width: 100%; display: flex; justify-content: center; background: #000; }\n.image-wrapper img { max-width: 100%; display: block; }\n\n.zoom-overlay {\n  position: absolute; inset: 0; background: rgba(0,0,0,0.3);\n  display: flex; align-items: center; justify-content: center;\n  opacity: 0; transition: opacity 0.2s; backdrop-filter: blur(2px);\n}\n.tutorial-body:hover .zoom-overlay { opacity: 1; }\n\n.zoom-pill {\n  display: flex; align-items: center; gap: 8px;\n  padding: 8px 20px; border-radius: 20px;\n  background: rgba(255,255,255,0.15);\n  border: 1px solid rgba(255,255,255,0.2);\n  color: #fff; font-size: 13px; font-weight: 600;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n}\n\n.fade-in-up { animation: fadeInUp 0.4s ease-out backwards; }\n@keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\n\n/* Mobile */\n@media (max-width: 768px) {\n  .hero-main-row { flex-direction: column; align-items: flex-start; gap: 16px; }\n  .status-hero-card { height: auto; }\n  .content-stream { padding: 0 16px; }\n}\n/* Virtual Loop Styles */\n.virtual-item-group {\n  display: flex; flex-direction: column; gap: 16px;\n  margin-bottom: 24px;\n}\n\n.item-separator {\n  display: flex; align-items: center;\n  margin-bottom: 8px;\n}\n.sep-label {\n  font-size: 13px; font-weight: 600; color: #94A3B8;\n  background: rgba(255,255,255,0.05); padding: 4px 10px; border-radius: 6px;\n}\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrInterpolate","_ssrRenderList","_ssrRenderAttr","_ssrRenderComponent","_withCtx","_openBlock","_createBlock","_createVNode","_toDisplayString","_Fragment","_renderList","_unref","ArrowRight","_createCommentVNode","_createTextVNode","Warning","_withDirectives","$emit","_push","_parent","_vModelText","_ssrRenderClass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA,UAAA,QAAA;AAKA,UAAA,iBAAA,IAAA,EAAA;AAIA,UAAA,WAAA,SAAA,MAAA;AACI,UAAA,CAAA,MAAA,QAAA,QAAA;AAEA,UAAA,MAAA,QAAA,eAAA,MAAA,QAAA,YAAA,WAAA;AACI,eAAA,OAAA,MAAA,QAAA,YAAA,SAAA;AAAA,MAAiD;AAErD,aAAA;AAAA,IAAO,CAAA;AAKX,UAAA,cAAA,SAAA,MAAA,MAAA,SAAA;AAGA,UAAA,WAAA,SAAA,MAAA;AACI,YAAA,QAAA,CAAA;AACA,eAAA,IAAA,GAAA,KAAA,SAAA,OAAA,KAAA;AACI,cAAA,OAAA,eAAA,MAAA,KAAA,CAAA,MAAA,EAAA,eAAA,CAAA;AAEA,cAAA,OAAA,MAAA,OAAA,YAAA,KAAA;AACA,cAAA,KAAA;AAAA,UAAW,OAAA;AAAA,UACA;AAAA,UACP;AAAA,QACA,CAAA;AAAA,MACH;AAEL,aAAA;AAAA,IAAO,CAAA;AAGX,UAAA,gBAAA,SAAA,MAAA,eAAA,MAAA,MAAA;AAIA,UAAA,eAAA,CAAA,SAAA;AACE,UAAA,CAAA,KAAA,QAAA,CAAA;AAEA,UAAA,KAAA,UAAA,OAAA,KAAA,WAAA,UAAA;AACE,eAAA,KAAA;AAAA,MAAY;AAGd,UAAA;AACE,eAAA,KAAA,MAAA,KAAA,IAAA;AAAA,MAA2B,QAAA;AAE3B,eAAA,EAAA,OAAA,KAAA,KAAA;AAAA,MAA0B;AAAA,IAC5B;AAOF,UAAA,kBAAA,CAAA,QAAA;AACE,UAAA,QAAA,OAAA,QAAA;AACA,aAAA,OAAA,GAAA,EAAA,SAAA,GAAA,GAAA;AAAA,IAAkC;AAIpC,UAAA,sBAAA,YAAA;AACE,UAAA,CAAA,MAAA,WAAA,CAAA,MAAA,QAAA,GAAA;AACA,YAAA,QAAA,MAAA,QAAA;AAEA,UAAA;AACE,cAAA,SAAA,kBAAA;AACA,cAAA,EAAA,MAAA,UAAA,MAAA,OAAA,KAAA,kBAAA,EAAA,OAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEU,EAAA,GAAA,UAAA,KAAA,EAAA,GAAA,UAAA,OAAA,EAAA,IAAA,WAAA,MAAA,IAAA;AAaV,YAAA,CAAA,SAAA,MAAA;AACE,yBAAA,QAAA,KAAA,OAAA,CAAA,SAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA;AAAA,YAEuB,IAAA,KAAA,SAAA;AAAA,YACD,QAAA,KAAA,SAAA;AAAA,YACI,UAAA,KAAA,SAAA;AAAA,YACE,YAAA,KAAA;AAAA,UACP,EAAA;AAAA,QACjB;AAAA,MACN,SAAA,KAAA;AAEA,gBAAA,MAAA,aAAA,GAAA;AAAA,MAA8B;AAAA,IAChC;AAOF,UAAA,MAAA,MAAA,SAAA,MAAA;AACE,0BAAA;AAAA,IAAoB,GAAA,EAAA,MAAA,MAAA;;;AAjMf,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAA,8BAAA,MAAA,CAAA,CAAA,iPAAA;;;;;;;;YAUiD;AAAA;;;;AAEhB,YAAA,6FAAAC,eAAA,gBAAA,QAAA,SAAA,CAAA,CAAA,2EAAA;AAKAC,oBAAA,aAAA,QAAA,OAAA,GAAA,CAAA,KAAA,QAAA;;;;;;;;;cAKQ;AAAA;;;;;;;AAgBnBA,oBAAA,SAAA,OAAA,CAAA,SAAA;;AAMD,YAAA,KAAA,QAAA,KAAA,KAAA,QAAA;AAAgC,gBAAA,OAAAC,cAAA,OAAA,KAAA,KAAA,MAAA,CAAA,0CAAA;AAAA,QAAqB,WAAA,KAAA,MAAA;AAEzD,gBAAA,2DAAAF,gBAAA,KAAA,KAAA,YAAA,KAAA,CAAA,EAAA,YAAA,CAAA,CAAA,QAAA;AAAA,QAAyC,OAAA;;;;;;;;;gBAG5B;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjD9B,YAAA,OAAAF,eAAAC,WAAA,EAAA,OAAA,yBAAA,MAAA,CAAA,CAAA,mBAAA;AAGQ,UAAA,QAAA,QAAA,WAAA,GAAA;AAS0B,cAAA,8bAAAC,eAAA,QAAA,QAAA,CAAA,EAAA,IAAA,CAAA,qGAAA;;;;;;;;cAIE;AAAA;;;;;;;AAYrB,cAAAG,mBAAA,oBAAA,EAAA,OAAA,aAAA,GAAA;AAAA,UAAkB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAU;AAAA;;;;AACL,cAAA,gDAAAJ,eAAA,QAAA,QAAA,MAAA,CAAA,wIAAA;;;;;;;;;;gBAYJ;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoCzC,UAAA,QAAA;AAUA,UAAA,oBAAA,IAAA,IAAA;AACA,UAAA,eAAA,IAAA,KAAA;AACA,UAAA,WAAA,SAAA,EAAA;AAGA,UAAA,SAAA,SAAA,MAAA,MAAA,aAAA,CAAA,CAAA;AAGA,UAAA,eAAA,SAAA,MAAA,kBAAA,OAAA,MAAA;AACA,UAAA,qBAAA,SAAA,MAAA,kBAAA,OAAA,iBAAA,OAAA;AAGA,UAAA,eAAA,MAAA;AAEE,aAAA,MAAA,QAAA,CAAA,MAAA;AACE,iBAAA,EAAA,GAAA,IAAA;AAAA,MAAkB,CAAA;AAIpB,UAAA,kBAAA,OAAA,YAAA,aAAA,UAAA,eAAA,aAAA,UAAA,aAAA;AAEE,eAAA,QAAA,kBAAA,MAAA,OAAA,EAAA,QAAA,CAAA,CAAA,GAAA,CAAA,MAAA;AAEE,cAAA,MAAA,UAAA;AAEA,cAAA,KAAA,UAAA;AACE,qBAAA,CAAA,IAAA;AAAA,UAAc;AAAA,QAChB,CAAA;AAAA,MACD;AAAA,IACH;AAIF,UAAA,yBAAA,YAAA;AACE,UAAA,CAAA,MAAA,QAAA;AAEA,UAAA;AACE,cAAA,SAAA,kBAAA;AACA,YAAA,QAAA,OAAA,KAAA,oBAAA,EAAA,OAAA,GAAA,EAAA,GAAA,YAAA,MAAA,OAAA,EAAA,MAAA,gBAAA,EAAA,WAAA,OAAA;AAOA,YAAA,MAAA,OAAA;AACG,kBAAA,MAAA,SAAA,WAAA,EAAA,SAAA,MAAA,OAAA;AAAA,QAA0D;AAG7D,cAAA,EAAA,MAAA,UAAA,MAAA,MAAA,MAAA,CAAA,EAAA,YAAA;AAEA,YAAA,CAAA,SAAA,MAAA;AACE,4BAAA,QAAA;AACA,uBAAA;AAAA,QAAa,OAAA;AAEb,4BAAA,QAAA;AACA,uBAAA;AAAA,QAAa;AAAA,MACf,SAAA,KAAA;AAEA,gBAAA,MAAA,WAAA,GAAA;AAAA,MAA4B;AAAA,IAC9B;AAoFF,UAAA,MAAA,MAAA,WAAA,MAAA;AACE,mBAAA;AAAA,IAAa,GAAA,EAAA,WAAA,MAAA;AAQf,aAAA,EAAA,SAAA,wBAAA;;;AAhPO,YAAA,OAAAF,eAAAC,WAAA,EAAA,OAAA,yCAAA,MAAA,CAAA,CAAA,qLAAA;AAQoBE,oBAAA,OAAA,OAAA,CAAA,UAAA;;;;;;;;AAeiB,gBAAAE,mBAAA,oBAAA,EAAA,OAAA,OAAA,GAAA;AAAA,YAAY,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;gBAAY;AAAA;;;;;;;;;;;;;;gBAOT;AAAA;;;;;;;;;;;;;;gBAOA;AAAA;;;;;QAGI,OAAA;;;;;;;;;;AAS9C,cAAAD,mBAAA,oBAAA,EAAA,OAAA,WAAA,GAAA;AAAA,UAAgB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAY;AAAA;;;;;;;;;;AAK5B,cAAAD,mBAAA,oBAAA,EAAA,OAAA,WAAA,GAAA;AAAA,UAAgB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAS;AAAA;;;;;;;;;;AAKzB,cAAAD,mBAAA,oBAAA,EAAA,OAAA,WAAA,GAAA;AAAA,UAAgB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAiB;AAAA;;;;;;;;;;AAKjC,cAAAD,mBAAA,oBAAA,EAAA,OAAA,WAAA,GAAA;AAAA,UAAgB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAgB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNjD,UAAA,QAAA;AAKA,UAAA,UAAA,IAAA,EAAA;AACA,UAAA,aAAA,IAAA,KAAA;AAEA,UAAA,iBAAA,SAAA,MAAA;AACI,UAAA,WAAA,MAAA,QAAA,QAAA;AAEA,aAAA,QAAA,MAAA,MAAA,GAAA,CAAA;AAAA,IAA+B,CAAA;AAKnC,UAAA,eAAA,YAAA;AACE,UAAA,CAAA,MAAA,QAAA;AAEA,UAAA;AACE,cAAA,SAAA,kBAAA;AACA,YAAA,QAAA,OAAA,KAAA,oBAAA,EAAA,OAAA,GAAA,EAAA,GAAA,YAAA,MAAA,OAAA,EAAA,MAAA,gBAAA,EAAA,WAAA,OAAA;AAOA,YAAA,MAAA,aAAA;AACI,kBAAA,MAAA,SAAA,WAAA,EAAA,SAAA,MAAA,aAAA;AAAA,QAAgE;AAGpE,cAAA,EAAA,MAAA,MAAA,IAAA,MAAA;AAEA,YAAA,CAAA,SAAA,MAAA;AACE,kBAAA,QAAA;AAAA,QAAgB;AAAA,MAClB,SAAA,KAAA;AAEA,gBAAA,MAAA,aAAA,GAAA;AAAA,MAA8B;AAAA,IAChC;AAGF,UAAA,aAAA,CAAA,WAAA;AACE,YAAA,MAAA;AAAA,QAAoC,WAAA;AAAA,QACvB,UAAA;AAAA,QACD,UAAA;AAAA,MACA;AAEZ,aAAA,IAAA,MAAA,KAAA;AAAA,IAAsB;AAGxB,UAAA,aAAA,CAAA,SAAA;AAEE,YAAA,OAAA,IAAA,KAAA,IAAA;AACA,YAAA,KAAA,KAAA,SAAA,IAAA,GAAA,WAAA,SAAA,GAAA,GAAA;AACA,YAAA,IAAA,KAAA,QAAA,EAAA,SAAA,EAAA,SAAA,GAAA,GAAA;AACA,YAAA,IAAA,KAAA,SAAA,EAAA,SAAA,EAAA,SAAA,GAAA,GAAA;AACA,YAAA,MAAA,KAAA,WAAA,EAAA,SAAA,EAAA,SAAA,GAAA,GAAA;AACA,aAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA;AAAA,IAA4B;AAG9B,UAAA,YAAA,CAAA,UAAA;AACE,UAAA,CAAA,SAAA,MAAA,UAAA,EAAA,QAAA;AAGA,aAAA,MAAA,MAAA,GAAA,CAAA,IAAA,SAAA,MAAA,MAAA,EAAA;AAAA,IAAkD;AAQpD,aAAA,EAAA,SAAA,cAAA;;;AAnIa,UAAA,QAAA,MAAA,SAAA,GAAA;;AASO,YAAA,QAAA,MAAA,SAAA,GAAA;;;;UAEgC,GAAA;AAAA;;;;;;gBAAiB;AAAA;;;;;;;;;;;AAcxC,cAAA,OAAA,WAAA,YAAA;;;;;;;;kBAA6C;AAAA;;;;;;;;;;;;kBACK;AAAA;;;;;;;;;;;;kBACtC;AAAA;;;;;;AAQAH,wBAAA,OAAA,SAAA,CAAA,OAAA,QAAA;;;;AAOtB,cAAA,OAAA,WAAA,cAAA,OAAA,eAAA;;;;;;;;;kBACc;AAAA;;;;AACL,kBAAA,+BAAAD,eAAA,OAAA,aAAA,CAAA,eAAA;AAAA,UAAoB,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4HhD,UAAA,QAAA;AAKA,UAAA,OAAA;AAEA,UAAA,SAAA,UAAA;AACA,UAAA,YAAA,aAAA;AAEA,UAAA,UAAA,SAAA;AAAA,MAAyB,KAAA,MAAA,MAAA;AAAA,MACN,KAAA,CAAA,QAAA,KAAA,qBAAA,GAAA;AAAA,IAC0B,CAAA;AAI7C,UAAA,UAAA,IAAA,KAAA;AACA,UAAA,QAAA,IAAA,EAAA;AACA,UAAA,SAAA,IAAA,KAAA;AACA,UAAA,kBAAA,IAAA,KAAA;AAEA,UAAA,UAAA,IAAA,EAAA;AACA,UAAA,iBAAA,IAAA,EAAA;AACA,UAAA,gBAAA,IAAA,EAAA;AACA,UAAA,iBAAA,IAAA,IAAA;AACA,UAAA,iBAAA,IAAA,CAAA;AACA,UAAA,gBAAA,SAAA,EAAA;AAGA,UAAA,cAAA,SAAA;AAAA,MAA6B,IAAA;AAAA,MACvB,MAAA;AAAA,MACE,OAAA;AAAA,IACC,CAAA;AAIT,UAAA,aAAA,SAAA,MAAA;AACE,UAAA,QAAA,MAAA,WAAA,EAAA,QAAA,CAAA;AAEA,YAAA,SAAA,CAAA;AAEA,cAAA,MAAA,QAAA,CAAA,QAAA;AACE,cAAA,cAAA,IAAA,oBAAA,CAAA;AACA,eAAA,QAAA,WAAA,EAAA,QAAA,CAAA,CAAA,MAAA,KAAA,MAAA;AACE,cAAA,CAAA,OAAA,IAAA,GAAA;AACE,mBAAA,IAAA,IAAA,oBAAA,IAAA;AAAA,UAAuB;AAGzB,cAAA,CAAA,OAAA,IAAA,EAAA,IAAA,KAAA,GAAA;AACE,mBAAA,IAAA,EAAA,IAAA,OAAA;AAAA,cAAwB;AAAA,cACtB,OAAA,IAAA;AAAA,cACW,OAAA,IAAA;AAAA,YACA,CAAA;AAAA,UACZ;AAAA,QACH,CAAA;AAAA,MACD,CAAA;AAGH,aAAA,OAAA,QAAA,MAAA,EAAA,IAAA,CAAA,CAAA,MAAA,SAAA,OAAA;AAAA,QAA0D;AAAA,QACxD,QAAA,MAAA,KAAA,UAAA,OAAA,CAAA;AAAA,MACqC,EAAA;AAAA,IACrC,CAAA;AAIJ,UAAA,cAAA,SAAA,MAAA;AACE,UAAA,cAAA,OAAA;AACE,eAAA,QAAA,MAAA,KAAA,CAAA,MAAA,EAAA,WAAA,cAAA,KAAA;AAAA,MAA+D;AAGjE,UAAA,WAAA,MAAA,SAAA,GAAA;AACE,eAAA,QAAA,MAAA,KAAA,CAAA,QAAA;AACE,gBAAA,cAAA,IAAA,oBAAA,CAAA;AACA,iBAAA,OAAA,QAAA,aAAA,EAAA;AAAA,YAAqC,CAAA,CAAA,MAAA,KAAA,MAAA,YAAA,IAAA,MAAA;AAAA,UACb;AAAA,QACxB,CAAA;AAAA,MACD;AAEH,aAAA;AAAA,IAAO,CAAA;AAGT,UAAA,iBAAA;AAAA,MAAuB,MAAA,YAAA,OAAA,SAAA;AAAA,IACO;AAG9B,UAAA,cAAA;AAAA,MAAoB,MAAA,KAAA,IAAA,GAAA,eAAA,QAAA,eAAA,KAAA;AAAA,IACqC;AAGzD,UAAA,aAAA,SAAA,MAAA;AACE,UAAA,CAAA,eAAA,SAAA,CAAA,YAAA,MAAA,QAAA;AACA,YAAA,UAAA,IAAA,KAAA,eAAA,KAAA;AACA,cAAA,QAAA,QAAA,QAAA,IAAA,YAAA,MAAA,QAAA;AACA,aAAA,QAAA,YAAA;AAAA,IAA2B,CAAA;AAI7B,UAAA,MAAA,MAAA,YAAA,OAAA,QAAA;AACE,UAAA,KAAA;AACE,cAAA,gBAAA;AAAA,MAAsB,OAAA;AAGtB,sBAAA,QAAA;AACA,uBAAA,QAAA;AACA,uBAAA,QAAA;AACA,eAAA,KAAA,aAAA,EAAA,QAAA,CAAA,MAAA,OAAA,cAAA,CAAA,CAAA;AAAA,MAA+D;AAAA,IACjE,CAAA;AAIF,UAAA,eAAA,MAAA;AACE,UAAA,WAAA,MAAA,SAAA,GAAA;AACE,cAAA,UAAA,QAAA,MAAA,KAAA,CAAA,QAAA;AACE,gBAAA,cAAA,IAAA,oBAAA,CAAA;AACA,iBAAA,OAAA,QAAA,aAAA,EAAA;AAAA,YAAqC,CAAA,CAAA,MAAA,KAAA,MAAA,YAAA,IAAA,MAAA;AAAA,UACb;AAAA,QACxB,CAAA;AAEF,YAAA,SAAA;AACE,wBAAA,QAAA,QAAA;AAAA,QAA8B;AAAA,MAChC;AAAA,IACF,GAAA,EAAA,MAAA,MAAA;AAIF,UAAA,kBAAA,YAAA;AACE,cAAA,QAAA;AACA,YAAA,QAAA;AAEA,UAAA;AACE,cAAA,MAAA,MAAA,eAAA,eAAA,MAAA,OAAA;AAEA,YAAA,CAAA,IAAA,SAAA;AACE,gBAAA,QAAA,IAAA,SAAA;AACA;AAAA,QAAA;AAGF,gBAAA,QAAA,IAAA,QAAA,CAAA;AACA,uBAAA,QAAA,IAAA,WAAA;AAGA,YAAA,IAAA,SAAA;AACE,sBAAA,KAAA,IAAA,QAAA;AACA,sBAAA,OAAA,IAAA,QAAA;AACA,sBAAA,QAAA,IAAA,QAAA;AAAA,QAAgC;AAIlC,YAAA,WAAA,MAAA,SAAA,GAAA;AAEE,qBAAA,MAAA,QAAA,CAAA,UAAA;AACE,gBAAA,MAAA,OAAA,SAAA,GAAA;AACE,4BAAA,MAAA,IAAA,IAAA,MAAA,OAAA,CAAA,EAAA;AAAA,YAA4C;AAAA,UAC9C,CAAA;AAAA,QACD,WAAA,QAAA,MAAA,SAAA,GAAA;AAGD,wBAAA,QAAA,QAAA,MAAA,CAAA,EAAA;AAAA,QAAuC;AAAA,MACzC,SAAA,GAAA;AAEA,cAAA,QAAA,EAAA,WAAA;AAAA,MAA2B,UAAA;AAE3B,gBAAA,QAAA;AAAA,MAAgB;AAAA,IAClB;AAGF,UAAA,mBAAA,CAAA,WAAA,UAAA;AACE,oBAAA,SAAA,IAAA;AAEA,qBAAA,QAAA;AACA,qBAAA,QAAA;AAAA,IAAuB;AAGzB,UAAA,wBAAA,CAAA,QAAA;AACE,oBAAA,QAAA,IAAA;AAEA,qBAAA,QAAA;AACA,qBAAA,QAAA;AAAA,IAAuB;AAGzB,UAAA,qBAAA,OAAA,WAAA;AACE,qBAAA,QAAA;AAEA,UAAA,CAAA,QAAA;AACE,uBAAA,QAAA;AACA;AAAA,MAAA;AAIF,UAAA,OAAA,OAAA,SAAA,QAAA;AACE,uBAAA,QAAA,KAAA,IAAA,OAAA,OAAA,OAAA,eAAA,KAAA;AAAA,MAAyE,WAAA,OAAA,OAAA,SAAA,WAAA;AAEzE,uBAAA,QAAA,eAAA;AAAA,MAAsC,OAAA;AAEtC,uBAAA,QAAA;AAAA,MAAuB;AAAA,IACzB;AAGF,UAAA,YAAA,YAAA;AACE,UAAA,CAAA,cAAA,SAAA,OAAA,MAAA;AAGA,YAAA,UAAA,UAAA,MAAA,WAAA;AACA,UAAA,UAAA,YAAA,OAAA;AACE,kBAAA,MAAA,WAAA,YAAA,MAAA,QAAA,CAAA,CAAA,QAAA,QAAA,QAAA,CAAA,CAAA,EAAA;AACA;AAAA,MAAA;AAGF,aAAA,QAAA;AAEA,UAAA;AAEE,cAAA,YAAA,MAAA,eAAA;AAAA,UAAuC,cAAA;AAAA,UACvB,MAAA;AAAA,QACR;AAGR,YAAA,CAAA,UAAA,SAAA;AACE,oBAAA,MAAA,UAAA,SAAA,UAAA;AACA;AAAA,QAAA;AAGF,cAAA,aAAA,UAAA;AAGA,YAAA,eAAA,OAAA;AACE,gBAAA,YAAA,MAAA,eAAA;AAAA,YAAuC;AAAA,YACrC,eAAA,MAAA;AAAA,UACqB;AAGvB,cAAA,CAAA,UAAA,SAAA;AACE,sBAAA,QAAA,gBAAA;AACA,2BAAA,QAAA;AAAA,UAAuB;AAAA,QACzB;AAIF,cAAA,aAAA,MAAA,eAAA;AAAA,UAAwC;AAAA,UACtC;AAAA,UACA,eAAA,OAAA;AAAA,QACsB;AAGxB,YAAA,CAAA,WAAA,SAAA;AACE,oBAAA,MAAA,WAAA,SAAA,MAAA;AACA;AAAA,QAAA;AAIF,kBAAA,QAAA,OAAA;AACA,cAAA,UAAA,cAAA;AAEA,gBAAA,QAAA;AACA,aAAA,WAAA,WAAA,OAAA;AAGA,eAAA,KAAA,kBAAA,WAAA,OAAA,EAAA;AAAA,MAAkD,SAAA,GAAA;AAGlD,kBAAA,MAAA,EAAA,WAAA,MAAA;AAAA,MAAmC,UAAA;AAEnC,eAAA,QAAA;AAAA,MAAe;AAAA,IACjB;AAGF,UAAA,aAAA,CAAA,YAAA;AACE,UAAA,CAAA,QAAA,QAAA;AACA,YAAA,OAAA,IAAA,KAAA,OAAA;AACA,aAAA,GAAA,KAAA,YAAA,CAAA,IAAA,OAAA,KAAA,SAAA,IAAA,CAAA,EAAA,SAAA,GAAA,GAAA,CAAA,IAAA,OAAA,KAAA,SAAA,EAAA,SAAA,GAAA,GAAA,CAAA;AAAA,IAAuH;;;;;;QApbpG,oBAAA,CAAA,WAAA,QAAA,QAAA;AAAA,QAAO,OAAA;AAAA,QAClB,OAAA;AAAA,QACA,QAAA;AAAA,QACG,eAAA;AAAA,MACT,GAAA,MAAA,GAAA;AAAA;;;;;;;;;;;gBAuBsC,OAAA;AAAA,gBAAa,KAAA;AAAA,cAAiB,GAAA;AAAA;;;;;;oBACd;AAAA;;;;;AAWhC,kBAAA,WAAA,MAAA,SAAA,GAAA;;AACeC,8BAAA,WAAA,OAAA,CAAA,cAAA;;;;;;;;;;AAmBPA,8BAAA,QAAA,OAAA,CAAA,QAAA;;;;;;;;;;;;;;;;;;;;oBAkBK;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;cAiDxB,uBAAA,CAAA,WAAA,gBAAA,QAAA;AAAA,cAAe,aAAA,eAAA;AAAA,cACV,QAAA,cAAA,QAAA,CAAA,cAAA,KAAA,IAAA,CAAA;AAAA,cACyB,YAAA,YAAA,KAAA,CAAA,YAAA,EAAA,IAAA,CAAA;AAAA,cACM,iBAAA,eAAA,OAAA;AAAA,cACX,UAAA;AAAA,YACzB,GAAA,MAAA,UAAA,QAAA,CAAA;AAAA;;;gBA7HiB,QAAA,SAAAI,aAAAC,YAAA,OAAA;AAAA,kBAKpB,KAAA;AAAA;gBAHoB,GAAA;AAAA;kBACJC,YAAA,KAAA,MAAA,WAAA;AAAA,gBACR,CAAA,KAAA,MAAA,SAAAF,UAAA,GAAAC,YAAA,OAAA;AAAA,kBAOR,KAAA;AAAA;gBAHuB,GAAA;AAAA;kBACDC,YAAA,KAAA,MAAAC,gBAAA,MAAA,KAAA,GAAA,CAAA;AAAA,gBACf,CAAA,MAAAH,UAAA,GAAAC,YAAA,OAAA;AAAA,kBAyGP,KAAA;AAAA;gBArGY,GAAA;AAAA;oBACiBC,YAAA,OAAA,EAAA,OAAA,mBAAA,GAAA;AAAA,sBAGFA,YAAA,OAAA,EAAA,OAAA,yBAAA,GAAA;AAAA,wBAEQA,YAAA,qBAAA;AAAA,0BAGtB,KAAA,YAAA;AAAA,0BAFiB,OAAA;AAAA,0BAAa,KAAA;AAAA,wBAAiB,GAAA;AAAA;4BACRA,YAAA,OAAA,EAAA,OAAA,KAAA,GAAA,KAAA;AAAA,0BAAN,CAAA;AAAA;;;0BAExBA,YAAA,OAAA,EAAA,OAAA,UAAA,GAAAC,gBAAA,YAAA,IAAA,GAAA,CAAA;AAAA,0BACuBD,YAAA,OAAA,EAAA,OAAA,YAAA,GAAA,WAAAC,gBAAA,WAAA,eAAA,KAAA,CAAA,GAAA,CAAA;AAAA,wBACiB,CAAA;AAAA;;wBAKpC,WAAA,MAAA,SAAA,KAAAH,UAAA,GAAAC,YAAA,OAAA,EAAA,KAAA,KAAA;AAAA,2BAgBlBD,UAAA,IAAA,GAAAC,YAAAG,UAAA,MAAAC,WAAA,WAAA,OAAA,CAAA,cAAA;;8BADE,KAAA,UAAA;AAAA,8BAZ+C,OAAA;AAAA,4BAAY,GAAA;AAAA;8BACtBH,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA;AAAA,iCACjBF,UAAA,IAAA,GAAAC,YAAAG,UAAA,MAAAC,WAAA,UAAA,QAAA,CAAA,QAAA;;oCAQhB,KAAA,IAAA;AAAA,oCALM,OAAA,CAAA,gBAAA,EAAA,QAAA,cAAA,UAAA,IAAA,MAAA,IAAA,OAAA;AAAA,oCACoE,SAAA,CAAA,WAAA,iBAAA,UAAA,MAAA,IAAA,KAAA;AAAA,kCAC5B,GAAAF,gBAAA,IAAA,KAAA,GAAA,IAAA,CAAA,SAAA,CAAA;AAAA,gCAEtC,CAAA,GAAA,GAAA;AAAA;;;;0BAkBd,KAAA;AAAA;wBAZoC,GAAA;AAAA;0BACZD,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA;AAAA,6BACJF,UAAA,IAAA,GAAAC,YAAAG,UAAA,MAAAC,WAAA,QAAA,OAAA,CAAA,QAAA;;gCAQhB,KAAA,IAAA;AAAA,gCALM,OAAA,CAAA,gBAAA,EAAA,QAAA,cAAA,UAAA,IAAA,QAAA;AAAA,gCACqD,SAAA,CAAA,WAAA,sBAAA,GAAA;AAAA,8BAC9B,GAAAF,gBAAA,IAAA,QAAA,IAAA,MAAA,IAAA,CAAA,SAAA,CAAA;AAAA,4BAGnC,CAAA,GAAA,GAAA;AAAA;;;;wBAcA,OAAA;AAAA,wBAPK,SAAA,CAAA,WAAA,gBAAA,QAAA;AAAA,sBAAwC,GAAA;AAAA;wBACpBD,YAAA,OAAA,EAAA,OAAA,eAAA,GAAA;AAAA,0BACJ,eAAA,SAAAF,aAAAC,YAAA,QAAA;AAAA,4BACqE,KAAA;AAAA;0BAA1D,GAAA,OAAAE,gBAAA,eAAA,MAAA,QAAA,CAAA,CAAA,GAAA,CAAA,MAAAH,aAAAC,YAAA,QAAA;AAAA,4BACkB,KAAA;AAAA;0BAAjC,GAAA,OAAA;AAAA,0BAA0BC,YAAA,oBAAA,MAAA;AAAA,4BACZ,SAAAH,QAAA,MAAA;AAAA,8BAAVG,YAAAI,MAAAC,mBAAA,CAAA;AAAA,4BAAA,CAAA;AAAA;;;;;;sBAMCL,YAAA,OAAA,EAAA,OAAA,eAAA,GAAA;AAAA,wBACFA,YAAA,OAAA,EAAA,OAAA,gBAAA,GAAA,MAAA;AAAA,wBACSA,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA;AAAA,0BAEPA,YAAA,QAAA,MAAA,MAAA;AAAA,0BACXA,YAAA,QAAA,MAAA,MAAAC,gBAAA,eAAA,MAAA,QAAA,CAAA,CAAA,GAAA,CAAA;AAAA,wBACsB,CAAA;AAAA;0BAK7B,KAAA;AAAA;wBAHK,GAAA;AAAA;0BACED,YAAA,QAAA,EAAA,OAAA,cAAA,GAAA,OAAAC,gBAAA,eAAA,MAAA,QAAA,CAAA,CAAA,GAAA,CAAA;AAAA,wBAC2C,CAAA,KAAAK,mBAAA,IAAA,IAAA;AAAA;wBAGpCN,YAAA,OAAA,EAAA,OAAA,YAAA,GAAA;AAAA,0BAEEA,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA,MAAA;AAAA,0BACUA,YAAA,OAAA,EAAA,OAAA,cAAA,GAAA;AAAA,4BACLA,YAAA,QAAA,EAAA,OAAA,OAAA,GAAA,GAAA;AAAA,4BACDO,gBAAAN,gBAAA,YAAA,MAAA,QAAA,CAAA,CAAA,GAAA,CAAA;AAAA,0BAA6B,CAAA;AAAA;;0BAMjD,KAAA;AAAA;wBAFK,GAAA,aAAAA,gBAAA,WAAA,WAAA,KAAA,CAAA,GAAA,CAAA,KAAAK,mBAAA,IAAA,IAAA;AAAA;0BAWF,OAAA;AAAA,0BAND,UAAA,CAAA,cAAA,SAAA,OAAA;AAAA,0BACuB,SAAA;AAAA,wBACrB,GAAA;AAAA;wBAGS,GAAA,GAAA,CAAA,UAAA,CAAA;AAAA;;;;;;gBAiB7B,YAAA,gBAAA;AAAA,gBANS,uBAAA,CAAA,WAAA,gBAAA,QAAA;AAAA,gBAAe,aAAA,eAAA;AAAA,gBACV,QAAA,cAAA,QAAA,CAAA,cAAA,KAAA,IAAA,CAAA;AAAA,gBACyB,YAAA,YAAA,KAAA,CAAA,YAAA,EAAA,IAAA,CAAA;AAAA,gBACM,iBAAA,eAAA,OAAA;AAAA,gBACX,UAAA;AAAA,cACzB,GAAA,MAAA,GAAA,CAAA,cAAA,uBAAA,eAAA,UAAA,cAAA,iBAAA,CAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACrEf,UAAA,QAAA;AAMA,UAAA,OAAA;AAEA,UAAA,UAAA,SAAA;AAAA,MAAyB,KAAA,MAAA,MAAA;AAAA,MACN,KAAA,CAAA,QAAA,KAAA,qBAAA,GAAA;AAAA,IAC0B,CAAA;AAG7C,UAAA,aAAA,IAAA,KAAA;AACA,UAAA,OAAA,SAAA;AAAA,MAAsB,QAAA;AAAA,MACZ,QAAA;AAAA,IACA,CAAA;AAGV,UAAA,UAAA;AAAA,MAAgB;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACA;AAGF,UAAA,UAAA,SAAA,MAAA,CAAA,CAAA,KAAA,MAAA;AAEA,UAAA,cAAA,MAAA;AACE,cAAA,QAAA;AAAA,IAAgB;AAGlB,UAAA,eAAA,YAAA;AACE,UAAA,CAAA,QAAA,MAAA;AAEA,iBAAA,QAAA;AACA,UAAA;AACE,cAAA,MAAA,MAAA,eAAA;AAAA,UAAiC,MAAA;AAAA,UACzB,KAAA;AAAA,UACD,KAAA;AAAA,QACA;AAGP,YAAA,IAAA,SAAA;AACE,oBAAA,QAAA,SAAA;AACA,eAAA,SAAA;AACA,sBAAA;AAAA,QAAY,OAAA;AAEZ,oBAAA,MAAA,IAAA,SAAA,MAAA;AAAA,QAAmC;AAAA,MACrC,SAAA,GAAA;AAEA,kBAAA,MAAA,EAAA,WAAA,MAAA;AAAA,MAAmC,UAAA;AAEnC,mBAAA,QAAA;AAAA,MAAmB;AAAA,IACrB;AAIF,UAAA,MAAA,MAAA,YAAA,CAAA,QAAA;AACE,UAAA,KAAA;AACE,aAAA,SAAA;AACA,aAAA,SAAA;AAAA,MAAc;AAAA,IAChB,CAAA;;;;;QA7HmB,oBAAA,CAAA,WAAA,QAAA,QAAA;AAAA,QAAO,OAAA;AAAA,QAClB,UAAA;AAAA,QACG,eAAA;AAAA,QACG,SAAA,WAAA;AAAA,QACF,mBAAA,CAAA,QAAA;AAAA,QACS,eAAA;AAAA,QACnB,SAAA;AAAA,QACQ,UAAA;AAAA,QACC,UAAA;AAAA,MACA,GAAA,MAAA,GAAA;AAAA;;;;;;;;;;kBAWe;AAAA;;;;;AASJZ,0BAAA,SAAA,CAAA,MAAA;;;;;;;gBAlBIM,YAAA,OAAA,EAAA,OAAA,WAAA,GAAA;AAAA,kBAEDA,YAAA,OAAA,EAAA,OAAA,QAAA,GAAA,KAAA;AAAA,kBACGA,YAAA,OAAA,EAAA,OAAA,QAAA,GAAAC,gBAAA,QAAA,OAAA,GAAA,CAAA;AAAA,gBACO,CAAA;AAAA;kBAIPD,YAAA,oBAAA,MAAA;AAAA,oBACQ,SAAAH,QAAA,MAAA;AAAA,sBAAVG,YAAAI,MAAAI,eAAA,CAAA;AAAA,oBAAA,CAAA;AAAA;;;gBACgB,CAAA;AAAA;kBAIfR,YAAA,SAAA,MAAA;AAAA,oBAC8BO,gBAAA,OAAA;AAAA,oBAAvCP,YAAA,QAAA,EAAA,OAAA,WAAA,GAAA,GAAA;AAAA,kBAAwB,CAAA;AAAA;qBACTF,UAAA,GAAAC,YAAAG,UAAA,MAAAC,WAAA,SAAA,CAAA,MAAA;;wBASnB,KAAA;AAAA,wBANE,OAAA,CAAA,cAAA,EAAA,QAAA,KAAA,WAAA,GAAA;AAAA,wBAE6B,SAAA,CAAA,WAAA,KAAA,SAAA;AAAA,sBACb,GAAAF,gBAAA,CAAA,GAAA,IAAA,CAAA,SAAA,CAAA;AAAA,oBAElB,CAAA,GAAA,EAAA;AAAA;;;kBAMaD,YAAA,SAAA,MAAA,MAAA;AAAA,kBACVS,eAAAT,YAAA,YAAA;AAAA,oBAMC,uBAAA,CAAA,WAAA,KAAA,SAAA;AAAA,oBAJU,OAAA;AAAA,oBACd,MAAA;AAAA,oBACD,aAAA;AAAA,kBACO,GAAA,MAAA,GAAA,CAAA,qBAAA,CAAA,GAAA;AAAA;kBAHQ,CAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACmD9B,UAAM,QAAQ;AAId,UAAM,OAAO;AAEb,UAAM,OAAO,SAAS;AAAA,MACpB,OAAO;AAAA,MACP,UAAU;AAAA,MACV,SAAS;AAAA,MACT,aAAa,CAAA;AAAA,IAAC,CACf;AAED,UAAM,aAAa;AAAA,MACjB,EAAE,OAAO,MAAM,OAAO,MAAA;AAAA,MACtB,EAAE,OAAO,MAAM,OAAO,SAAA;AAAA,MACtB,EAAE,OAAO,MAAM,OAAO,OAAA;AAAA,IAAO;AAG/B,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,YAAY,IAAI,KAAK;AAC3B,UAAM,eAAe,IAAI,KAAK;AAC9B,UAAM,cAAc,IAAwB,IAAI;AAChD,UAAM,YAAY,IAA6B,IAAI;AAEnD,UAAM,UAAU,SAAS,MAAM;AAC7B,aAAO,KAAK,MAAM,KAAA,KAAU,KAAK,QAAQ,KAAA;AAAA,IAC3C,CAAC;AAED,UAAM,eAAe,CAAC,WAAmB;AACvC,YAAM,MAA8B;AAAA,QAClC,UAAU;AAAA,QACV,aAAa;AAAA,QACb,WAAW;AAAA,QACX,WAAW;AAAA,QACX,aAAa;AAAA,QACb,YAAY;AAAA,MAAA;AAEd,aAAO,IAAI,MAAM,KAAK;AAAA,IACxB;AAkBA,UAAM,gBAAgB,MAAM;AACzB,gBAAU,OAAO,MAAA;AAAA,IACpB;AAEA,UAAM,mBAAmB,OAAO,MAAa;AAC3C,YAAM,QAAS,EAAE,OAA4B;AAC7C,UAAI,CAAC,SAAS,MAAM,WAAW,EAAG;AAElC,YAAM,OAAO,MAAM,CAAC;AACpB,UAAI,KAAK,OAAO,IAAI,OAAO,MAAM;AAC/B,cAAM,cAAc;AACpB;AAAA,MACF;AAEA,UAAI;AACF,kBAAU,QAAQ;AAClB,cAAM,SAAS,kBAAA;AACf,cAAM,WAAW,GAAG,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,CAAC,CAAC,IAAI,KAAK,KAAK,MAAM,GAAG,EAAE,IAAA,CAAK;AACvG,cAAM,EAAE,MAAM,MAAA,IAAU,MAAM,OAAO,QACjC,KAAK,SAAS,EACd,OAAO,GAAG,MAAM,OAAO,IAAI,QAAQ,IAAI,IAAI;AAE/C,YAAI,MAAO,OAAM;AAGjB,cAAM,EAAE,MAAM,EAAE,UAAA,EAAU,IAAM,OAAO,QAAQ,KAAK,SAAS,EAAE,aAAa,KAAK,IAAI;AACrF,aAAK,YAAY,KAAK,SAAS;AAAA,MAEjC,SAAS,KAAU;AACjB,gBAAQ,MAAM,GAAG;AACjB,cAAM,WAAW,IAAI,OAAO;AAAA,MAC9B,UAAA;AACE,kBAAU,QAAQ;AAElB,YAAI,UAAU,MAAO,WAAU,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAEA,UAAM,cAAc,CAAC,QAAgB;AACnC,WAAK,YAAY,OAAO,KAAK,CAAC;AAAA,IAChC;AAEA,UAAM,SAAS,YAAY;AACzB,UAAI,CAAC,QAAQ,MAAO;AACpB,iBAAW,QAAQ;AACnB,UAAI;AACD,cAAM,MAAM,MAAM,UAAU;AAAA,UACzB,MAAM;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,QAAA;AAER,YAAI,IAAI,SAAS;AACd,eAAK,SAAS;AACd,eAAK,OAAO;AAAA,QACf,OAAO;AACJ,gBAAM,IAAI,SAAS,MAAM;AAAA,QAC5B;AAAA,MACH,SAAS,GAAG;AACT,cAAM,MAAM;AAAA,MACf,UAAA;AACG,mBAAW,QAAQ;AAAA,MACtB;AAAA,IACF;;;QAxNK,SAAS;AAAA,QACV,OAAM;AAAA,QACN,UAAS;AAAA,QACT,eAAY;AAAA,QACX,SAAS,WAAA;AAAA,QACT,oBAAkB,QAAA;AAAA,QACnB,eAAA;AAAA,QACA,mBAAgB;AAAA,QACf,qBAAOU,KAAAA,MAAK,OAAA;AAAA,QACZ,sBAAQA,KAAAA,MAAK,OAAA;AAAA,QACb,UAAQ;AAAA,MAAA;yBAXX,CAsFgB,GAAAC,QAAAC,UAAA,aAAA;;;gBAvE2B,YAAA,OAAW;wIAEnCjB,cAAA,OAAK,YAAA,MAAY,kBAAkB,KAAK,8MAIZF,eAAA,YAAA,MAAY,QAAQ,gFACrB,aAAa,YAAA,MAAY,MAAM,CAAA,qFAEnC,YAAA,MAAY,kBAAkB,YAAY;AAC9C,kBAAA,YAAA,MAAY,cAAY;;AACnBC,8BAAA,YAAA,MAAY,aAAa,kBAAgB,CAAtD,KAAK,QAAG;4EAA8D,GAAG;;;;;;yIAG/D,YAAA,MAAY,cAAc,QAAO,CAAA,CAAA,8DAC9BD,eAAA,YAAA,MAAY,QAAQ;uBAKb,aAAA,OAAY;;;;;wLAOpCE,cAAA,SAAA,KAAK,KAAK;AAQTD,0BAAA,aAAL,MAAC;8DAEU,KAAK,aAAa,EAAE,OAAK,CAAG,EAAE,KAAK,GAAA,KAAA,GAAA,OAAA,CAAA,iCAGlDD,eAAA,EAAE,KAAK;;qSAQIA,eAAA,KAAK,OAAO;AAQkBC,0BAAA,KAAK,aAAW,CAA7B,KAAK,QAAG;gFAChCC,cAAA,OAAK,GAAG;;;gBAKa,KAAK,YAAY,SAAM,GAAA;;kBACtC,UAAA,OAAS;;;;;;;;;;;;cAjEjCK,YAwEM,OAAA,EAxED,OAAM,gBAAY;AAAA,gBAEgB,YAAA,sBAApCD,YAkBM,OAAA;AAAA;kBAlBD,OAAM;AAAA,gBAAA;kBACRC,YAEM,OAAA,EAFD,OAAM,gBAAY;AAAA,oBACpBA,YAAgE,OAAA;AAAA,sBAA1D,KAAK,YAAA,MAAY,kBAAkB;AAAA,sBAAO,KAAI;AAAA,oBAAA;;kBAEvDA,YAaM,OAAA,EAbD,OAAM,eAAW;AAAA,oBACnBA,YAGM,OAAA,EAHD,OAAM,cAAU;AAAA,sBAClBA,YAA6D,QAAA,EAAvD,OAAM,WAAA,GAAW,UAAKC,gBAAG,YAAA,MAAY,QAAQ,GAAA,CAAA;AAAA,sBACnDD,YAAwE,QAAA,EAAlE,OAAM,eAAA,mBAAkB,aAAa,YAAA,MAAY,MAAM,CAAA,GAAA,CAAA;AAAA,oBAAA;oBAEhEA,YAAgF,OAAA,EAA3E,OAAM,eAAA,mBAAkB,YAAA,MAAY,kBAAkB,YAAY,GAAA,CAAA;AAAA,oBAC9C,YAAA,MAAY,6BAArCD,YAEM,OAAA;AAAA;sBAFD,OAAM;AAAA,oBAAA;wCACRA,YAAiGG,UAAA,MAAAC,WAAtE,kBAAY,aAAa,kBAAgB,CAAtD,KAAK,QAAG;AAAtB,+BAAAL,UAAA,GAAAC,YAAiG,QAAA,EAA1B,uBAAa,GAAG,GAAA,CAAA;AAAA;;oBAE1FC,YAGM,OAAA,EAHD,OAAM,eAAW;AAAA,sBACnBA,YAAsE,QAAA,EAAhE,OAAM,WAAQ,MAACC,gBAAG,YAAA,MAAY,cAAc,QAAO,CAAA,CAAA,GAAA,CAAA;AAAA,sBACzDD,YAAyD,QAAA,EAAnD,OAAM,WAAA,GAAW,MAACC,gBAAG,YAAA,MAAY,QAAQ,GAAA,CAAA;AAAA,oBAAA;;sBAKb,aAAA,sBAA3CF,YAEM,OAAA;AAAA;kBAFD,OAAM;AAAA,gBAAA;kBACRC,YAAqC,QAAA,EAA/B,OAAM,mBAAiB;AAAA,kCAAQ,aACxC;AAAA,gBAAA;gBAGAA,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,kBACpBA,YAAmD,SAAA,MAAA;AAAA,oCAA5C,OAAK;AAAA,oBAAAA,YAA+B,QAAA,EAAzB,OAAM,WAAA,GAAW,GAAC;AAAA,kBAAA;iCACpCA,YAA2E,SAAA;AAAA,oBAA3D,uBAAA,CAAA,WAAA,KAAK,QAAK;AAAA,oBAAE,OAAM;AAAA,oBAAa,aAAY;AAAA,kBAAA;oBAA3C,CAAAa,YAAA,KAAK,KAAK;AAAA,kBAAA;;gBAI7Bb,YAYM,OAAA,EAZD,OAAM,gBAAY;AAAA,kBACpBA,YAAkB,eAAX,KAAG;AAAA,kBACVA,YASM,OAAA,EATD,OAAM,sBAAkB;AAAA,kCAC1BD,YAOMG,UAAA,MAAAC,WANQ,YAAU,CAAf,MAAC;6BADVH,YAOM,OAAA;AAAA,wBANqB,KAAK,EAAE;AAAA,wBAChC,OAAK,CAAC,SAAO,EAAA,QACK,KAAK,aAAa,EAAE,OAAK,CAAG,EAAE,KAAK,GAAA,MAAA;AAAA,wBACpD,qBAAO,KAAK,WAAW,EAAE;AAAA,sBAAA,GAEvBC,gBAAA,EAAE,KAAK,GAAA,IAAA,CAAA,SAAA,CAAA;AAAA;;;gBAMlBD,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,kBACpBA,YAAmD,SAAA,MAAA;AAAA,oCAA5C,OAAK;AAAA,oBAAAA,YAA+B,QAAA,EAAzB,OAAM,WAAA,GAAW,GAAC;AAAA,kBAAA;iCACpCA,YAAsG,YAAA;AAAA,oBAAnF,uBAAA,CAAA,WAAA,KAAK,UAAO;AAAA,oBAAE,OAAM;AAAA,oBAAgB,MAAK;AAAA,oBAAI,aAAY;AAAA,kBAAA;oBAAzD,CAAAa,YAAA,KAAK,OAAO;AAAA,kBAAA;;gBAIlCb,YAiBM,OAAA,EAjBD,OAAM,gBAAY;AAAA,kBACpBA,YAAwB,eAAjB,WAAS;AAAA,kBAChBA,YAaM,OAAA,EAbD,OAAM,iBAAa;AAAA,qBAErBF,UAAA,IAAA,GAAAC,YAGMG,2BAHwC,KAAK,aAAW,CAA7B,KAAK,QAAG;0CAAzCH,YAGM,OAAA;AAAA,wBAHD,OAAM;AAAA,wBAAsD,KAAK;AAAA,sBAAA;wBACnEC,YAAkB,OAAA,EAAZ,KAAK,IAAA,GAAG,MAAA,GAAA,CAAA,KAAA,CAAA;AAAA,wBACdA,YAAyD,OAAA;AAAA,0BAApD,OAAM;AAAA,0BAAc,SAAK,CAAA,WAAE,YAAY,GAAG;AAAA,wBAAA,GAAG,KAAC,GAAA,CAAA,SAAA,CAAA;AAAA,sBAAA;;oBAIxB,KAAK,YAAY,SAAM,kBAArDD,YAGM,OAAA;AAAA;sBAHD,OAAM;AAAA,sBAAiD,SAAO;AAAA,oBAAA;sBACpD,UAAA,SAAZD,UAAA,GAAAC,YAAiC,oBAAV,KAAG,MAC1BD,UAAA,GAAAC,YAAqB,oBAAR,GAAC;AAAA,oBAAA;oBAEjBC,YAAwF,SAAA;AAAA,sBAAjF,MAAK;AAAA,+BAAW;AAAA,sBAAJ,KAAI;AAAA,sBAAY,QAAA;AAAA,sBAAO,QAAO;AAAA,sBAAW,UAAQ;AAAA,oBAAA;;kBAEvEA,YAAiC,OAAA,EAA5B,OAAM,MAAA,GAAM,YAAU;AAAA,gBAAA;;;;;;;;;;;;;;;;;;;;;;;;QClFlC,SAAS;AAAA,QACV,OAAM;AAAA,QACN,OAAM;AAAA,QACL,eAAa;AAAA,QACd,eAAA;AAAA,QACC,qBAAOU,KAAAA,MAAK,OAAA;AAAA,MAAA;yBANf,CAwBY,GAAAC,QAAAC,UAAA,aAAA;;;;;cAhBVZ,YAeM,OAAA,EAfD,OAAM,qBAAiB;AAAA,gBAC1BA,YAEM,OAAA,EAFD,OAAM,kBAAc;AAAA,kBACvBA,YAAoC,QAAA,EAA9B,OAAM,eAAA,GAAe,IAAE;AAAA,gBAAA;gBAE/BA,YAA6C,KAAA,EAA1C,OAAM,OAAA,GAAO,2BAAyB;AAAA,gBAEzCA,YAGM,OAAA,EAHD,OAAM,kBAAc;AAAA,kBACvBA,YAAkC,OAAA,EAA7B,OAAM,aAAA,GAAa,MAAI;AAAA,kBAC5BA,YAA0C,OAAA,EAArC,OAAM,aAAA,GAAa,cAAY;AAAA,gBAAA;gBAGtCA,YAGM,OAAA,EAHD,OAAM,kBAAc;AAAA,kBACvBA,YAAkC,OAAA,EAA7B,OAAM,aAAA,GAAa,MAAI;AAAA,kBAC5BA,YAAgD,OAAA,EAA3C,OAAM,aAAA,GAAa,oBAAkB;AAAA,gBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyBlD,UAAM,QAAQ;AAEd,UAAM,eAAe,SAAS,MAAM,MAAM,iBAAiB,SAAS,EAAE;AACtE,UAAM,cAAc,SAAS,MAAM,MAAM,iBAAiB,gBAAgB,MAAM;AAChF,UAAM,WAAW,SAAS,MAAM,MAAM,YAAY,CAAC;AAGnD,UAAM,aAAa,SAAS,MAAM;AAChC,UAAI,CAAC,MAAM,aAAa,yBAAyB,CAAA;AACjD,aAAO,OAAO,OAAO,MAAM,YAAY,gBAAgB;AAAA,IACzD,CAAC;AAED,UAAM,cAAc,SAAS,MAAM;AAE/B,YAAM,IAAI,MAAM;AAChB,UAAI,MAAM,YAAY,MAAM,YAAa,QAAO;AAChD,UAAI,MAAM,sBAAsB,MAAM,YAAa,QAAO;AAC1D,UAAI,MAAM,eAAe,MAAM,cAAc,MAAM,WAAY,QAAO;AACtE,aAAO;AAAA,IACX,CAAC;;AAjEM,YAAA,OAAAT,eAAAC,WAAA,EAAA,OAAM,6BAAyB,MAAA,CAAA,CAAA,sEAAA;UAGrB,aAAA,OAAY;AAAG,cAAA,OAAAG,cAAA,OAAK,aAAA,KAAY,CAAA,uCAAA;AAAA;;;2HAOd,YAAA,KAAW,sCAGV,YAAA,OAAW,UAAA,CAAA;oBAET,WAAA,OAAU,CAA1B,MAAM,UAAK;6EACpB,IAAI,CAAA,SAAA;AAAA;iFAIqB,SAAA,KAAQ,CAAA,6EAAA;AAAA;;;;;;;;;;;;;;AC8N9C,UAAA,QAAA,SAAA;AACA,cAAA;AACA,UAAA,UAAA,MAAA,OAAA;AACA,UAAA,UAAA,IAAA,IAAA;AAEA,UAAA,EAAA,oBAAA,IAAA,aAAA;AACA,UAAA,EAAA,WAAA,IAAA,aAAA;AA2BA,UAAA,QAAA,IAAA,EAAA;AACA,UAAA,UAAA,IAAA,EAAA;AACA,UAAA,WAAA,IAAA,EAAA;AACA,UAAA,mBAAA,IAAA,EAAA;AAGA,UAAA,iBAAA,IAAA,IAAA;AACA,UAAA,uBAAA,IAAA,IAAA;AAGA,UAAA,aAAA,SAAA,MAAA;AACE,YAAA,IAAA,MAAA,MAAA;AACA,UAAA,MAAA,mBAAA,QAAA;AACA,UAAA,MAAA,SAAA,QAAA;AACA,UAAA,MAAA,YAAA,QAAA;AACA,UAAA,MAAA,WAAA,QAAA;AACA,aAAA,oBAAA,KAAA,EAAA;AAAA,IAAkC,CAAA;AAGpC,UAAA,sBAAA,SAAA,MAAA,qBAAA,OAAA,MAAA;AAEA,UAAA,gBAAA,SAAA,MAAA;AAEE,UAAA,CAAA,MAAA,MAAA,WAAA,QAAA;AAEA,YAAA,OAAA,IAAA,KAAA,MAAA,MAAA,UAAA,EAAA,QAAA,IAAA,KAAA,IAAA;AACA,UAAA,QAAA,EAAA,QAAA;AACA,aAAA,KAAA,KAAA,QAAA,MAAA,KAAA,KAAA,GAAA;AAAA,IAA6C,CAAA;AAG/C,UAAA,eAAA,CAAA,SAAA;AACE,UAAA,QAAA,EAAA,QAAA;AACA,UAAA,QAAA,EAAA,QAAA;AACA,aAAA;AAAA,IAAO;AAKT,UAAA,YAAA,SAAA,MAAA,MAAA,MAAA,cAAA,cAAA;AAEA,UAAA,WAAA,SAAA,MAAA;AACE,UAAA,UAAA,MAAA,QAAA;AACA,YAAA,IAAA,MAAA,MAAA;AACA,aAAA,CAAA,UAAA,SAAA,EAAA,SAAA,KAAA,EAAA;AAAA,IAA6C,CAAA;AAG/C,UAAA,YAAA,SAAA,MAAA;AACE,UAAA,UAAA,MAAA,QAAA;AACA,YAAA,IAAA,MAAA,MAAA;AAEA,aAAA,CAAA,oBAAA,QAAA,EAAA,SAAA,KAAA,EAAA;AAAA,IAAsD,CAAA;AAKxD,UAAA,aAAA,CAAA,QAAA,KAAA,MAAA,GAAA,EAAA,eAAA;AACA,UAAA,aAAA,CAAA,SAAA,MAAA,GAAA,QAAA,CAAA,EAAA,MAAA,GAAA,EAAA,CAAA,KAAA;AAGA,UAAA,kBAAA,CAAA,QAAA;AACE,UAAA,OAAA,CAAA;AAEA,UAAA,IAAA,UAAA,OAAA,IAAA,WAAA,UAAA;AACE,YAAA,MAAA,QAAA,IAAA,OAAA,MAAA,KAAA,IAAA,OAAA,OAAA,SAAA,GAAA;AACE,iBAAA,IAAA,OAAA,OAAA,OAAA,CAAA,MAAA,OAAA,MAAA,QAAA;AAAA,QAAiE,WAAA,OAAA,KAAA,IAAA,MAAA,EAAA,SAAA,GAAA;AAEjE,iBAAA,OAAA,KAAA,IAAA,MAAA;AAAA,QAA6B;AAAA,MAC/B;AAGF,UAAA,KAAA,WAAA,GAAA;AACE,cAAA,MAAA,IAAA,MAAA,KAAA,KAAA;AACA,YAAA,CAAA,IAAA,QAAA,CAAA;AACA,YAAA,UAAA,IAAA,QAAA,mBAAA,EAAA;AACA,eAAA,QAAA,MAAA,OAAA,EAAA,IAAA,CAAA,MAAA,EAAA,KAAA,CAAA,EAAA,OAAA,CAAA,MAAA,EAAA,SAAA,CAAA;AAAA,MAAyE;AAG3E,aAAA,KAAA,IAAA,CAAA,SAAA,EAAA,KAAA,OAAA,KAAA,OAAA,GAAA,EAAA;AAAA,IAAuD;AAIzD,UAAA,gBAAA,CAAA,SAAA;AACI,UAAA,CAAA,QAAA,CAAA,KAAA,OAAA,QAAA,CAAA;AACA,aAAA,QAAA,MAAA,KAAA,CAAA,MAAA,EAAA,OAAA,KAAA,MAAA,KAAA,CAAA;AAAA,IAAyD;AAG7D,UAAA,aAAA,IAAA,IAAA;AACA,UAAA,2BAAA,MAAA;AAAyC,iBAAA,OAAA,QAAA;AAAA,IAA0B;AAGnE,UAAA,aAAA,CAAA,MAAA,IAAA,WAAA,CAAA,IAAA;AAEA,UAAA,WAAA,CAAA,SAAA;AACE,UAAA,CAAA,KAAA;AACA,MAAA,SAAA,UAAA,UAAA,IAAA;AACA,gBAAA,QAAA,KAAA;AAAA,IAAuB;AAoDzB,UAAA,mBAAA,CAAA,eAAA;AAEI,uBAAA,QAAA;AAAA,IAAyB;AAG7B,UAAA,kBAAA,MAAA;AACI,gBAAA,QAAA,OAAA;AACA,eAAA;AAAA,IAAS;AAGb,UAAA,kBAAA,MAAA;AACI,eAAA;AAAA,IAAS;AAIb,UAAA,mBAAA,IAAA,KAAA;AACA,UAAA,kBAAA,IAAA,KAAA;AACA,UAAA,kBAAA,IAAA,KAAA;AACA,UAAA,mBAAA,IAAA,KAAA;AACA,QAAA,CAAA;AAEA,UAAA,WAAA,YAAA;AAEE,UAAA,CAAA,QAAA;AACA,cAAA,QAAA;AACA,UAAA;AAEE,cAAA,MAAA,MAAA,eAAA,eAAA,OAAA;AACA,YAAA,IAAA,WAAA,IAAA,MAAA;AACE,gBAAA,IAAA,IAAA;AACA,gBAAA,QAAA,EAAA,oBAAA,CAAA;AACA,gBAAA,QAAA,EAAA,gBAAA,CAAA;AAEA,gBAAA,QAAA;AAAA,YAAc,IAAA,EAAA;AAAA,YACN,UAAA,EAAA;AAAA,YACM,WAAA,EAAA;AAAA,YACC,QAAA,EAAA;AAAA,YACH,UAAA,EAAA;AAAA,YACE,aAAA,EAAA;AAAA,YACG,WAAA,EAAA;AAAA,YACF,YAAA,EAAA;AAAA,YACC,aAAA,MAAA,gBAAA;AAAA,YACqB,cAAA,MAAA,SAAA;AAAA,YACN,SAAA,MAAA,mBAAA,OAAA,OAAA,MAAA,gBAAA,EAAA,KAAA,GAAA,IAAA;AAAA,YACuD,kBAAA;AAAA,YAClE,cAAA;AAAA,UACJ;AAIhB,cAAA,EAAA,WAAA,MAAA,QAAA,EAAA,OAAA,GAAA;AAEE,oBAAA,QAAA,EAAA,QAAA,IAAA,CAAA,SAAA,EAAA,GAAA,IAAA,EAAA;AAGA,gBAAA,QAAA,MAAA,SAAA,GAAA;AACI,oBAAA,QAAA,QAAA,MAAA,CAAA;AACA,kBAAA,MAAA,aAAA;AACG,iCAAA,QAAA,MAAA,YAAA,SAAA,MAAA,YAAA,cAAA,MAAA,YAAA,gBAAA;AAAA,cAAsH;AAAA,YACzH;AAAA,UACJ;AAIF,cAAA,EAAA,YAAA,MAAA,QAAA,EAAA,QAAA,GAAA;AACI,qBAAA,QAAA,EAAA;AAAA,UAAmB,OAAA;AAEnB,qBAAA,QAAA,CAAA;AAAA,UAAkB;AAItB,cAAA,EAAA,WAAA,eAAA,EAAA,WAAA,YAAA,EAAA,WAAA,oBAAA;AACG,kBAAA,YAAA,MAAA,eAAA,iBAAA,OAAA;AACA,gBAAA,UAAA,WAAA,UAAA,MAAA;AACI,mCAAA,QAAA,UAAA;AAAA,YAAuC,OAAA;AAEvC,mCAAA,QAAA;AAAA,YAA6B;AAAA,UACjC;AASH,gBAAA,YAAA,MAAA,UAAA,QAAA,YAAA;AACA,cAAA,UAAA,WAAA,UAAA,MAAA;AACI,kBAAA,QAAA,UAAA,KAAA,KAAA,CAAA,MAAA,EAAA,aAAA,OAAA;AACA,gBAAA,OAAA;AACI,6BAAA,QAAA,MAAA;AAAA,YAA6B,OAAA;AAE7B,6BAAA,QAAA;AAAA,YAAuB;AAAA,UAC3B;AAAA,QACJ;AAAA,MAEF,SAAA,GAAA;AAEA,gBAAA,MAAA,CAAA;AAAA,MAAe,UAAA;AAEf,gBAAA,QAAA;AAAA,MAAgB;AAAA,IAClB;;;;;;;;;;;YA/foC;AAAA;;;;AAKC,YAAA,wLAAAF,eAAA,MAAA,MAAA,YAAA,KAAA,CAAA,SAAA;;;QACR,SAAA,CAAA,WAAA,SAAA,MAAA,MAAA,QAAA;AAAA,MAA2C,GAAA;AAAA;;;;;;YAAmB;AAAA;;;;;AAkB9D,UAAA,MAAA,MAAA,WAAA,YAAA,MAAA,MAAA,WAAA,aAAA;;;;;;;;cAA0E;AAAA;;;;;;;;;;;;cACzB;AAAA;;;;;;;;;;;;cACgC;AAAA;;;;;;;;;;;;cAClE;AAAA;;;;;;;AAO+D,cAAA,eAAAqB,eAAA,CAAA,aAAA,cAAA,KAAA,GAAA,YAAA,CAAA,CAAA,oBAAA;;;;;;;;cACtE;AAAA;;;;;MAA8B,OAAA;;;;AAKrC,UAAA,MAAA,MAAA,WAAA,aAAA;;MAA4D,WAAA,MAAA,MAAA,WAAA,oBAAA;;;;MAEe,OAAA;;MACvC;;;;;;;;;YAU/B;AAAA;;;;;;;;;;;;;;cAKA;AAAA;;;;;;;;;;;;;;cAGA;AAAA;;;;;;;;;;;;;;;cAKA;AAAA;;;;;;;;;;;;;;;;;cAMI;AAAA;;;;;;;;;;;;;;cAIN;AAAA;;;;;;;;;;;QAkBrB,oBAAA,MAAA,MAAA;AAAA,QACmB,gBAAA,MAAA,MAAA;AAAA,QACJ,UAAA,MAAA,MAAA;AAAA,QACJ,gBAAA,MAAA,MAAA;AAAA,MACI,GAAA,MAAA,OAAA,CAAA;;;AAWL,YAAA,MAAA,MAAA,cAAA,kBAAA;;;;AAIE,gBAAA,SAAA,MAAA,SAAA,GAAA;;YACyB,OAAA;;;;;cAKJ,cAAA,KAAA;AAAA,YACX,GAAA,MAAA,OAAA,CAAA;;;;;AAOP,gBAAAlB,mBAAA,gBAAA,EAAA,YAAA,QAAA,MAAA,GAAA,MAAA,OAAA,CAAA;AAAA,QAAiB,WAAA,MAAA,MAAA,cAAA,aAAA,QAAA,MAAA,SAAA,GAAA;;;;YAOX,gBAAA,MAAA,MAAA,UAAA;AAAA,YACQ,cAAA,gBAAA,QAAA,MAAA,CAAA,CAAA;AAAA,YACS,UAAA,QAAA,MAAA,CAAA,EAAA;AAAA,YAChB,iBAAA;AAAA,UACH,GAAA,MAAA,OAAA,CAAA;;;YAIb,KAAA;AAAA,YAAA,YAAA,MAAA,MAAA,MAAA;AAAA,YACe,iBAAA,QAAA,MAAA,CAAA,EAAA;AAAA,UACQ,GAAA,MAAA,OAAA,CAAA;;;;;;;;;;;AAYrB,cAAAA,mBAAA,oBAAA,EAAA,OAAA,cAAA,GAAA;AAAA,UAAmB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAU;AAAA;;;;AAMhC,cAAA,6JAAAF,cAAA,OAAA,iBAAA,KAAA,CAAA,yHAAA;;;;;;;;cAIe;AAAA;;;;;;;;;AAUtB,UAAA,MAAA,MAAA,IAAA;;;UACG,uBAAA,CAAA,WAAA,iBAAA,QAAA;AAAA,UAAgB,YAAA,MAAA,MAAA;AAAA,UACR,WAAA;AAAA,QACP,GAAA,MAAA,OAAA,CAAA;AAAA;;;AAIJ,UAAA,MAAA,MAAA,IAAA;;;UACG,uBAAA,CAAA,WAAA,gBAAA,QAAA;AAAA,UAAe,YAAA,MAAA,MAAA;AAAA,UACP,YAAA,MAAA,MAAA;AAAA,UACA,WAAA;AAAA,QACP,GAAA,MAAA,OAAA,CAAA;AAAA;;;;;;UAKO,cAAA,EAAA,UAAA,MAAA,MAAA,YAAA,IAAA,cAAA,MAAA,MAAA,kBAAA,gBAAA,GAAA;AAAA,UACgF,SAAA,CAAA,WAAA,gBAAA,QAAA;AAAA,UAC1E,WAAA;AAAA,QACb,GAAA,MAAA,OAAA,CAAA;AAAA;;;;;;QAKc,GAAA,MAAA,OAAA,CAAA;AAAA;;;;;;;;;;;;;;"}