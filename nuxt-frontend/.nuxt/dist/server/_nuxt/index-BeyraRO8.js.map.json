{"file":"index-BeyraRO8.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_unref","Plus","Refresh","_createTextVNode","_toDisplayString","_createVNode","_openBlock","_createBlock","_ssrRenderList","_Fragment","_renderList","_ssrRenderComponent","_withCtx"],"sources":["../../../../api/admin/backend-user.ts","../../../../pages/_mgmt_9Xfa3/users/accounts/index.vue"],"sourcesContent":["/**\n * 后台用户管理 API\n * 遵循 api/admin/ 规范\n */\n\nimport { getAdminSupabaseClient } from '@/utils/supabase-admin'\nimport type { AdminDepartment } from './department'\n\n// ========================================\n// 类型定义\n// ========================================\n\nexport interface AdminBackendUser {\n    id: string\n    name: string\n    email: string\n    department_id: string | null\n    status: 'enabled' | 'disabled'\n    created_at: string\n    auth_user_id: string | null\n    department?: AdminDepartment\n}\n\n// ========================================\n// 后台用户管理 API\n// ========================================\n\nexport const adminBackendUserApi = {\n    /**\n     * 获取后台用户列表\n     */\n    async getUsers(): Promise<{ success: boolean; users: AdminBackendUser[]; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        const { data, error } = await client\n            .from('admin_users')\n            .select(`\n                *,\n                department:admin_departments(id, name, permissions)\n            `)\n            .order('created_at', { ascending: false })\n\n        if (error) {\n            return { success: false, users: [], error: error.message }\n        }\n\n        return { success: true, users: data || [] }\n    },\n\n    /**\n     * 创建后台用户\n     * 1. 创建 Supabase Auth 用户（支持密码登录）\n     * 2. 创建 admin_users 记录并关联 auth_user_id\n     */\n    async createUser(data: {\n        name: string\n        email: string\n        password: string\n        department_id?: string\n        status?: 'enabled' | 'disabled'\n    }): Promise<{ success: boolean; user?: AdminBackendUser; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // Step 1: 使用 Supabase Admin API 创建 Auth 用户\n        const { data: authData, error: authError } = await client.auth.admin.createUser({\n            email: data.email,\n            password: data.password,\n            email_confirm: true,  // 跳过邮箱验证，直接确认\n            user_metadata: {\n                name: data.name,\n                role: 'admin'\n            }\n        })\n\n        if (authError) {\n            // 处理常见错误\n            if (authError.message.includes('already been registered')) {\n                return { success: false, error: '该邮箱已被注册' }\n            }\n            return { success: false, error: `创建认证用户失败: ${authError.message}` }\n        }\n\n        if (!authData.user) {\n            return { success: false, error: '创建认证用户失败：未返回用户信息' }\n        }\n\n        // 计算密码哈希（用于兼容数据库 password_hash 非空约束）\n        const encoder = new TextEncoder()\n        const hashBuffer = await crypto.subtle.digest('SHA-256', encoder.encode(data.password))\n        const hashArray = Array.from(new Uint8Array(hashBuffer))\n        const password_hash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n\n        // Step 2: 创建 admin_users 记录，关联 auth_user_id\n        const { data: user, error } = await client\n            .from('admin_users')\n            .insert({\n                name: data.name,\n                email: data.email,\n                password_hash,  // 保留以兼容数据库约束\n                auth_user_id: authData.user.id,  // 关键：关联 Auth 用户\n                department_id: data.department_id ?? null,\n                status: data.status ?? 'enabled',\n            })\n            .select()\n            .single()\n\n        if (error) {\n            // 回滚：删除已创建的 Auth 用户\n            await client.auth.admin.deleteUser(authData.user.id)\n            return { success: false, error: `创建管理员记录失败: ${error.message}` }\n        }\n\n        return { success: true, user }\n    },\n\n\n    /**\n     * 更新后台用户\n     */\n    async updateUser(id: string, data: {\n        name?: string\n        email?: string\n        department_id?: string\n        status?: 'enabled' | 'disabled'\n    }): Promise<{ success: boolean; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        const { error } = await client\n            .from('admin_users')\n            .update(data)\n            .eq('id', id)\n\n        if (error) {\n            return { success: false, error: error.message }\n        }\n\n        return { success: true }\n    },\n\n    /**\n     * 删除后台用户\n     * 1. 获取 auth_user_id\n     * 2. 删除 admin_users 记录\n     * 3. 删除 Supabase Auth 用户\n     */\n    async deleteUser(id: string): Promise<{ success: boolean; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // Step 1: 获取用户的 auth_user_id\n        const { data: adminUser, error: fetchError } = await client\n            .from('admin_users')\n            .select('auth_user_id')\n            .eq('id', id)\n            .single()\n\n        if (fetchError) {\n            return { success: false, error: `获取用户信息失败: ${fetchError.message}` }\n        }\n\n        const authUserId = adminUser?.auth_user_id\n\n        // Step 2: 删除 admin_users 记录\n        const { error } = await client\n            .from('admin_users')\n            .delete()\n            .eq('id', id)\n\n        if (error) {\n            return { success: false, error: error.message }\n        }\n\n        // Step 3: 删除 Supabase Auth 用户（如果存在）\n        if (authUserId) {\n            const { error: authDeleteError } = await client.auth.admin.deleteUser(authUserId)\n            if (authDeleteError) {\n                console.warn(`删除 Auth 用户失败 (${authUserId}):`, authDeleteError.message)\n                // 不阻断流程，只记录警告\n            }\n        }\n\n        return { success: true }\n    },\n}\n\n","<template>\n  <div class=\"page-container\">\n    <PageTipHeader \n      title=\"用户管理\" \n      description=\"管理后台管理员账号，分配部门与权限\"\n    />\n\n    <AdminActionCard>\n      <template #actions>\n        <el-button :icon=\"Refresh\" @click=\"loadUsers\">刷新</el-button>\n        <el-button type=\"primary\" :icon=\"Plus\" @click=\"openAddUserDialog\">新增用户</el-button>\n      </template>\n    </AdminActionCard>\n\n    <div v-if=\"initLoading\" class=\"skeleton-container\">\n      <el-skeleton animated :rows=\"10\" />\n    </div>\n\n    <AdminDataTable\n      v-else\n      :loading=\"loading\"\n      :data=\"users\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"selection\" width=\"55\" />\n      <el-table-column prop=\"name\" label=\"用户名称\" min-width=\"150\" />\n      <el-table-column prop=\"email\" label=\"绑定邮箱\" min-width=\"200\" show-overflow-tooltip />\n      <el-table-column label=\"所属部门\" width=\"180\" align=\"center\">\n        <template #default=\"{ row }\">\n          <el-tag v-if=\"row.department\" :type=\"row.department?.name === '超级管理员' ? 'danger' : ''\">\n            {{ row.department?.name || '无部门' }}\n          </el-tag>\n          <span v-else class=\"text-gray\">无部门</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\" width=\"120\" align=\"center\">\n        <template #default=\"{ row }\">\n          <el-switch \n            v-model=\"row.status\" \n            active-value=\"enabled\"\n            inactive-value=\"disabled\"\n            :loading=\"row.statusLoading\"\n            @change=\"handleUserStatusChange(row)\" \n          />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" width=\"180\" align=\"center\">\n        <template #default=\"{ row }\">\n          {{ formatDate(row.created_at) }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"150\" fixed=\"right\" align=\"center\">\n        <template #default=\"{ row }\">\n          <el-button link type=\"primary\" @click=\"openEditUserDialog(row)\">编辑</el-button>\n          <el-popconfirm \n            :title=\"`确认删除用户 '${row.name}' 吗？`\"\n            @confirm=\"handleDeleteUser(row)\"\n          >\n            <template #reference>\n              <el-button link type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </AdminDataTable>\n\n    <!-- 用户新增/编辑弹窗 -->\n    <el-dialog v-model=\"userDialogVisible\" :title=\"isEditUser ? '编辑用户' : '新增用户'\" width=\"500px\" @closed=\"resetUserForm\">\n      <el-form :model=\"userForm\" :rules=\"userRules\" ref=\"userFormRef\" label-width=\"80px\">\n        <el-form-item label=\"用户名称\" prop=\"name\">\n          <el-input v-model=\"userForm.name\" placeholder=\"请输入用户名称\" />\n        </el-form-item>\n        <el-form-item label=\"绑定邮箱\" prop=\"email\">\n          <el-input v-model=\"userForm.email\" placeholder=\"请输入邮箱地址\" :disabled=\"isEditUser\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" v-if=\"!isEditUser\">\n          <el-input v-model=\"userForm.password\" type=\"password\" placeholder=\"请输入密码\" show-password />\n        </el-form-item>\n        <el-form-item label=\"所属部门\" prop=\"department_id\">\n          <el-select v-model=\"userForm.department_id\" placeholder=\"请选择部门\" style=\"width: 100%;\">\n            <el-option v-for=\"dept in departments\" :key=\"dept.id\" :label=\"dept.name\" :value=\"dept.id\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\">\n          <el-radio-group v-model=\"userForm.status\">\n            <el-radio value=\"enabled\">启用</el-radio>\n            <el-radio value=\"disabled\">禁用</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"userDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitUserForm\" :loading=\"submitting\">确认</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, onMounted } from 'vue'\nimport { Plus, Refresh } from '@element-plus/icons-vue'\nimport { ElMessage, type FormInstance, type FormRules } from 'element-plus'\nimport { adminBackendUserApi, adminDepartmentApi, type AdminBackendUser, type AdminDepartment } from '@/api/admin'\nimport { useBizFormat } from '@/composables/common/useBizFormat'\n\ndefineOptions({\n  name: 'UserAccounts'\n})\n\ndefinePageMeta({\n  title: '用户管理'\n})\n\nconst { formatDate } = useBizFormat()\n\n// --- State ---\nconst initLoading = ref(true)\nconst loading = ref(false)\nconst submitting = ref(false)\n\nconst users = ref<(AdminBackendUser & { statusLoading?: boolean })[]>([])\nconst departments = ref<AdminDepartment[]>([])\nconst selectedIds = ref<string[]>([])\n\n// Dialogs\nconst userDialogVisible = ref(false)\nconst isEditUser = ref(false)\n\n// User Form\nconst userFormRef = ref<FormInstance>()\nconst userForm = reactive({\n  id: '',\n  name: '',\n  email: '',\n  password: '',\n  department_id: '',\n  status: 'enabled' as 'enabled' | 'disabled'\n})\n\nconst userRules = reactive<FormRules>({\n  name: [{ required: true, message: '请输入名称', trigger: 'blur' }],\n  email: [\n    { required: true, message: '请输入邮箱', trigger: 'blur' }, \n    { type: 'email', message: '邮箱格式不正确', trigger: 'blur' }\n  ],\n  password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n  department_id: [{ required: true, message: '请选择部门', trigger: 'change' }]\n})\n\n// --- Load Data ---\nconst loadUsers = async () => {\n  loading.value = true\n  try {\n    const result = await adminBackendUserApi.getUsers()\n    if (result.success) {\n      users.value = result.users\n    }\n  } catch (e: any) {\n    ElMessage.error(e.message || '加载用户失败')\n  } finally {\n    loading.value = false\n    initLoading.value = false\n  }\n}\n\nconst loadDepartments = async () => {\n  try {\n    const result = await adminDepartmentApi.getDepartments()\n    if (result.success) {\n      departments.value = result.departments\n    }\n  } catch (e: any) {\n    ElMessage.error(e.message || '加载部门失败')\n  }\n}\n\n// --- Selection ---\nconst handleSelectionChange = (rows: AdminBackendUser[]) => {\n  selectedIds.value = rows.map(r => r.id)\n}\n\n// --- User Logic ---\nconst openAddUserDialog = async () => {\n  isEditUser.value = false\n  userForm.id = ''\n  userForm.name = ''\n  userForm.email = ''\n  userForm.password = ''\n  userForm.department_id = ''\n  userForm.status = 'enabled'\n  userDialogVisible.value = true\n  // 刷新部门列表以获取最新数据\n  await loadDepartments()\n}\n\n\nconst openEditUserDialog = (row: AdminBackendUser) => {\n  isEditUser.value = true\n  userForm.id = row.id\n  userForm.name = row.name\n  userForm.email = row.email\n  userForm.password = ''\n  userForm.department_id = row.department_id || ''\n  userForm.status = row.status\n  userDialogVisible.value = true\n}\n\nconst submitUserForm = async () => {\n  if (!userFormRef.value) return\n  \n  // 编辑模式下密码不是必填\n  if (isEditUser.value) {\n    userRules.password = []\n  } else {\n    userRules.password = [{ required: true, message: '请输入密码', trigger: 'blur' }]\n  }\n  \n  const valid = await userFormRef.value.validate().catch(() => false)\n  if (!valid) return\n\n  submitting.value = true\n  try {\n    if (isEditUser.value) {\n      const result = await adminBackendUserApi.updateUser(userForm.id, {\n        name: userForm.name,\n        department_id: userForm.department_id,\n        status: userForm.status,\n      })\n      if (result.success) {\n        ElMessage.success('更新成功')\n        userDialogVisible.value = false\n        await loadUsers()\n      } else {\n        ElMessage.error(result.error || '更新失败')\n      }\n    } else {\n      const result = await adminBackendUserApi.createUser({\n        name: userForm.name,\n        email: userForm.email,\n        password: userForm.password,\n        department_id: userForm.department_id,\n        status: userForm.status,\n      })\n      if (result.success) {\n        ElMessage.success('添加成功')\n        userDialogVisible.value = false\n        await loadUsers()\n      } else {\n        ElMessage.error(result.error || '添加失败')\n      }\n    }\n  } catch (e: any) {\n    ElMessage.error(e.message || '操作失败')\n  } finally {\n    submitting.value = false\n  }\n}\n\nconst resetUserForm = () => {\n  if (userFormRef.value) userFormRef.value.resetFields()\n}\n\nconst handleUserStatusChange = async (row: AdminBackendUser & { statusLoading?: boolean }) => {\n  row.statusLoading = true\n  try {\n    const result = await adminBackendUserApi.updateUser(row.id, { status: row.status })\n    if (result.success) {\n      ElMessage.success(row.status === 'enabled' ? '用户已启用' : '用户已停用')\n    } else {\n      row.status = row.status === 'enabled' ? 'disabled' : 'enabled'\n      ElMessage.error(result.error || '操作失败')\n    }\n  } catch (e: any) {\n    row.status = row.status === 'enabled' ? 'disabled' : 'enabled'\n    ElMessage.error(e.message || '操作失败')\n  } finally {\n    row.statusLoading = false\n  }\n}\n\nconst handleDeleteUser = async (row: AdminBackendUser) => {\n  const result = await adminBackendUserApi.deleteUser(row.id)\n  if (result.success) {\n    ElMessage.success('删除成功')\n    await loadUsers()\n  } else {\n    ElMessage.error(result.error || '删除失败')\n  }\n}\n\n// --- Init ---\nonMounted(async () => {\n  await loadDepartments()\n  await loadUsers()\n})\n</script>\n\n<style scoped>\n.text-gray { \n  color: var(--admin-text-secondary); \n}\n\n.skeleton-container {\n  padding: 24px;\n  background: #fff;\n  border-radius: 4px;\n}\n</style>\n"],"version":3}