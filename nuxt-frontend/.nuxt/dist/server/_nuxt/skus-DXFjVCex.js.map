{"version":3,"file":"skus-DXFjVCex.js","sources":["../../../../api/admin/sku.ts","../../../../composables/admin/useAdminGlobalSkuList.ts","../../../../pages/_mgmt_9Xfa3/products/skus.vue"],"sourcesContent":["\nimport { getAdminSupabaseClient } from '@/utils/supabase-admin'\n\nexport interface SharedSkuGroup {\n    tag: number\n    tag_name: string\n    created_at: string\n    skus: any[]\n}\n\nexport const adminSkuApi = {\n    /**\n     * 获取所有物理 SKU (用于 SKU 管理页)\n     */\n    async getAllSkus(params?: { showUnlinkedOnly?: boolean }): Promise<{ success: boolean; skus?: any[]; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // Base query: Only select PRIVATE SKUs (tag is null)\n        // Shared SKUs are managed in Shared Group page\n        let query = client.from('product_skus')\n            .select('*, product_sku_map(product_id)', { count: 'exact' })\n            .is('tag', null)\n\n        const { data, error } = await query\n        if (error) return { success: false, error: error.message }\n\n        // Process data to determine linkage\n        let skus = data.map(sku => {\n            const mappings = sku.product_sku_map || []\n            return {\n                ...sku,\n                is_linked: mappings.length > 0,\n                linked_count: mappings.length\n            }\n        })\n\n        if (params?.showUnlinkedOnly) {\n            skus = skus.filter(s => !s.is_linked)\n        }\n\n        // Sort by created_at desc\n        skus.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())\n\n        return { success: true, skus }\n    },\n\n    /**\n     * 批量删除 SKU (物理删除)\n     * 强制解除关联: CDK映射, 商品映射\n     */\n    async deleteSkus(ids: string[]): Promise<{ success: boolean; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // 1. 解除 CDK 关联 (cdk_sku_map)\n        await client.from('cdk_sku_map').delete().in('sku_id', ids)\n\n        // 2. 解除商品关联 (product_sku_map)\n        await client.from('product_sku_map').delete().in('sku_id', ids)\n\n        // 3. 删除物理 SKU\n        const { error } = await client.from('product_skus').delete().in('id', ids)\n\n        if (error) return { success: false, error: error.message }\n        return { success: true }\n    },\n\n    /**\n     * 获取共享 SKU 组\n     */\n    /**\n     * 获取共享 SKU 组\n     * 逻辑更改: 直接从 product_skus 表根据 tag 字段聚合，不再依赖 shared_sku_groups 表\n     */\n    async getSharedSkuGroups(): Promise<{ success: boolean; groups: SharedSkuGroup[]; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // 1. Get all SKUs with tags\n        const { data: skus, error } = await client\n            .from('product_skus')\n            .select('*')\n            .not('tag', 'is', null)\n            .order('tag', { ascending: true })\n            .order('sort_order', { ascending: true })\n\n        if (error) return { success: false, groups: [], error: error.message }\n        if (!skus || skus.length === 0) return { success: true, groups: [] }\n\n        // 2. Group by tag\n        const groupsMap = new Map<number, SharedSkuGroup>()\n\n        skus.forEach(sku => {\n            const tag = sku.tag\n            if (!groupsMap.has(tag)) {\n                groupsMap.set(tag, {\n                    tag: tag,\n                    // Use the tag_name from the first SKU found in this group\n                    tag_name: sku.tag_name || `Group #${tag}`,\n                    created_at: sku.created_at,\n                    skus: []\n                })\n            }\n            groupsMap.get(tag)!.skus.push(sku)\n        })\n\n        return { success: true, groups: Array.from(groupsMap.values()) }\n    },\n\n    /**\n     * 获取使用某共享组的所有商品 (用于查看)\n     */\n    async getProductsBySharedTag(tag: number): Promise<{ success: boolean; products?: any[]; error?: string }> {\n        const client = getAdminSupabaseClient()\n\n        // 连表查询: product_sku_map -> product_skus (filter tag) -> products\n        // 但更简单的逻辑是: 找出所有 tag=target 的 SKU ID -> 查 map -> 查 products\n        // 或者利用 Supabase 的深度关联查询\n\n        // Step 1: Find all SKU IDs for this tag\n        const { data: skus } = await client\n            .from('product_skus')\n            .select('id')\n            .eq('tag', tag)\n\n        if (!skus || !skus.length) return { success: true, products: [] }\n        const skuIds = skus.map(s => s.id)\n\n        // Step 2: Find all product_ids from map\n        const { data: maps, error: mapError } = await client\n            .from('product_sku_map')\n            .select('product_id')\n            .in('sku_id', skuIds)\n\n        if (mapError) return { success: false, error: mapError.message }\n        if (!maps || !maps.length) return { success: true, products: [] }\n\n        // Deduplicate product IDs\n        const productIds = [...new Set(maps.map(m => m.product_id))]\n\n        // Step 3: Fetch products\n        const { data: products, error: prodError } = await client\n            .from('products')\n            .select('id, product_name, image, display_price, status')\n            .in('id', productIds)\n\n        if (prodError) return { success: false, error: prodError.message }\n        return { success: true, products: products || [] }\n    }\n}\n","\nimport { ref, onMounted } from 'vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { adminSkuApi } from '@/api/admin/sku'\nimport { useBizConfig } from '@/composables/common/useBizConfig'\n\nexport function useAdminGlobalSkuList() {\n    const loading = ref(false)\n    const skus = ref<any[]>([])\n    const filterMode = ref<'all' | 'unlinked'>('unlinked')\n    const selectedIds = ref<string[]>([])\n\n    // Load\n    const loadSkus = async () => {\n        loading.value = true\n        selectedIds.value = [] // Reset selection\n        try {\n            const res = await adminSkuApi.getAllSkus({\n                showUnlinkedOnly: filterMode.value === 'unlinked'\n            })\n            if (res.success) {\n                skus.value = res.skus || []\n            } else {\n                ElMessage.error(res.error || '加载失败')\n            }\n        } catch (e: any) {\n            ElMessage.error(e.message || '系统错误')\n        } finally {\n            loading.value = false\n        }\n    }\n\n    const handleFilterChange = () => {\n        loadSkus()\n    }\n\n    // Delete\n    const handleDelete = (row: any) => {\n        ElMessageBox.confirm('确认删除此 SKU (包含解除相关联的所有 CDK/商品绑定)？', '删除确认', {\n            type: 'warning',\n            confirmButtonText: '确定删除',\n            cancelButtonText: '取消'\n        }).then(async () => {\n            const res = await adminSkuApi.deleteSkus([row.id])\n            if (res.success) {\n                ElMessage.success('删除成功')\n                loadSkus()\n            } else {\n                ElMessage.error(res.error)\n            }\n        })\n    }\n\n    const handleBulkDelete = () => {\n        if (!selectedIds.value.length) return\n        ElMessageBox.confirm(`确认批量删除 ${selectedIds.value.length} 个 SKU (强制解绑所有关联)？`, '高风险操作', {\n            type: 'error',\n            confirmButtonText: '确定删除',\n            cancelButtonText: '取消'\n        }).then(async () => {\n            const res = await adminSkuApi.deleteSkus(selectedIds.value)\n            if (res.success) {\n                ElMessage.success('批量删除成功')\n                loadSkus()\n            } else {\n                ElMessage.error(res.error)\n            }\n        })\n    }\n\n    const handleSelectionChange = (val: any[]) => {\n        selectedIds.value = val.map(v => v.id)\n    }\n\n    // Utils\n    const formatDate = (str: string) => str ? new Date(str).toLocaleString('zh-CN', { fontSize: '12px' }) : '-'\n\n\n    const { getProductTypeLabel, getProductTypeTag } = useBizConfig()\n\n    onMounted(() => {\n        loadSkus()\n    })\n\n    return {\n        loading,\n        skus,\n        filterMode,\n        selectedIds,\n        loadSkus,\n        handleFilterChange,\n        handleDelete,\n        handleBulkDelete,\n        handleSelectionChange,\n        formatDate,\n        getProductTypeLabel,\n        getProductTypeTag\n    }\n}\n","<template>\n  <div class=\"skus-page\">\n     <PageTipHeader title=\"此处显示所有 SKU 物理数据。删除 SKU 将自动解除它与所有商品和CDK的关联，请谨慎操作。\" type=\"warning\" />\n\n     <!-- Action Bar -->\n     <AdminActionCard>\n        <template #default>\n           <div class=\"filter-group\">\n              <el-radio-group v-model=\"filterMode\" @change=\"handleFilterChange\">\n                 <el-radio-button label=\"all\">全部</el-radio-button>\n                 <el-radio-button label=\"unlinked\">未连接</el-radio-button>\n              </el-radio-group>\n           </div>\n        </template>\n        \n        <template #actions>\n           <el-button @click=\"loadSkus\" :icon=\"Refresh\">刷新</el-button>\n           <el-button \n             type=\"danger\" \n             :icon=\"Delete\" \n             :disabled=\"!selectedIds.length\"\n             @click=\"handleBulkDelete\"\n           >\n             批量删除\n           </el-button>\n        </template>\n     </AdminActionCard>\n\n     <!-- Data Table -->\n     <AdminDataTable \n        ref=\"adminTableRef\"\n        :data=\"skus\" \n        :loading=\"loading\"\n        @selection-change=\"handleSelectionChange\"\n     >\n        <el-table-column type=\"selection\" width=\"55\" />\n        \n        <el-table-column label=\"SKU 规格\" width=\"280\">\n           <template #default=\"{ row }\">\n               <div class=\"sku-cell\">\n                   <el-image \n                     v-if=\"row.image\" \n                     :src=\"row.image\" \n                     class=\"sku-thumb\" \n                     :preview-src-list=\"[row.image]\" \n                     preview-teleported\n                   />\n                   <div class=\"sku-info\">\n                       <!-- Specs Tags Only -->\n                       <div class=\"sku-specs\">\n                           <el-tag v-if=\"row.tag_name\" size=\"small\" type=\"info\" effect=\"plain\" style=\"margin-right:4px\">{{ row.tag_name }}</el-tag>\n                           <el-tag \n                             v-for=\"(val, key) in (row.spec_combination || {})\" \n                             :key=\"key\"\n                             size=\"small\"\n                             effect=\"plain\"\n                             style=\"margin-right:4px\"\n                           >\n                             {{ key }}: {{ val }}\n                           </el-tag>\n                       </div>\n                   </div>\n               </div>\n           </template>\n        </el-table-column>\n\n        <el-table-column label=\"类型\" width=\"100\" align=\"center\">\n            <template #default=\"{ row }\">\n                <el-tag :type=\"getProductTypeTag(row.product_type)\">{{ getProductTypeLabel(row.product_type) }}</el-tag>\n            </template>\n        </el-table-column>\n\n        <el-table-column label=\"绑定商品\" min-width=\"200\">\n            <template #default=\"{ row }\">\n               <div v-if=\"row.is_linked\" class=\"linked-products\">\n                   <el-tag type=\"success\" effect=\"plain\" size=\"small\">已绑定 {{ row.linked_count }} 个商品</el-tag>\n               </div>\n               <div v-else>\n                   <el-tag type=\"danger\" effect=\"plain\" size=\"small\">未绑定</el-tag>\n               </div>\n            </template>\n        </el-table-column>\n\n        <el-table-column label=\"库存\" width=\"100\" align=\"center\">\n            <template #default=\"{ row }\">\n                <span>{{ row.stock_count !== undefined ? row.stock_count : '-' }}</span>\n            </template>\n        </el-table-column>\n\n        <el-table-column label=\"创建时间\" width=\"180\" align=\"center\">\n            <template #default=\"{ row }\">\n                <span class=\"time-text\">{{ formatDate(row.created_at) }}</span>\n            </template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"100\" align=\"center\" fixed=\"right\">\n            <template #default=\"{ row }\">\n                <el-button \n                   type=\"danger\" \n                   link \n                   size=\"small\" \n                   @click=\"handleDelete(row)\"\n                >删除</el-button>\n            </template>\n        </el-table-column>\n\n     </AdminDataTable>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Refresh, Delete } from '@element-plus/icons-vue'\nimport AdminActionCard from '@/components/admin/base/AdminActionCard.vue'\nimport AdminDataTable from '@/components/admin/base/AdminDataTable.vue'\nimport PageTipHeader from '@/components/admin/base/PageTipHeader.vue'\nimport { useAdminGlobalSkuList } from '@/composables/admin/useAdminGlobalSkuList'\n\nconst {\n    loading,\n    skus,\n    filterMode,\n    selectedIds,\n    loadSkus,\n    handleFilterChange,\n    handleDelete,\n    handleBulkDelete,\n    handleSelectionChange,\n    formatDate,\n    getProductTypeLabel,\n    getProductTypeTag\n} = useAdminGlobalSkuList()\n\n</script>\n\n<style scoped>\n.skus-page { height: 100%; display: flex; flex-direction: column; }\n.sku-cell { display: flex; align-items: center; gap: 10px; }\n.sku-thumb { width: 40px; height: 40px; border-radius: 4px; border: 1px solid #eee; background: #f5f7fa; }\n.sku-info { display: flex; flex-direction: column; gap: 2px; }\n.sku-id { font-size: 11px; color: #999; font-family: monospace; }\n.sku-specs { display: flex; flex-wrap: wrap; gap: 4px; }\n.linked-products { display: flex; flex-direction: column; gap: 4px; }\n.product-names { font-size: 13px; font-weight: 500; }\n.orphan-text { font-size: 12px; color: #f56c6c; margin-left: 5px; }\n.time-text { font-size: 12px; color: #666; }\n</style>\n"],"names":["skus","_ssrRenderAttrs","_mergeProps","_isRef","_unref","_ssrRenderComponent","_withCtx","_createTextVNode","_createVNode","Refresh","Delete","_ssrInterpolate","_ssrRenderList","_openBlock","_createBlock","_createCommentVNode","_toDisplayString"],"mappings":"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"}