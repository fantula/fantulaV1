{"version":3,"file":"index-B-o0CD59.js","sources":["../../../../node_modules/element-plus/es/hooks/use-lockscreen/index.mjs"],"sourcesContent":["import { isRef, computed, watch, onScopeDispose } from 'vue';\nimport { useNamespace } from '../use-namespace/index.mjs';\nimport { throwError } from '../../utils/error.mjs';\nimport { hasClass, addClass, getStyle, removeClass } from '../../utils/dom/style.mjs';\nimport { getScrollBarWidth } from '../../utils/dom/scroll.mjs';\n\nconst useLockscreen = (trigger, options = {}) => {\n  if (!isRef(trigger)) {\n    throwError(\n      \"[useLockscreen]\",\n      \"You need to pass a ref param to this function\"\n    );\n  }\n  const ns = options.ns || useNamespace(\"popup\");\n  const hiddenCls = computed(() => ns.bm(\"parent\", \"hidden\"));\n  let scrollBarWidth = 0;\n  let withoutHiddenClass = false;\n  let bodyWidth = \"0\";\n  let cleaned = false;\n  const cleanup = () => {\n    if (cleaned)\n      return;\n    cleaned = true;\n    setTimeout(() => {\n      if (typeof document === \"undefined\")\n        return;\n      if (withoutHiddenClass && document) {\n        document.body.style.width = bodyWidth;\n        removeClass(document.body, hiddenCls.value);\n      }\n    }, 200);\n  };\n  watch(trigger, (val) => {\n    if (!val) {\n      cleanup();\n      return;\n    }\n    cleaned = false;\n    withoutHiddenClass = !hasClass(document.body, hiddenCls.value);\n    if (withoutHiddenClass) {\n      bodyWidth = document.body.style.width;\n      addClass(document.body, hiddenCls.value);\n    }\n    scrollBarWidth = getScrollBarWidth(ns.namespace.value);\n    const bodyHasOverflow = document.documentElement.clientHeight < document.body.scrollHeight;\n    const bodyOverflowY = getStyle(document.body, \"overflowY\");\n    if (scrollBarWidth > 0 && (bodyHasOverflow || bodyOverflowY === \"scroll\") && withoutHiddenClass) {\n      document.body.style.width = `calc(100% - ${scrollBarWidth}px)`;\n    }\n  });\n  onScopeDispose(() => cleanup());\n};\n\nexport { useLockscreen };\n//# sourceMappingURL=index.mjs.map\n"],"names":[],"mappings":";;;AAMA,MAAM,gBAAgB,CAAC,SAAS,UAAU,OAAO;AAC/C,MAAI,CAAC,MAAM,OAAO,GAAG;AACnB;AAAA,MACE;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACA,QAAM,KAAK,QAAQ,MAAM,aAAa,OAAO;AAC7C,QAAM,YAAY,SAAS,MAAM,GAAG,GAAG,UAAU,QAAQ,CAAC;AAC1D,MAAI,iBAAiB;AACrB,MAAI,qBAAqB;AAEzB,MAAI,UAAU;AACd,QAAM,UAAU,MAAM;AACpB,QAAI;AACF;AACF,cAAU;AACV,eAAW,MAAM;AAEb;AAAA,IAKJ,GAAG,GAAG;AAAA,EACR;AACA,QAAM,SAAS,CAAC,QAAQ;AACtB,QAAI,CAAC,KAAK;AACR,cAAA;AACA;AAAA,IACF;AACA,cAAU;AACV,yBAAqB,CAAC,SAAS,SAAS,MAAM,UAAU,KAAK;AAC7D,QAAI,oBAAoB;AACV,MAAA,SAAS,KAAK,MAAM;AAChC,eAAS,SAAS,MAAM,UAAU,KAAK;AAAA,IACzC;AACA,qBAAiB,kBAAkB,GAAG,UAAU,KAAK;AACrD,UAAM,kBAAkB,SAAS,gBAAgB,wBAAwB,KAAK;AAC9E,UAAM,gBAAgB,SAAS,SAAS,MAAM,WAAW;AACzD,QAAI,iBAAiB,MAAM,mBAAmB,kBAAkB,aAAa,oBAAoB;AAC/F,MAAA,SAAS,KAAK,MAAM,QAAQ,eAAe,cAAc;AAAA,IAC3D;AAAA,EACF,CAAC;AACD,iBAAe,MAAM,SAAS;AAChC;","x_google_ignoreList":[0]}