{"version":3,"file":"community-CyTjc0rg.js","sources":["../../../../pages/community.vue"],"sourcesContent":["<template>\n  <div class=\"community-page\">\n    <div class=\"page-content\">\n      <!-- È°∂ÈÉ®ÔºöÂàÜÁ±ªÊ†áÁ≠æÂØºËà™ -->\n      <div class=\"category-tags\">\n        <button \n          v-for=\"tag in categoryTags\" \n          :key=\"tag.key\"\n          :class=\"['tag-btn', { active: activeTag === tag.key }]\"\n          :style=\"activeTag === tag.key ? { '--active-color': tag.color } : {}\"\n          @click=\"setActiveTag(tag.key)\"\n        >\n          <span class=\"tag-icon\">{{ tag.icon }}</span>\n          {{ tag.label }}\n          <span v-if=\"activeTag === tag.key && activeTag !== 'all'\" class=\"reset-hint\">√ó</span>\n        </button>\n      </div>\n\n      <!-- ÊñáÁ´†ÁΩëÊ†ºÂå∫Âüü -->\n      <div v-if=\"loading && articles.length === 0\" class=\"loading-state\">\n        <el-icon class=\"is-loading\"><Loading /></el-icon>\n        <span>Âä†ËΩΩ‰∏≠...</span>\n      </div>\n\n      <div v-else-if=\"articles.length > 0\" class=\"articles-grid\">\n        <div \n          v-for=\"article in articles\" \n          :key=\"article.id\"\n          class=\"article-card\"\n          @click=\"viewArticle(article)\"\n        >\n           <!-- Â∞ÅÈù¢ÂõæÂÆπÂô® -->\n          <div class=\"article-cover\">\n            <img :src=\"article.cover_image || '/images/default-cover.jpg'\" :alt=\"article.title\" loading=\"lazy\" />\n            \n            <!-- ËßÜÈ¢ëÊ†áËØÜ -->\n            <div v-if=\"article.video_url\" class=\"video-badge\">\n              <el-icon><VideoPlay /></el-icon>\n            </div>\n            \n            <!-- ÂàÜÁ±ªÊ†áÁ≠æ -->\n            <div \n              class=\"card-category-tag\"\n              :style=\"{ borderColor: getCategoryColor(article.category), color: getCategoryColor(article.category), backgroundColor: 'rgba(0,0,0,0.6)' }\"\n            >\n              {{ getCategoryLabel(article.category) }}\n            </div>\n          </div>\n\n          <div class=\"article-content\">\n            <h3 class=\"article-title\">{{ article.title }}</h3>\n            <p class=\"article-desc\">{{ article.description }}</p>\n            \n            <div class=\"article-footer\">\n              <div class=\"author-info\">\n                <img :src=\"article.author?.avatar || '/images/client/pc/service-avatar.png'\" class=\"author-avatar\" />\n                <span class=\"author-name\">{{ article.author?.name || 'ÂÆòÊñπÂÆ¢Êúç' }}</span>\n              </div>\n              <span class=\"article-date\">{{ formatDate(article.created_at) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-else class=\"empty-state\">\n        <el-icon><Document /></el-icon>\n        <p>ÊöÇÊó∂Ê≤°ÊúâÁõ∏ÂÖ≥ÊñáÁ´†</p>\n      </div>\n\n      <!-- Âä†ËΩΩÊõ¥Â§ö -->\n      <div v-if=\"hasMore && !loading\" class=\"load-more-section\">\n        <button class=\"load-more-btn\" @click=\"loadMore\">\n          Âä†ËΩΩÊõ¥Â§ö\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { Loading, VideoPlay, Document } from '@element-plus/icons-vue'\nimport { communityApi } from '@/api/community'\nimport type { Article, Category } from '@/api/community'\n\nconst router = useRouter()\n\n// Áä∂ÊÄÅ\nconst loading = ref(false)\nconst articles = ref<Article[]>([])\nconst categories = ref<Category[]>([])\nconst activeTag = ref('all')\nconst page = ref(1)\nconst hasMore = ref(true)\nconst pageSize = 12\n\n// Âü∫Á°ÄÂàÜÁ±ª tag (ÂÖ®ÈÉ®)\nconst baseTag = { key: 'all', label: 'ÂÖ®ÈÉ®', icon: 'üí†', color: '#409EFF' }\n\n// Âä®ÊÄÅËÆ°ÁÆóÂàÜÁ±ªÊ†áÁ≠æÂàóË°®\nconst categoryTags = computed(() => {\n  const dynamicTags = categories.value.map(cat => ({\n    key: cat.id,\n    label: cat.name,\n    icon: cat.icon || 'üìù',\n    color: cat.color || '#409EFF'\n  }))\n  return [baseTag, ...dynamicTags]\n})\n\nconst getCategoryLabel = (id: string) => {\n  const cat = categories.value.find(c => c.id === id)\n  return cat ? cat.name : 'Êú™ÂàÜÁ±ª'\n}\n\nconst getCategoryColor = (id: string) => {\n  const cat = categories.value.find(c => c.id === id)\n  return cat ? cat.color : '#909399'\n}\n\n// Ëé∑ÂèñÂàÜÁ±ª\nconst fetchCategories = async () => {\n  try {\n    const { success, data } = await communityApi.getCategories()\n    if (success && data) {\n      categories.value = data\n    }\n  } catch (e) {\n    console.error('Failed to load categories', e)\n  }\n}\n\n// Ëé∑ÂèñÊñáÁ´†ÂàóË°®\nconst fetchArticles = async (isLoadMore = false) => {\n  if (loading.value) return\n  loading.value = true\n  \n  try {\n    const res = await communityApi.getArticles(activeTag.value, page.value, pageSize)\n    \n    if (res.success && res.data) {\n      if (isLoadMore) {\n        articles.value = [...articles.value, ...res.data]\n      } else {\n        articles.value = res.data\n      }\n      // Âà§Êñ≠ÊòØÂê¶ÊúâÊõ¥Â§ö\n      hasMore.value = articles.value.length < res.total\n    }\n  } catch (e) {\n    console.error('Failed to load articles', e)\n  } finally {\n    loading.value = false\n  }\n}\n\n// ÂàáÊç¢Ê†áÁ≠æ\nconst setActiveTag = (key: string) => {\n  if (activeTag.value === key && key !== 'all') {\n    activeTag.value = 'all'\n  } else {\n    activeTag.value = key\n  }\n  page.value = 1\n  articles.value = []\n  fetchArticles()\n}\n\n// Âä†ËΩΩÊõ¥Â§ö\nconst loadMore = () => {\n  page.value++\n  fetchArticles(true)\n}\n\n// Ë∑≥ËΩ¨ËØ¶ÊÉÖ\nconst viewArticle = (article: Article) => {\n  router.push(`/article/${article.id}`)\n}\n\n// Â∑•ÂÖ∑ÂáΩÊï∞\nconst formatDate = (dateStr: string) => {\n  if (!dateStr) return ''\n  return new Date(dateStr).toLocaleDateString('zh-CN')\n}\n\n// ÂàùÂßãÂåñ\nonMounted(async () => {\n  await fetchCategories()\n  await fetchArticles()\n})\n\n// SEO\nuseHead({\n  title: 'Â∏ÆÂä©‰∏≠ÂøÉ - Âá°ÂõæÊãâ',\n  meta: [\n    { name: 'description', content: 'Âá°ÂõæÊãâÁ§æÂå∫Â∏ÆÂä©‰∏≠ÂøÉÔºåÊèê‰æõÂ•àÈ£û„ÄÅËø™Â£´Â∞º+Á≠âÊµÅÂ™í‰Ωì‰ΩøÁî®ÊïôÁ®ã‰∏éËÆæÂ§áÊåáÂçó„ÄÇ' }\n  ]\n})\n</script>\n\n<style scoped>\n.community-page {\n  min-height: 100vh;\n  background: transparent; /* ÈÄèÂá∫ÂÖ®Â±Ä‰æãÂ≠êËÉåÊôØ */\n  color: #e2e8f0;\n  display: flex;\n  flex-direction: column;\n}\n\n.page-content {\n  flex: 1;\n  width: 100%;\n  max-width: 1300px;\n  margin: 0 auto;\n  padding: 40px 20px;\n}\n\n/* Ê†áÁ≠æÂØºËà™ */\n.category-tags {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-bottom: 50px;\n  flex-wrap: wrap;\n}\n\n.tag-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 24px;\n  background: rgba(30, 41, 59, 0.6);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 50px;\n  color: #94a3b8;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  backdrop-filter: blur(10px);\n}\n\n.tag-btn:hover {\n  background: rgba(59, 130, 246, 0.2);\n  color: #fff;\n  border-color: rgba(59, 130, 246, 0.4);\n  transform: translateY(-2px);\n}\n\n/* Âä®ÊÄÅ Active È¢úËâ≤ÊîØÊåÅ */\n.tag-btn.active {\n  background: var(--active-color, #409EFF); /* Fallback blue */\n  background-image: linear-gradient(135deg, var(--active-color), rgba(255,255,255,0.2));\n  color: #fff;\n  border-color: transparent;\n  box-shadow: 0 4px 15px rgba(0,0,0,0.3);\n}\n\n.tag-icon { font-size: 16px; }\n.reset-hint { margin-left: 6px; font-weight: bold; opacity: 0.8; }\n\n/* ÊñáÁ´†ÂàóË°® */\n.articles-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  margin-bottom: 60px;\n}\n\n.article-card {\n  background: rgba(30, 41, 59, 0.7);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 20px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n  backdrop-filter: blur(20px);\n}\n\n.article-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  border-color: rgba(59, 130, 246, 0.3);\n}\n\n.article-cover {\n  height: 200px;\n  position: relative;\n  overflow: hidden;\n}\n\n.article-cover img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.6s ease;\n}\n\n.article-card:hover .article-cover img {\n  transform: scale(1.05);\n}\n\n.video-badge {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 48px;\n  height: 48px;\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 24px;\n  backdrop-filter: blur(4px);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n}\n\n.card-category-tag {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  padding: 4px 12px;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  border-radius: 10px;\n  font-size: 12px;\n  color: #fff;\n  font-weight: 500;\n  border: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n}\n\n.article-content {\n  padding: 24px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.article-title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 10px;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.article-desc {\n  font-size: 14px;\n  color: #94a3b8;\n  line-height: 1.6;\n  margin-bottom: 20px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  flex: 1;\n}\n\n.article-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: auto;\n  padding-top: 16px;\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.author-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.author-avatar {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: 1px solid rgba(255,255,255,0.2);\n}\n\n.author-name {\n  font-size: 12px;\n  color: #cbd5e1;\n}\n\n.article-date {\n  font-size: 12px;\n  color: #64748b;\n}\n\n/* Áä∂ÊÄÅÂ±ïÁ§∫ */\n.loading-state, .empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100px 0;\n  color: #64748b;\n  gap: 16px;\n}\n.empty-state .el-icon { font-size: 48px; opacity: 0.5; }\n.loading-state .el-icon { font-size: 32px; animation: rotate 1s linear infinite; }\n\n.load-more-section {\n  display: flex;\n  justify-content: center;\n  margin-top: 40px;\n}\n\n.load-more-btn {\n  padding: 12px 36px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: #cbd5e1;\n  border-radius: 30px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.load-more-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n@keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n\n/* ÂìçÂ∫îÂºè */\n@media (max-width: 1024px) {\n  .articles-grid { grid-template-columns: repeat(2, 1fr); }\n}\n@media (max-width: 640px) {\n  .articles-grid { grid-template-columns: 1fr; }\n  .article-cover { height: 180px; }\n}\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrRenderComponent","_withCtx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA,cAAA;AAGA,UAAA,UAAA,IAAA,KAAA;AACA,UAAA,WAAA,IAAA,EAAA;AACA,UAAA,aAAA,IAAA,EAAA;AACA,UAAA,YAAA,IAAA,KAAA;AACA,QAAA,CAAA;AACA,UAAA,UAAA,IAAA,IAAA;AAIA,UAAA,UAAA,EAAA,KAAA,OAAA,OAAA,MAAA,MAAA,MAAA,OAAA,UAAA;AAGA,UAAA,eAAA,SAAA,MAAA;AACE,YAAA,cAAA,WAAA,MAAA,IAAA,CAAA,SAAA;AAAA,QAAiD,KAAA,IAAA;AAAA,QACtC,OAAA,IAAA;AAAA,QACE,MAAA,IAAA,QAAA;AAAA,QACO,OAAA,IAAA,SAAA;AAAA,MACE,EAAA;AAEtB,aAAA,CAAA,SAAA,GAAA,WAAA;AAAA,IAA+B,CAAA;AAGjC,UAAA,mBAAA,CAAA,OAAA;AACE,YAAA,MAAA,WAAA,MAAA,KAAA,CAAA,MAAA,EAAA,OAAA,EAAA;AACA,aAAA,MAAA,IAAA,OAAA;AAAA,IAAwB;AAG1B,UAAA,mBAAA,CAAA,OAAA;AACE,YAAA,MAAA,WAAA,MAAA,KAAA,CAAA,MAAA,EAAA,OAAA,EAAA;AACA,aAAA,MAAA,IAAA,QAAA;AAAA,IAAyB;AA+D3B,UAAA,aAAA,CAAA,YAAA;AACE,UAAA,CAAA,QAAA,QAAA;AACA,aAAA,IAAA,KAAA,OAAA,EAAA,mBAAA,OAAA;AAAA,IAAmD;AAUrD,YAAA;AAAA,MAAQ,OAAA;AAAA,MACC,MAAA;AAAA,QACD,EAAA,MAAA,eAAA,SAAA,oCAAA;AAAA,MACgE;AAAA,IACtE,CAAA;;;AApMK,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAA,oBAAA,MAAA,CAAA,CAAA,gHAAA;AAKiBC,oBAAA,aAAA,OAAA,CAAA,QAAA;;AAQF,YAAA,UAAA,UAAA,IAAA,OAAA,UAAA,UAAA,OAAA;;;;;;;;;;AAML,cAAAC,mBAAA,oBAAA,EAAA,OAAA,aAAA,GAAA;AAAA,UAAkB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAY;AAAA;;;;;;;AAMnBF,sBAAA,SAAA,OAAA,CAAA,YAAA;;AAUL,cAAA,QAAA,WAAA;;;;;;;;;kBACa;AAAA;;;;;;;;;;;;;;;;;;;;cA4BP;AAAA;;;;;;AAKZ,UAAA,QAAA,SAAA,CAAA,QAAA,OAAA;;;;;;;;;;;;;;;;"}