{"version":3,"file":"_id_-iC7TssmB.js","sources":["../../../../pages/article/[id].vue"],"sourcesContent":["<template>\n  <div class=\"article-detail-page\">\n    <div v-if=\"loading\" class=\"loading-state\">\n      <el-icon class=\"is-loading\"><Loading /></el-icon>\n      <span>加载中...</span>\n    </div>\n\n    <div v-else-if=\"article\" class=\"article-container\">\n      <!-- 顶部视频播放区 (如果有视频) -->\n      <div v-if=\"videoEmbedUrl\" class=\"video-section\">\n        <div class=\"video-wrapper\">\n          <iframe \n            :src=\"videoEmbedUrl\" \n            scrolling=\"no\" \n            border=\"0\" \n            frameborder=\"no\" \n            framespacing=\"0\" \n            allowfullscreen=\"true\">\n          </iframe>\n        </div>\n      </div>\n\n      <!-- 封面图 (如果没有视频) -->\n      <div v-else-if=\"article.cover_image\" class=\"cover-section\">\n        <img :src=\"article.cover_image\" :alt=\"article.title\" />\n      </div>\n\n      <!-- 文章内容区 -->\n      <article class=\"content-wrapper\">\n        <header class=\"article-header\">\n          <div class=\"category-pill\">{{ getCategoryLabel(article.category) }}</div>\n          <h1 class=\"article-title\">{{ article.title }}</h1>\n          \n          <div class=\"meta-info\">\n            <div class=\"author\">\n              <img :src=\"article.author?.avatar || '/images/client/pc/service-avatar.png'\" class=\"avatar\" />\n              <span class=\"name\">{{ article.author?.name || '官方客服' }}</span>\n            </div>\n            <span class=\"divider\">|</span>\n            <span class=\"date\">{{ formatDate(article.created_at) }}</span>\n            <!-- <span class=\"divider\">|</span>\n            <span class=\"views\">{{ article.views || 0 }} 阅读</span> -->\n          </div>\n        </header>\n\n        <div class=\"markdown-body\" v-html=\"renderedContent\"></div>\n      </article>\n\n      <!-- 底部操作 -->\n      <div class=\"article-actions\">\n        <!-- <button class=\"action-btn like-btn\">\n          <el-icon><Star /></el-icon> 收藏\n        </button> -->\n        <button class=\"action-btn back-btn\" @click=\"router.back()\">\n          <el-icon><ArrowLeft /></el-icon> 返回列表\n        </button>\n      </div>\n    </div>\n\n    <div v-else class=\"error-state\">\n      <el-icon><Warning /></el-icon>\n      <p>文章不存在或已被删除</p>\n      <button class=\"back-link\" @click=\"router.push('/community')\">返回社区</button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { Loading, ArrowLeft, Warning } from '@element-plus/icons-vue' // Star removed temporarily\nimport { communityApi } from '@/api/community'\nimport type { Article } from '@/api/community'\nimport { marked } from 'marked' // We might need to handle markdown rendering\n\n// 简单的 Markdown 渲染（如果没有 marked 库，可以用 v-html 直接渲染）\n// 这里假设 content 存储的是 HTML 或 Markdown\n// 如果项目中没有 marked，需要安装或手动简单处理\nconst renderMarkdown = (text: string) => {\n  if (!text) return ''\n  // 简单处理换行\n  return text.replace(/\\n/g, '<br/>') \n}\n\nconst route = useRoute()\nconst router = useRouter()\nconst loading = ref(true)\nconst article = ref<Article | null>(null)\n\n// 视频链接解析\nconst videoEmbedUrl = computed(() => {\n  const url = article.value?.video_url\n  if (!url) return null\n\n  // Bilibili BV号 / 链接处理\n  // https://www.bilibili.com/video/BV1xx411c7mD\n  const b_match = url.match(/(BV[a-zA-Z0-9]+)/)\n  if (b_match) {\n    return `//player.bilibili.com/player.html?bvid=${b_match[1]}&page=1&high_quality=1&danmaku=0`\n  }\n\n  // Youtube 处理\n  // https://www.youtube.com/watch?v=dQw4w9WgXcQ\n  // https://youtu.be/dQw4w9WgXcQ\n  const y_match = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([\\w-]+)/)\n  if (y_match) {\n    return `https://www.youtube.com/embed/${y_match[1]}?rel=0&modestbranding=1`\n  }\n\n  return null\n})\n\nconst renderedContent = computed(() => {\n  // 如果引入了 marked: return marked.parse(article.value?.content || '')\n  return renderMarkdown(article.value?.content || '')\n})\n\nconst getCategoryLabel = (key: string) => {\n  const map: Record<string, string> = {\n    'guide': '使用攻略',\n    'equipment': '设备推荐',\n    'troubleshoot': '故障排查',\n    'news': '官方公告'\n  }\n  return map[key] || '其他'\n}\n\nconst formatDate = (dateStr: string) => {\n  if (!dateStr) return ''\n  return new Date(dateStr).toLocaleDateString('zh-CN', { \n    year: 'numeric', month: 'long', day: 'numeric' \n  })\n}\n\nonMounted(async () => {\n  const id = route.params.id as string\n  if (!id) {\n    loading.value = false\n    return\n  }\n\n  // 从 API 获取\n  const res = await communityApi.getArticleDetail(id)\n  if (res.success && res.data) {\n    article.value = res.data\n  }\n  loading.value = false\n})\n\n// SEO\nuseHead({\n  title: computed(() => article.value ? `${article.value.title} - 帮助中心` : '加载中...'),\n  meta: [\n    { name: 'description', content: computed(() => article.value?.description || '') }\n  ]\n})\n</script>\n\n<style scoped>\n.article-detail-page {\n  min-height: 100vh;\n  background: transparent;\n  color: #e2e8f0;\n  display: flex;\n  justify-content: center;\n  padding: 40px 20px;\n}\n\n.article-container {\n  width: 100%;\n  max-width: 900px;\n  background: rgba(30, 41, 59, 0.7);\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 24px;\n  overflow: hidden;\n  box-shadow: 0 20px 50px rgba(0,0,0,0.3);\n  animation: fadeIn 0.6s ease-out;\n}\n\n/* 视频区域 */\n.video-section {\n  width: 100%;\n  background: #000;\n  border-bottom: 1px solid rgba(255,255,255,0.1);\n}\n\n.video-wrapper {\n  position: relative;\n  width: 100%;\n  padding-bottom: 56.25%; /* 16:9 Aspect Ratio */\n}\n\n.video-wrapper iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n/* 封面区域 */\n.cover-section {\n  width: 100%;\n  height: 360px;\n  overflow: hidden;\n}\n\n.cover-section img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* 内容区域 */\n.content-wrapper {\n  padding: 40px;\n}\n\n.article-header {\n  margin-bottom: 30px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  padding-bottom: 20px;\n}\n\n.category-pill {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(59, 130, 246, 0.2);\n  color: #60a5fa;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 600;\n  margin-bottom: 16px;\n}\n\n.article-title {\n  font-size: 32px;\n  font-weight: 800;\n  color: #fff;\n  margin-bottom: 16px;\n  line-height: 1.3;\n}\n\n.meta-info {\n  display: flex;\n  align-items: center;\n  color: #94a3b8;\n  font-size: 14px;\n}\n\n.author {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.avatar {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n}\n\n.divider { margin: 0 12px; opacity: 0.3; }\n\n/* Markdown 内容样式重置 */\n.markdown-body {\n  color: #cbd5e1;\n  line-height: 1.8;\n  font-size: 16px;\n}\n\n:deep(.markdown-body h2) {\n  font-size: 24px;\n  color: #fff;\n  margin: 30px 0 16px;\n  font-weight: 700;\n}\n\n:deep(.markdown-body p) {\n  margin-bottom: 16px;\n}\n\n:deep(.markdown-body img) {\n  max-width: 100%;\n  border-radius: 12px;\n  margin: 20px 0;\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n/* 底部操作 */\n.article-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 60px;\n  padding-top: 30px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.action-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 20px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-size: 15px;\n  font-weight: 500;\n  background: transparent;\n  border: 1px solid transparent;\n}\n\n.back-btn {\n  color: #94a3b8;\n}\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: #fff;\n}\n\n.like-btn {\n  color: #F59E0B;\n  background: rgba(245, 158, 11, 0.1);\n}\n.like-btn:hover {\n  background: rgba(245, 158, 11, 0.2);\n}\n\n/* 错误与加载态 */\n.loading-state, .error-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100px 0;\n  color: #cbd5e1;\n  gap: 16px;\n}\n.loading-state .el-icon { font-size: 40px; }\n.error-state .el-icon { font-size: 48px; color: #EF4444; opacity: 0.8; }\n.back-link {\n  margin-top: 16px;\n  padding: 8px 24px;\n  background: rgba(59, 130, 246, 0.2);\n  color: #fff;\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n}\n\n/* 动画 */\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(20px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_withCtx","_ssrRenderAttr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,UAAA,iBAAA,CAAA,SAAA;AACE,UAAA,CAAA,KAAA,QAAA;AAEA,aAAA,KAAA,QAAA,OAAA,OAAA;AAAA,IAAkC;AAGpC,aAAA;AACA,cAAA;AACA,UAAA,UAAA,IAAA,IAAA;AACA,UAAA,UAAA,IAAA,IAAA;AAGA,UAAA,gBAAA,SAAA,MAAA;AACE,YAAA,MAAA,QAAA,OAAA;AACA,UAAA,CAAA,IAAA,QAAA;AAIA,YAAA,UAAA,IAAA,MAAA,kBAAA;AACA,UAAA,SAAA;AACE,eAAA,0CAAA,QAAA,CAAA,CAAA;AAAA,MAA2D;AAM7D,YAAA,UAAA,IAAA,MAAA,iDAAA;AACA,UAAA,SAAA;AACE,eAAA,iCAAA,QAAA,CAAA,CAAA;AAAA,MAAkD;AAGpD,aAAA;AAAA,IAAO,CAAA;AAGT,UAAA,kBAAA,SAAA,MAAA;AAEE,aAAA,eAAA,QAAA,OAAA,WAAA,EAAA;AAAA,IAAkD,CAAA;AAGpD,UAAA,mBAAA,CAAA,QAAA;AACE,YAAA,MAAA;AAAA,QAAoC,SAAA;AAAA,QACzB,aAAA;AAAA,QACI,gBAAA;AAAA,QACG,QAAA;AAAA,MACR;AAEV,aAAA,IAAA,GAAA,KAAA;AAAA,IAAmB;AAGrB,UAAA,aAAA,CAAA,YAAA;AACE,UAAA,CAAA,QAAA,QAAA;AACA,aAAA,IAAA,KAAA,OAAA,EAAA,mBAAA,SAAA;AAAA,QAAqD,MAAA;AAAA,QAC7C,OAAA;AAAA,QAAkB,KAAA;AAAA,MAAa,CAAA;AAAA,IACtC;AAmBH,YAAA;AAAA,MAAQ,OAAA,SAAA,MAAA,QAAA,QAAA,GAAA,QAAA,MAAA,KAAA,YAAA,QAAA;AAAA,MAC0E,MAAA;AAAA,QAC1E,EAAA,MAAA,eAAA,SAAA,SAAA,MAAA,QAAA,OAAA,eAAA,EAAA,EAAA;AAAA,MAC6E;AAAA,IACnF,CAAA;;;AAzJK,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAA,yBAAA,MAAA,CAAA,CAAA,mBAAA;;;AAEQ,cAAAC,mBAAA,oBAAA,EAAA,OAAA,aAAA,GAAA;AAAA,UAAkB,SAAAC,QAAA,CAAA,GAAA,QAAA,UAAA,aAAA;;;;;;cAAY;AAAA;;;;;;;;AAShC,gBAAA,gGAAAC,cAAA,OAAA,cAAA,KAAA,CAAA,2HAAA;AAAA,QAAkB,WAAA,QAAA,MAAA,aAAA;;;;;;;;;;;;;cA0CC;AAAA;;;;;;;;;;;;;;cAMN;AAAA;;;;;;;;;;;;;;;;;"}