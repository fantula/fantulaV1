{"version":3,"file":"_id_-DmZ1KTyC.js","sources":["../../../../node_modules/nuxt/dist/app/composables/asyncData.js","../../../../pages/goods/[id].vue"],"sourcesContent":["import { computed, getCurrentInstance, getCurrentScope, inject, isShallow, nextTick, onBeforeMount, onScopeDispose, onServerPrefetch, onUnmounted, queuePostFlushCb, ref, shallowRef, toRef, toValue, unref, watch } from \"vue\";\nimport { debounce } from \"perfect-debounce\";\nimport { hash } from \"ohash\";\nimport { useNuxtApp } from \"../nuxt.js\";\nimport { getUserCaller, toArray } from \"../utils.js\";\nimport { clientOnlySymbol } from \"../components/client-only.js\";\nimport { createError } from \"./error.js\";\nimport { onNuxtReady } from \"./ready.js\";\nimport { asyncDataDefaults, granularCachedData, pendingWhenIdle, purgeCachedData, resetAsyncDataToUndefined } from \"#build/nuxt.config.mjs\";\nconst isDefer = (dedupe) => dedupe === \"defer\" || dedupe === false;\nexport function useAsyncData(...args) {\n  const autoKey = typeof args[args.length - 1] === \"string\" ? args.pop() : void 0;\n  if (_isAutoKeyNeeded(args[0], args[1])) {\n    args.unshift(autoKey);\n  }\n  let [_key, _handler, options = {}] = args;\n  let keyChanging = false;\n  const key = computed(() => toValue(_key));\n  if (typeof key.value !== \"string\") {\n    throw new TypeError(\"[nuxt] [useAsyncData] key must be a string.\");\n  }\n  if (typeof _handler !== \"function\") {\n    throw new TypeError(\"[nuxt] [useAsyncData] handler must be a function.\");\n  }\n  const nuxtApp = useNuxtApp();\n  options.server ??= true;\n  options.default ??= getDefault;\n  options.getCachedData ??= getDefaultCachedData;\n  options.lazy ??= false;\n  options.immediate ??= true;\n  options.deep ??= asyncDataDefaults.deep;\n  options.dedupe ??= \"cancel\";\n  const functionName = options._functionName || \"useAsyncData\";\n  if (import.meta.dev && typeof options.dedupe === \"boolean\") {\n    console.warn(`[nuxt] \\`boolean\\` values are deprecated for the \\`dedupe\\` option of \\`${functionName}\\` and will be removed in the future. Use 'cancel' or 'defer' instead.`);\n  }\n  const currentData = nuxtApp._asyncData[key.value];\n  if (import.meta.dev && currentData) {\n    const warnings = [];\n    const values = createHash(_handler, options);\n    if (values.handler !== currentData._hash?.handler) {\n      warnings.push(`different handler`);\n    }\n    for (const opt of [\"transform\", \"pick\", \"getCachedData\"]) {\n      if (values[opt] !== currentData._hash[opt]) {\n        warnings.push(`different \\`${opt}\\` option`);\n      }\n    }\n    if (currentData._default.toString() !== options.default.toString()) {\n      warnings.push(`different \\`default\\` value`);\n    }\n    if (options.deep && isShallow(currentData.data)) {\n      warnings.push(`mismatching \\`deep\\` option`);\n    }\n    if (warnings.length) {\n      const caller = getUserCaller();\n      const explanation = caller ? ` (used at ${caller.source}:${caller.line}:${caller.column})` : \"\";\n      console.warn(`[nuxt] [${functionName}] Incompatible options detected for \"${key.value}\"${explanation}:\n${warnings.map((w) => `- ${w}`).join(\"\\n\")}\nYou can use a different key or move the call to a composable to ensure the options are shared across calls.`);\n    }\n  }\n  function createInitialFetch() {\n    const initialFetchOptions = { cause: \"initial\", dedupe: options.dedupe };\n    if (!nuxtApp._asyncData[key.value]?._init) {\n      initialFetchOptions.cachedData = options.getCachedData(key.value, nuxtApp, { cause: \"initial\" });\n      nuxtApp._asyncData[key.value] = createAsyncData(nuxtApp, key.value, _handler, options, initialFetchOptions.cachedData);\n    }\n    return () => nuxtApp._asyncData[key.value].execute(initialFetchOptions);\n  }\n  const initialFetch = createInitialFetch();\n  const asyncData = nuxtApp._asyncData[key.value];\n  asyncData._deps++;\n  const fetchOnServer = options.server !== false && nuxtApp.payload.serverRendered;\n  if (import.meta.server && fetchOnServer && options.immediate) {\n    const promise = initialFetch();\n    if (getCurrentInstance()) {\n      onServerPrefetch(() => promise);\n    } else {\n      nuxtApp.hook(\"app:created\", async () => {\n        await promise;\n      });\n    }\n  }\n  if (import.meta.client) {\n    let unregister = function(key2) {\n      const data = nuxtApp._asyncData[key2];\n      if (data?._deps) {\n        data._deps--;\n        if (data._deps === 0) {\n          data?._off();\n        }\n      }\n    };\n    const instance = getCurrentInstance();\n    if (instance && fetchOnServer && options.immediate && !instance.sp) {\n      instance.sp = [];\n    }\n    if (import.meta.dev && !nuxtApp.isHydrating && !nuxtApp._processingMiddleware && (!instance || instance?.isMounted)) {\n      console.warn(`[nuxt] [${functionName}] Component is already mounted, please use $fetch instead. See https://nuxt.com/docs/getting-started/data-fetching`);\n    }\n    if (instance && !instance._nuxtOnBeforeMountCbs) {\n      instance._nuxtOnBeforeMountCbs = [];\n      const cbs = instance._nuxtOnBeforeMountCbs;\n      onBeforeMount(() => {\n        cbs.forEach((cb) => {\n          cb();\n        });\n        cbs.splice(0, cbs.length);\n      });\n      onUnmounted(() => cbs.splice(0, cbs.length));\n    }\n    const isWithinClientOnly = instance && (instance._nuxtClientOnly || inject(clientOnlySymbol, false));\n    if (fetchOnServer && nuxtApp.isHydrating && (asyncData.error.value || asyncData.data.value != null)) {\n      if (pendingWhenIdle) {\n        asyncData.pending.value = false;\n      }\n      asyncData.status.value = asyncData.error.value ? \"error\" : \"success\";\n    } else if (instance && (!isWithinClientOnly && nuxtApp.payload.serverRendered && nuxtApp.isHydrating || options.lazy) && options.immediate) {\n      instance._nuxtOnBeforeMountCbs.push(initialFetch);\n    } else if (options.immediate) {\n      initialFetch();\n    }\n    const hasScope = getCurrentScope();\n    const unsubKeyWatcher = watch(key, (newKey, oldKey) => {\n      if ((newKey || oldKey) && newKey !== oldKey) {\n        keyChanging = true;\n        const hadData = nuxtApp._asyncData[oldKey]?.data.value !== asyncDataDefaults.value;\n        const wasRunning = nuxtApp._asyncDataPromises[oldKey] !== void 0;\n        const initialFetchOptions = { cause: \"initial\", dedupe: options.dedupe };\n        if (!nuxtApp._asyncData[newKey]?._init) {\n          let initialValue;\n          if (oldKey && hadData) {\n            initialValue = nuxtApp._asyncData[oldKey].data.value;\n          } else {\n            initialValue = options.getCachedData(newKey, nuxtApp, { cause: \"initial\" });\n            initialFetchOptions.cachedData = initialValue;\n          }\n          nuxtApp._asyncData[newKey] = createAsyncData(nuxtApp, newKey, _handler, options, initialValue);\n        }\n        nuxtApp._asyncData[newKey]._deps++;\n        if (oldKey) {\n          unregister(oldKey);\n        }\n        if (options.immediate || hadData || wasRunning) {\n          nuxtApp._asyncData[newKey].execute(initialFetchOptions);\n        }\n        queuePostFlushCb(() => {\n          keyChanging = false;\n        });\n      }\n    }, { flush: \"sync\" });\n    const unsubParamsWatcher = options.watch ? watch(options.watch, () => {\n      if (keyChanging) {\n        return;\n      }\n      nuxtApp._asyncData[key.value]?._execute({ cause: \"watch\", dedupe: options.dedupe });\n    }) : () => {\n    };\n    if (hasScope) {\n      onScopeDispose(() => {\n        unsubKeyWatcher();\n        unsubParamsWatcher();\n        unregister(key.value);\n      });\n    }\n  }\n  const asyncReturn = {\n    data: writableComputedRef(() => nuxtApp._asyncData[key.value]?.data),\n    pending: writableComputedRef(() => nuxtApp._asyncData[key.value]?.pending),\n    status: writableComputedRef(() => nuxtApp._asyncData[key.value]?.status),\n    error: writableComputedRef(() => nuxtApp._asyncData[key.value]?.error),\n    refresh: (...args2) => {\n      if (!nuxtApp._asyncData[key.value]?._init) {\n        const initialFetch2 = createInitialFetch();\n        return initialFetch2();\n      }\n      return nuxtApp._asyncData[key.value].execute(...args2);\n    },\n    execute: (...args2) => asyncReturn.refresh(...args2),\n    clear: () => {\n      const entry = nuxtApp._asyncData[key.value];\n      if (entry?._abortController) {\n        try {\n          entry._abortController.abort(new DOMException(\"AsyncData aborted by user.\", \"AbortError\"));\n        } finally {\n          entry._abortController = void 0;\n        }\n      }\n      clearNuxtDataByKey(nuxtApp, key.value);\n    }\n  };\n  const asyncDataPromise = Promise.resolve(nuxtApp._asyncDataPromises[key.value]).then(() => asyncReturn);\n  Object.assign(asyncDataPromise, asyncReturn);\n  return asyncDataPromise;\n}\nfunction writableComputedRef(getter) {\n  return computed({\n    get() {\n      return getter()?.value;\n    },\n    set(value) {\n      const ref2 = getter();\n      if (ref2) {\n        ref2.value = value;\n      }\n    }\n  });\n}\nexport function useLazyAsyncData(...args) {\n  const autoKey = typeof args[args.length - 1] === \"string\" ? args.pop() : void 0;\n  if (_isAutoKeyNeeded(args[0], args[1])) {\n    args.unshift(autoKey);\n  }\n  const [key, handler, options = {}] = args;\n  if (import.meta.dev) {\n    options._functionName ||= \"useLazyAsyncData\";\n  }\n  return useAsyncData(key, handler, { ...options, lazy: true }, null);\n}\nfunction _isAutoKeyNeeded(keyOrFetcher, fetcher) {\n  if (typeof keyOrFetcher === \"string\") {\n    return false;\n  }\n  if (typeof keyOrFetcher === \"object\" && keyOrFetcher !== null) {\n    return false;\n  }\n  if (typeof keyOrFetcher === \"function\" && typeof fetcher === \"function\") {\n    return false;\n  }\n  return true;\n}\nexport function useNuxtData(key) {\n  const nuxtApp = useNuxtApp();\n  if (!(key in nuxtApp.payload.data)) {\n    nuxtApp.payload.data[key] = asyncDataDefaults.value;\n  }\n  if (nuxtApp._asyncData[key]) {\n    const data = nuxtApp._asyncData[key];\n    data._deps++;\n    if (getCurrentScope()) {\n      onScopeDispose(() => {\n        data._deps--;\n        if (data._deps === 0) {\n          data?._off();\n        }\n      });\n    }\n  }\n  return {\n    data: computed({\n      get() {\n        return nuxtApp._asyncData[key]?.data.value ?? nuxtApp.payload.data[key];\n      },\n      set(value) {\n        if (nuxtApp._asyncData[key]) {\n          nuxtApp._asyncData[key].data.value = value;\n        } else {\n          nuxtApp.payload.data[key] = value;\n        }\n      }\n    })\n  };\n}\nexport async function refreshNuxtData(keys) {\n  if (import.meta.server) {\n    return Promise.resolve();\n  }\n  await new Promise((resolve) => onNuxtReady(resolve));\n  const _keys = keys ? toArray(keys) : void 0;\n  await useNuxtApp().hooks.callHookParallel(\"app:data:refresh\", _keys);\n}\nexport function clearNuxtData(keys) {\n  const nuxtApp = useNuxtApp();\n  const _allKeys = Object.keys(nuxtApp.payload.data);\n  const _keys = !keys ? _allKeys : typeof keys === \"function\" ? _allKeys.filter(keys) : toArray(keys);\n  for (const key of _keys) {\n    clearNuxtDataByKey(nuxtApp, key);\n  }\n}\nfunction clearNuxtDataByKey(nuxtApp, key) {\n  if (key in nuxtApp.payload.data) {\n    nuxtApp.payload.data[key] = void 0;\n  }\n  if (key in nuxtApp.payload._errors) {\n    nuxtApp.payload._errors[key] = asyncDataDefaults.errorValue;\n  }\n  if (nuxtApp._asyncData[key]) {\n    nuxtApp._asyncData[key].data.value = resetAsyncDataToUndefined ? void 0 : unref(nuxtApp._asyncData[key]._default());\n    nuxtApp._asyncData[key].error.value = asyncDataDefaults.errorValue;\n    if (pendingWhenIdle) {\n      nuxtApp._asyncData[key].pending.value = false;\n    }\n    nuxtApp._asyncData[key].status.value = \"idle\";\n  }\n  if (key in nuxtApp._asyncDataPromises) {\n    nuxtApp._asyncDataPromises[key] = void 0;\n  }\n}\nfunction pick(obj, keys) {\n  const newObj = {};\n  for (const key of keys) {\n    newObj[key] = obj[key];\n  }\n  return newObj;\n}\nfunction createAsyncData(nuxtApp, key, _handler, options, initialCachedData) {\n  nuxtApp.payload._errors[key] ??= asyncDataDefaults.errorValue;\n  const hasCustomGetCachedData = options.getCachedData !== getDefaultCachedData;\n  const handler = import.meta.client || !import.meta.prerender || !nuxtApp.ssrContext?._sharedPrerenderCache ? _handler : (nuxtApp2, options2) => {\n    const value = nuxtApp2.ssrContext._sharedPrerenderCache.get(key);\n    if (value) {\n      return value;\n    }\n    const promise = Promise.resolve().then(() => nuxtApp2.runWithContext(() => _handler(nuxtApp2, options2)));\n    nuxtApp2.ssrContext._sharedPrerenderCache.set(key, promise);\n    return promise;\n  };\n  const _ref = options.deep ? ref : shallowRef;\n  const hasCachedData = initialCachedData != null;\n  const unsubRefreshAsyncData = nuxtApp.hook(\"app:data:refresh\", async (keys) => {\n    if (!keys || keys.includes(key)) {\n      await asyncData.execute({ cause: \"refresh:hook\" });\n    }\n  });\n  const asyncData = {\n    data: _ref(hasCachedData ? initialCachedData : options.default()),\n    pending: pendingWhenIdle ? shallowRef(!hasCachedData) : computed(() => asyncData.status.value === \"pending\"),\n    error: toRef(nuxtApp.payload._errors, key),\n    status: shallowRef(\"idle\"),\n    execute: (...args) => {\n      const [_opts, newValue = void 0] = args;\n      const opts = _opts && newValue === void 0 && typeof _opts === \"object\" ? _opts : {};\n      if (import.meta.dev && newValue !== void 0 && (!_opts || typeof _opts !== \"object\")) {\n        console.warn(`[nuxt] [${options._functionName}] Do not pass \\`execute\\` directly to \\`watch\\`. Instead, use an inline function, such as \\`watch(q, () => execute())\\`.`);\n      }\n      if (nuxtApp._asyncDataPromises[key]) {\n        if (isDefer(opts.dedupe ?? options.dedupe)) {\n          return nuxtApp._asyncDataPromises[key];\n        }\n      }\n      if (granularCachedData || opts.cause === \"initial\" || nuxtApp.isHydrating) {\n        const cachedData = \"cachedData\" in opts ? opts.cachedData : options.getCachedData(key, nuxtApp, { cause: opts.cause ?? \"refresh:manual\" });\n        if (cachedData != null) {\n          nuxtApp.payload.data[key] = asyncData.data.value = cachedData;\n          asyncData.error.value = asyncDataDefaults.errorValue;\n          asyncData.status.value = \"success\";\n          return Promise.resolve(cachedData);\n        }\n      }\n      if (pendingWhenIdle) {\n        asyncData.pending.value = true;\n      }\n      if (asyncData._abortController) {\n        asyncData._abortController.abort(new DOMException(\"AsyncData request cancelled by deduplication\", \"AbortError\"));\n      }\n      asyncData._abortController = new AbortController();\n      asyncData.status.value = \"pending\";\n      const cleanupController = new AbortController();\n      const promise = new Promise(\n        (resolve, reject) => {\n          try {\n            const timeout = opts.timeout ?? options.timeout;\n            const mergedSignal = mergeAbortSignals([asyncData._abortController?.signal, opts?.signal], cleanupController.signal, timeout);\n            if (mergedSignal.aborted) {\n              const reason = mergedSignal.reason;\n              reject(reason instanceof Error ? reason : new DOMException(String(reason ?? \"Aborted\"), \"AbortError\"));\n              return;\n            }\n            mergedSignal.addEventListener(\"abort\", () => {\n              const reason = mergedSignal.reason;\n              reject(reason instanceof Error ? reason : new DOMException(String(reason ?? \"Aborted\"), \"AbortError\"));\n            }, { once: true, signal: cleanupController.signal });\n            return Promise.resolve(handler(nuxtApp, { signal: mergedSignal })).then(resolve, reject);\n          } catch (err) {\n            reject(err);\n          }\n        }\n      ).then(async (_result) => {\n        let result = _result;\n        if (options.transform) {\n          result = await options.transform(_result);\n        }\n        if (options.pick) {\n          result = pick(result, options.pick);\n        }\n        if (import.meta.dev && import.meta.server && result == null) {\n          const caller = getUserCaller();\n          const explanation = caller ? ` (used at ${caller.source}:${caller.line}:${caller.column})` : \"\";\n          console.warn(`[nuxt] \\`${options._functionName || \"useAsyncData\"}${explanation}\\` must return a value (it should not be \\`undefined\\` or \\`null\\`) or the request may be duplicated on the client side.`);\n        }\n        nuxtApp.payload.data[key] = result;\n        asyncData.data.value = result;\n        asyncData.error.value = asyncDataDefaults.errorValue;\n        asyncData.status.value = \"success\";\n      }).catch((error) => {\n        if (nuxtApp._asyncDataPromises[key] && nuxtApp._asyncDataPromises[key] !== promise) {\n          return nuxtApp._asyncDataPromises[key];\n        }\n        if (asyncData._abortController?.signal.aborted) {\n          return nuxtApp._asyncDataPromises[key];\n        }\n        if (typeof DOMException !== \"undefined\" && error instanceof DOMException && error.name === \"AbortError\") {\n          asyncData.status.value = \"idle\";\n          return nuxtApp._asyncDataPromises[key];\n        }\n        asyncData.error.value = createError(error);\n        asyncData.data.value = unref(options.default());\n        asyncData.status.value = \"error\";\n      }).finally(() => {\n        if (pendingWhenIdle) {\n          asyncData.pending.value = false;\n        }\n        cleanupController.abort();\n        delete nuxtApp._asyncDataPromises[key];\n      });\n      nuxtApp._asyncDataPromises[key] = promise;\n      return nuxtApp._asyncDataPromises[key];\n    },\n    _execute: debounce((...args) => asyncData.execute(...args), 0, { leading: true }),\n    _default: options.default,\n    _deps: 0,\n    _init: true,\n    _hash: import.meta.dev ? createHash(_handler, options) : void 0,\n    _off: () => {\n      unsubRefreshAsyncData();\n      if (nuxtApp._asyncData[key]?._init) {\n        nuxtApp._asyncData[key]._init = false;\n      }\n      if (purgeCachedData && !hasCustomGetCachedData) {\n        nextTick(() => {\n          if (!nuxtApp._asyncData[key]?._init) {\n            clearNuxtDataByKey(nuxtApp, key);\n            asyncData.execute = () => Promise.resolve();\n            asyncData.data.value = asyncDataDefaults.value;\n          }\n        });\n      }\n    }\n  };\n  return asyncData;\n}\nconst getDefault = () => asyncDataDefaults.value;\nconst getDefaultCachedData = (key, nuxtApp, ctx) => {\n  if (nuxtApp.isHydrating) {\n    return nuxtApp.payload.data[key];\n  }\n  if (ctx.cause !== \"refresh:manual\" && ctx.cause !== \"refresh:hook\") {\n    return nuxtApp.static.data[key];\n  }\n};\nfunction createHash(_handler, options) {\n  return {\n    handler: hash(_handler),\n    transform: options.transform ? hash(options.transform) : void 0,\n    pick: options.pick ? hash(options.pick) : void 0,\n    getCachedData: options.getCachedData ? hash(options.getCachedData) : void 0\n  };\n}\nfunction mergeAbortSignals(signals, cleanupSignal, timeout) {\n  const list = signals.filter((s) => !!s);\n  if (typeof timeout === \"number\" && timeout >= 0) {\n    const timeoutSignal = AbortSignal.timeout?.(timeout);\n    if (timeoutSignal) {\n      list.push(timeoutSignal);\n    }\n  }\n  if (AbortSignal.any) {\n    return AbortSignal.any(list);\n  }\n  const controller = new AbortController();\n  for (const sig of list) {\n    if (sig.aborted) {\n      const reason = sig.reason ?? new DOMException(\"Aborted\", \"AbortError\");\n      try {\n        controller.abort(reason);\n      } catch {\n        controller.abort();\n      }\n      return controller.signal;\n    }\n  }\n  const onAbort = () => {\n    const abortedSignal = list.find((s) => s.aborted);\n    const reason = abortedSignal?.reason ?? new DOMException(\"Aborted\", \"AbortError\");\n    try {\n      controller.abort(reason);\n    } catch {\n      controller.abort();\n    }\n  };\n  for (const sig of list) {\n    sig.addEventListener?.(\"abort\", onAbort, { once: true, signal: cleanupSignal });\n  }\n  return controller.signal;\n}\n","<template>\n  <div class=\"goods-detail-page\">\n\n    \n    <!-- È°∂ÈÉ®Âç†‰Ωç -->\n    <div style=\"height: 20px;\"></div>\n\n    <!-- ÂºÇÂ∏∏ÊèêÁ§∫ -->\n    <div v-if=\"goodsError\" class=\"api-warning-bar\">\n      ‚ö†Ô∏è ÁΩëÁªúËøûÊé•ÂºÇÂ∏∏ÔºåÊ≠£Âú®È¢ÑËßàÊºîÁ§∫Êï∞ÊçÆ\n    </div>\n    \n    <div class=\"goods-content\">\n      <!-- ËøîÂõûÊåâÈíÆ -->\n      <div class=\"back-btn-row\">\n        <button class=\"back-btn\" @click=\"goBack\">\n          <span class=\"back-btn-icon\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 32 32\" fill=\"none\" style=\"display: block;\">\n              <path d=\"M18.5 10L13 16L18.5 22\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </span>\n          <span class=\"back-btn-text\">ËøîÂõû‰∏ä‰∏ÄÈ°µ</span>\n        </button>\n      </div>\n      \n      <div class=\"goods-detail-content\">\n        <div class=\"goods-main-section\">\n          <!-- Â∑¶‰æßÔºöÂõæÁâáÂ±ïÁ§∫Âå∫ (‰∏é SKU ËÅîÂä®) -->\n          <div class=\"goods-left-panel\">\n            <div class=\"main-image-wrapper\">\n              <div class=\"main-image\">\n                <el-image \n                  :src=\"selectedSkuImage || goodsInfo.image\" \n                  fit=\"contain\" \n                  class=\"sku-big-img\"\n                >\n                  <template #placeholder>\n                    <div class=\"img-loading-placeholder\">Âä†ËΩΩ‰∏≠...</div>\n                  </template>\n                </el-image>\n              </div>\n              <!-- SKU ÁªëÂÆöÁöÑÂõæÁâáÂàóË°®ÊªöÂä®Â±ïÁ§∫ -->\n              <div class=\"sku-thumb-scroll\" v-if=\"skuImages && skuImages.length > 0\">\n                <div \n                  v-for=\"(img, idx) in skuImages\" \n                  :key=\"idx\" \n                  :class=\"['sku-thumb-item', { active: selectedSkuImage === img }]\"\n                  @click=\"selectedSkuImage = img\"\n                >\n                  <img :src=\"img\" alt=\"SKUÂõæÁâá\" />\n                </div>\n              </div>\n            </div>\n\n            <!-- ÂçñÁÇπ‰øùÈöúÂå∫ (Unique Ê†∑Âºè) -->\n            <div class=\"premium-service-card\">\n              <div class=\"premium-service-title\">ÊúçÂä°‰øùÈöú</div>\n              <div class=\"premium-service-grid\">\n                <div class=\"p-service-item\" v-for=\"tag in serviceTags\" :key=\"tag\">\n                  <el-icon class=\"p-icon\"><CircleCheck /></el-icon>\n                  <span>{{ tag }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Âè≥‰æßÔºö‰ø°ÊÅØ‰∏éËßÑÊ†ºÈÄâÊã© -->\n          <div class=\"goods-info-panel\">\n            <div class=\"info-header\">\n              <h1 class=\"product-name\">{{ goodsInfo.name }}</h1>\n              <div class=\"product-sales-badge\">\n                Á¥ØËÆ°ÈîÄÈáè <span>{{ goodsInfo.sales }}</span>\n              </div>\n            </div>\n\n            <!-- FAQ ÊªöÂä®ËΩÆÊí≠Êù° -->\n            <!-- FAQ ÊªöÂä®ËΩÆÊí≠Êù° (‰ºòÂåñÁâà) -->\n            <div class=\"faq-ticker-bar\" v-if=\"faqs.length > 0\" @click=\"goToFaq({})\">\n              <div class=\"faq-ticker-container\">\n                <div class=\"faq-ticker-track\" :style=\"tickerStyle\">\n                  <!-- ÊòæÁ§∫ÂàóË°® + ÂéüÊ†∑ÂÖãÈöÜÁöÑÁ¨¨‰∏ÄÈ°πÁî®‰∫éÊó†ÁºùË°îÊé• -->\n                  <div \n                    class=\"faq-ticker-item\" \n                    v-for=\"(faq, idx) in displayFaqs\" \n                    :key=\"idx\"\n                  >\n                    {{ faq.question }}\n                  </div>\n                </div>\n              </div>\n              <div class=\"faq-arrow-wrap\">\n                <el-icon><Right /></el-icon>\n              </div>\n            </div>\n\n            <!-- ËßÑÊ†ºÈÄâÊã©Âå∫Âüü -->\n            <template v-if=\"hasSkus\">\n              <div class=\"spec-selection-area\">\n                <div v-for=\"specGroup in specGroups\" :key=\"specGroup.name\" class=\"spec-group\">\n                  <div class=\"spec-label\">{{ specGroup.name }}</div>\n                  <div class=\"spec-values\">\n                    <div \n                      v-for=\"val in specGroup.values\" \n                      :key=\"val\"\n                      :class=\"['spec-val-btn', { active: selectedSpecs[specGroup.name] === val }]\"\n                      @click=\"handleSpecSelect(specGroup.name, val)\"\n                    >\n                      {{ val }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n\n            <!-- Êó† SKU ÊèêÁ§∫Âç°Áâá -->\n            <template v-else>\n              <div class=\"no-sku-notice\">\n                <div class=\"notice-emoji\">üì¶‚ú®</div>\n                <h3>ÊàëÊ≠£Âú®ÁñëÁãÇË°•Ë¥ß‰∏≠ÔºÅ</h3>\n                <p>ÂïÜÂìÅÊ≠£Âú®ÂáÜÂ§á‰∏≠ÔºåËØ∑Á®çÂêéÂÜçÊù•ÊàñËÅîÁ≥ªÂÆ¢Êúç‰∫ÜËß£Êõ¥Â§ö~</p>\n              </div>\n            </template>\n\n            <!-- SKU ÁÆÄ‰ªãÂå∫Âüü -->\n            <div v-if=\"matchedSku?.intro\" class=\"sku-intro-section\">\n              <span class=\"sku-intro-text\">{{ matchedSku.intro }}</span>\n            </div>\n\n            <!-- ‰ª∑Ê†ºÂ±ïÁ§∫Âå∫ -->\n            <div class=\"price-display-section compact-price-area\">\n              <!-- Êúâ SKU Êó∂ÊòæÁ§∫‰ª∑Ê†º -->\n              <template v-if=\"hasSkus\">\n                <div class=\"price-stock-row\">\n                  <div class=\"current-price-box\">\n                    <span class=\"p-amount\">{{ formatPrice(currentPrice) }}</span>\n                  </div>\n                  <div class=\"stock-info\">\n                    <span v-if=\"stockLoading\" class=\"stock-badge loading\">Êü•ËØ¢‰∏≠...</span>\n                    <span v-else-if=\"hasStock\" class=\"stock-badge\">Â∫ìÂ≠ò: {{ stock }}</span>\n                    <span v-else class=\"stock-badge out-of-stock\">ÊöÇÊó∂Áº∫Ë¥ß</span>\n                  </div>\n                </div>\n                \n                <div v-if=\"allowAddon && hasStock\" class=\"qty-control\">\n                  <div class=\"q-actions\">\n                    <button @click=\"qty = Math.max(1, qty-1)\" :disabled=\"!hasStock\">-</button>\n                    <input type=\"number\" v-model=\"qty\" min=\"1\" :disabled=\"!hasStock\" />\n                    <button @click=\"qty = qty+1\" :disabled=\"!hasStock || qty >= stock\">+</button>\n                  </div>\n                </div>\n              </template>\n              \n              <!-- Êó† SKU Êó∂ÊîæÂ§ßÊòæÁ§∫Áº∫Ë¥ßÊèêÁ§∫ -->\n              <template v-else>\n                <div class=\"no-price-notice\">\n                  <span class=\"out-of-stock-large\">ÊöÇÊó∂Áº∫Ë¥ß</span>\n                </div>\n              </template>\n            </div>\n\n            <div class=\"main-actions\">\n              <button class=\"primary-buy-btn\" @click=\"buyNow\" :disabled=\"stockLoading || !hasStock || !hasSkus || submitting\">\n                {{ stockLoading ? 'Âä†ËΩΩ‰∏≠...' : (hasSkus && hasStock ? 'Á´ãÂç≥ÊûÅÈÄüË¥≠‰π∞' : 'ÊöÇÊó∂Áº∫Ë¥ß') }}\n                <span class=\"btn-subtext\" v-if=\"!stockLoading && hasStock && hasSkus\">ÂÆâÂÖ®ÂêàËßÑ¬∑ÁßíÈÄüÂèëË¥ß</span>\n              </button>\n              <div class=\"secondary-btns\">\n                <button class=\"add-cart-btn\" @click=\"addToCart($event)\" :disabled=\"stockLoading || !hasStock || !hasSkus || submitting\">\n                  <el-icon><ShoppingCart /></el-icon>\n                  Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\n                </button>\n                <button \n                  :class=\"['favorite-btn', { favorited: isFavorited }]\" \n                  @click=\"toggleFavorite($event)\"\n                  :disabled=\"stockLoading || !hasStock || !hasSkus\"\n                >\n                  <el-icon><Star v-if=\"!isFavorited\" /><StarFilled v-else /></el-icon>\n                  {{ isFavorited ? 'Â∑≤Êî∂Ëóè' : 'Êî∂ËóèÂïÜÂìÅ' }}\n                </button>\n              </div>\n            </div>\n\n            <div class=\"safe-disclaimer\">\n              <el-icon><InfoFilled /></el-icon>\n              ÁâàÊùÉÂ£∞ÊòéÔºöÊú¨Á´ôÂ±ïÁ§∫ÁöÑÂæΩÊ†á„ÄÅÂïÜÊ†áÂèäÁõ∏ÂÖ≥Ê†áÂøóÂΩíÂêÑÊùÉÂà©‰∫∫ÊâÄÊúâ„ÄÇ\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ÂïÜÂìÅËØ¶ÊÉÖÂõæÊñáÂå∫ -->\n      <div class=\"product-detail-rich\">\n        <div class=\"detail-divider\">\n          <span>ÂïÜÂìÅËØ¶ÊÉÖ‰ªãÁªç</span>\n        </div>\n        <div class=\"detail-content-wrap\">\n          <div v-for=\"(mod, idx) in detailModules\" :key=\"idx\" class=\"detail-module\">\n            <template v-if=\"mod.type === 'text'\">\n              <div class=\"detail-text-box\">{{ mod.content }}</div>\n            </template>\n            <template v-else-if=\"mod.type === 'image'\">\n              <img :src=\"mod.content\" class=\"detail-full-img\" loading=\"lazy\" />\n            </template>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    \n\n    <LoginRegisterModal :visible=\"modal.showLogin\" @close=\"modal.closeLogin()\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { \n  CircleCheck, \n  QuestionFilled, \n  ShoppingCart, \n  Star, \n  StarFilled,\n  InfoFilled,\n  Right\n} from '@element-plus/icons-vue'\nimport { ref, computed, onMounted, onUnmounted, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useModalStore } from '@/stores/modal'\nimport { useUserStore } from '@/stores/user'\nimport { useCartStore } from '@/stores/cart'\nimport { goodsApi } from '@/api/goods'\nimport { supabaseProductApi, supabaseFaqApi } from '@/api/supabase'\n\nconst route = useRoute()\nconst router = useRouter()\nconst config = useRuntimeConfig()\nconst modal = useModalStore()\nconst userStore = useUserStore()\nconst cartStore = useCartStore()\n\n// ‰øÆÂ§ç goodsId Á±ªÂûãÈóÆÈ¢ò - Supabase ‰ΩøÁî® UUID Â≠óÁ¨¶‰∏≤\nconst goodsId = computed(() => {\n  const id = route.params.id\n  return Array.isArray(id) ? id[0] : id\n})\n\n// --- SSR Êï∞ÊçÆËé∑Âèñ ---\nconst { data: goodsResponse, error: fetchError } = await useAsyncData(\n  `goods-detail-${goodsId.value}`,\n  () => goodsApi.getGoodsDetail(goodsId.value)\n)\n\nconst goodsData = computed(() => goodsResponse.value || null)\n// API ËøîÂõû success: false ‰πüËßÜ‰∏∫ÈîôËØØ\nconst goodsError = computed(() => !!fetchError.value || (goodsResponse.value && !goodsResponse.value.success))\n\n// --- SEO ÈÖçÁΩÆ ---\nconst goodsSeo = computed(() => {\n  const data = goodsData.value?.data || {}\n  return {\n    title: data.product_name || 'ÂïÜÂìÅËØ¶ÊÉÖ',\n    desc: data.description || 'Âá°ÂõæÊãâÊèê‰æõ‰ºòË¥®Êï∞Â≠óÂïÜÂìÅÊúçÂä°',\n    image: data.coverImage || data.image\n  }\n})\n\nuseHead({\n  title: computed(() => `${goodsSeo.value.title} - Âá°ÂõæÊãâ`),\n  meta: [\n    { name: 'description', content: computed(() => goodsSeo.value.desc) },\n    { property: 'og:title', content: computed(() => goodsSeo.value.title) },\n    { property: 'og:description', content: computed(() => goodsSeo.value.desc) },\n    { property: 'og:image', content: computed(() => goodsSeo.value.image) },\n    { property: 'og:url', content: computed(() => `${config.public.siteUrl || 'http://localhost:3000'}/goods/${goodsId.value}`) }\n  ]\n})\n\n// --- Êï∞ÊçÆÁä∂ÊÄÅ ---\nconst qty = ref(1)\nconst stock = ref(0) // ÂèØÁî®Â∫ìÂ≠òÊï∞Èáè\nconst submitting = ref(false) // Êèê‰∫§Áä∂ÊÄÅ\nconst selectedSpecs = ref<Record<string, string>>({})\nconst selectedSkuImage = ref('')\n\n// Êñ∞Â¢ûÔºöSKU ÂèØË¥≠‰π∞ÊÄßÁä∂ÊÄÅ\nconst skuAvailable = ref(false)\nconst stockLoading = ref(false) // ÈªòËÆ§‰∏çÂä†ËΩΩÔºåÂè™ÊúâÂú®ÂàáÊç¢SKUÊó∂ÊâçÂä†ËΩΩ\n\n// ËÆ°ÁÆóÊòØÂê¶ÊúâÂ∫ìÂ≠ò\nconst hasStock = computed(() => !stockLoading.value && skuAvailable.value && stock.value > 0)\n\n/**\n * Ê£ÄÊü• SKU ÂèØË¥≠‰π∞ÊÄßÔºàË∞ÉÁî®Êï∞ÊçÆÂ∫ìÂáΩÊï∞Ôºâ\n */\nconst checkSkuAvailability = async (skuId: string) => {\n  if (!skuId) {\n    skuAvailable.value = false\n    stock.value = 0\n    stockLoading.value = false\n    return\n  }\n  \n  stockLoading.value = true\n  try {\n    const result = await supabaseProductApi.checkSkuAvailability(skuId)\n    skuAvailable.value = result.available\n    stock.value = result.availableCount\n  } catch (e) {\n    console.error('Ê£ÄÊü• SKU ÂèØË¥≠‰π∞ÊÄßÂ§±Ë¥•:', e)\n    skuAvailable.value = false\n    stock.value = 0\n  } finally {\n    stockLoading.value = false\n  }\n}\n\nconst buyNow = async () => {\n  if (!userStore.isLoggedIn) {\n    modal.showLogin = true\n    return\n  }\n  if (!hasStock.value) {\n    ElMessage.warning('ÂïÜÂìÅÊöÇÊó∂Áº∫Ë¥ß')\n    return\n  }\n  if (!matchedSku.value) {\n    ElMessage.warning('ËØ∑ÈÄâÊã©ÂïÜÂìÅËßÑÊ†º')\n    return\n  }\n  if (submitting.value) return\n  \n  submitting.value = true\n  try {\n    // ‰ΩøÁî®È¢ÑËÆ¢Âçï API\n    const { supabasePreOrderApi } = await import('@/api/supabase')\n    const result = await supabasePreOrderApi.createPreOrder(\n      matchedSku.value.id,\n      qty.value,\n      'buy_now'\n    )\n    \n    if (!result.success) {\n      if (result.code === 'DUPLICATE_ORDER') {\n         try {\n           await ElMessageBox.confirm(\n             'ÊÇ®Â∑≤Áªè‰∏ãËøáËØ•ÂïÜÂìÅÁöÑËÆ¢Âçï‰∫ÜÔºåÂø´ÂéªÁúãÁúãÂêß',\n             'ÈáçÂ§ç‰∏ãÂçïÊèêÁ§∫',\n             {\n               confirmButtonText: 'ÂéªÊü•Áúã',\n               cancelButtonText: 'ÂèñÊ∂à',\n               type: 'warning',\n               distinguishCancelAndClose: true\n             }\n           )\n           router.push('/profile/orders?tab=ÂæÖÊîØ‰ªò')\n           return\n         } catch (action: any) {\n            return\n         }\n      }\n\n      if (result.code === 'LIMIT_EXCEEDED') {\n         try {\n           await ElMessageBox.confirm(\n             'ÊÇ®ÁöÑÊú™ÊîØ‰ªòËÆ¢ÂçïÂ§™Â§ö‰∫ÜÔºåËØ∑ÂÖàÂ§ÑÁêÜ‰∏Ä‰∏ãÂêß',\n             'ËÆ¢ÂçïÊï∞ÈáèË∂ÖÈôê',\n             {\n               confirmButtonText: 'ÂéªÊü•Áúã',\n               cancelButtonText: 'ÂèñÊ∂à',\n               type: 'warning',\n               distinguishCancelAndClose: true\n             }\n           )\n           router.push('/profile/orders?tab=ÂæÖÊîØ‰ªò')\n           return\n         } catch (action: any) {\n            return\n         }\n      }\n      \n      ElMessage.error(result.error || 'ÂàõÂª∫È¢ÑËÆ¢ÂçïÂ§±Ë¥•')\n      return\n    }\n    \n    router.push(`/checkout/${result.pre_order_id}`)\n  } catch (e) {\n    console.error('Á´ãÂç≥Ë¥≠‰π∞Â§±Ë¥•', e)\n  } finally {\n    submitting.value = false\n  }\n}\n\n// Âä®Áîª composable\nimport { useCartAnimation } from '@/composables/useCartAnimation' // Á°Æ‰øùÊ≠£Á°ÆÂØºÂÖ•\nconst { startAnimation } = useCartAnimation()\n\nconst addToCart = async (event: MouseEvent) => {\n  if (!userStore.isLoggedIn) {\n     modal.showLogin = true\n     return\n  }\n  if (!hasStock.value) {\n    ElMessage.warning('ÂïÜÂìÅÊöÇÊó∂Áº∫Ë¥ß')\n    return\n  }\n  if (!matchedSku.value) {\n    ElMessage.warning('ËØ∑ÈÄâÊã©ÂïÜÂìÅËßÑÊ†º')\n    return\n  }\n  if (submitting.value) return\n\n  submitting.value = true\n  try {\n    const result = await cartStore.addToCart(matchedSku.value.id, qty.value)\n    if (result.success) {\n      // ÊàêÂäüÔºöÊâßË°åÂä®Áîª\n      const btnEl = event.target as HTMLElement\n      // Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÂõæÊ†áÔºåÂèØËÉΩÈúÄË¶ÅÊâæÂà∞ÊåâÈíÆÊú¨Ë∫´\n      const target = btnEl.closest('button') || btnEl\n      \n      startAnimation(target, matchedSku.value.image || goodsInfo.value.image, () => {\n         cartStore.miniCartVisible = true\n         ElMessage.success('Â∑≤ÊàêÂäüÂä†ÂÖ•Ë¥≠Áâ©ËΩ¶')\n      })\n      \n    } else {\n      if (result.code === 'DIFFERENT_SKU') {\n         ElMessage.warning(result.msg || 'ÊöÇÊó∂‰∏çÊîØÊåÅÂêåÊó∂Ë¥≠‰π∞‰∏çÂêåÂïÜÂìÅ')\n      } else {\n         ElMessage.error(result.msg || 'Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶Â§±Ë¥•')\n      }\n    }\n  } catch (e) {\n    ElMessage.error('Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶Â§±Ë¥•')\n  } finally {\n    submitting.value = false\n  }\n}\n\n// --- Ê®°Êãü‰∏é API ÈÄÇÈÖçÊï∞ÊçÆ ---\nconst goodsInfo = computed(() => {\n  const data = goodsData.value?.data || ({} as any)\n  return {\n    name: data.title || data.product_name || 'Ê≠£Âú®Âä†ËΩΩÂïÜÂìÅ...',\n    image: data.coverImage || data.image || '/images/placeholder.png',\n    price: data.price || 0,\n    sales: data.initial_sales || data.sales || 0,\n    rating: data.rating || 100\n  }\n})\n\n// ÊòØÂê¶ÂÖÅËÆ∏Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶\nconst allowAddon = computed(() => {\n  return (goodsData.value?.data as any)?.allow_addon === true\n})\n\n// ËØ¶ÊÉÖÊ®°Âùó\nconst detailModules = computed(() => {\n  const dataModules = (goodsData.value?.data as any)?.detail_modules\n  if (dataModules && dataModules.length > 0) return dataModules\n  \n  return [\n    { type: 'image', content: '/images/client/pc/netflix_detail_1.png' },\n    { type: 'image', content: '/images/client/pc/netflix_detail_2.png' }\n  ]\n})\n\n// ÂçñÁÇπÊ†áÁ≠æ (Unique Ê†∑Âºè)\nconst serviceTags = [\n  'ÂÆòÊñπÈááË¥≠„ÉªÊ≠£ÂìÅ‰øùÈöú',\n  'ÂÖ®Á®ãË¥®‰øù„ÉªÊó†ÂøßÂîÆÂêé',\n  'ÊûÅÈÄüÂìçÂ∫î„Éª‰∫∫Â∑•ÊúçÂä°',\n  'ÂÆâÂÖ®Âä†ÂØÜ„ÉªÈöêÁßÅ‰øùÊä§'\n]\n\n// FAQ ÊªöÂä®Êï∞ÊçÆ\nconst fetchedFaqs = ref<any[]>([])\nconst faqs = computed(() => {\n  if (fetchedFaqs.value.length > 0) return fetchedFaqs.value\n  \n  return [\n    { id: '1', question: '‰∏ãÂçïÂêéÂ§ö‰πÖÂèëË¥ßÔºü‰∏ÄËà¨‰∏∫ÁßíÁ∫ßËá™Âä®ÂèëË¥ß„ÄÇ' },\n    { id: '2', question: 'Ë¥¶Âè∑Êó†Ê≥ïÁôªÂΩïÊÄé‰πàÂäûÔºüËØ∑ËÅîÁ≥ªÂú®Á∫ø‰∫∫Â∑•ÂÆ¢ÊúçÂ§ÑÁêÜ„ÄÇ' },\n    { id: '3', question: 'ÊîØÊåÅÈÄÄÊ¨æÂêóÔºüËôöÊãüÂïÜÂìÅÂèëË¥ßÂêéÈùûË¥®ÈáèÈóÆÈ¢ò‰∏çÊîØÊåÅÈÄÄÊ¨æ„ÄÇ' },\n    { id: '4', question: 'ÂèØ‰ª•ÈïøÊúüÁª≠Ë¥πÂêóÔºüÊîØÊåÅÂêåÂè∑Áª≠Ë¥πÔºåËØ∑ÂÖ≥Ê≥®ËÆ¢ÈòÖÂà∞ÊúüÊèêÈÜí„ÄÇ' }\n  ]\n})\n// Êó†ÁºùÊªöÂä®ÈÄªËæë\nconst activeFaqIndex = ref(0)\nconst isTransitioning = ref(true)\nlet tickerTimer: any = null\n\n// ÊûÑÂª∫ÊòæÁ§∫ÂàóË°®ÔºöÂéüÂàóË°® + Á¨¨‰∏ÄÈ°πÂÖãÈöÜ\nconst displayFaqs = computed(() => {\n  if (faqs.value.length === 0) return []\n  return [...faqs.value, faqs.value[0]] // Append clone of first item\n})\n\nconst tickerStyle = computed(() => ({\n  transform: `translateY(-${activeFaqIndex.value * 40}px)`,\n  transition: isTransitioning.value ? 'transform 0.5s ease-in-out' : 'none'\n}))\n\nconst startFaqTicker = () => {\n  if (tickerTimer) clearInterval(tickerTimer)\n  tickerTimer = setInterval(() => {\n    isTransitioning.value = true\n    activeFaqIndex.value++\n\n    if (activeFaqIndex.value === faqs.value.length) {\n      setTimeout(() => {\n        isTransitioning.value = false \n        activeFaqIndex.value = 0 \n      }, 500) \n    }\n  }, 3000) \n}\n\nconst fetchBoundFaqs = async () => {\n  try {\n    let finalFaqs: any[] = []\n    \n    // 1. Ëé∑ÂèñÁªëÂÆö FAQ\n    const res = await supabaseFaqApi.getFaqsByProduct(goodsId.value)\n    if (res.success && res.faqs.length > 0) {\n      finalFaqs = [...res.faqs]\n    }\n    \n    // 2. Â¶ÇÊûú‰∏çË∂≥ 5 Êù°ÔºåËé∑ÂèñÈÄöÁî® FAQ Ë°•ÈΩê\n    if (finalFaqs.length < 5) {\n      const resGen = await supabaseFaqApi.getFaqs()\n      if (resGen.success && resGen.faqs.length > 0) {\n        const existingIds = new Set(finalFaqs.map(f => f.id))\n        const generalToAdd = resGen.faqs.filter((f: any) => !existingIds.has(f.id))\n        finalFaqs = [...finalFaqs, ...generalToAdd].slice(0, 5)\n      }\n    }\n    \n    fetchedFaqs.value = finalFaqs\n  } catch (e) {\n    console.error('Fetch FAQ error:', e)\n  }\n}\n\nconst goToFaq = (faq: any) => {\n  if (faq.id) {\n    router.push(`/faq?q=${faq.id}`)\n  } else {\n    router.push('/faq')\n  }\n}\n\n// ËßÑÊ†ºÂ§ÑÁêÜ (SKU)\nconst skus = computed(() => (goodsData.value?.data as any)?.skus || [])\n\n// ÊòØÂê¶Êúâ SKU\nconst hasSkus = computed(() => skus.value.length > 0)\n\nconst specGroups = computed(() => {\n  const backendGroups = (goodsData.value?.data as any)?.specGroups\n  if (backendGroups && backendGroups.length > 0) {\n    return backendGroups\n  }\n  \n  if (skus.value.length > 0) {\n    const groups: Record<string, Set<string>> = {}\n    skus.value.forEach((sku: any) => {\n      const combination = sku.spec_combination || {}\n      Object.entries(combination).forEach(([name, value]) => {\n        if (!groups[name]) groups[name] = new Set()\n        groups[name].add(value as string)\n      })\n    })\n    \n    return Object.keys(groups).map(name => ({\n      name,\n      values: Array.from(groups[name])\n    }))\n  }\n  \n  return []\n})\n\n// ÂΩìÂâçÂåπÈÖçÂà∞ÁöÑ SKU\nconst matchedSku = computed(() => {\n  if (skus.value.length === 0) return null\n  \n  // Êü•ÊâæÂÆåÂÖ®ÂåπÈÖçÁöÑ SKU\n  return skus.value.find((sku: any) => {\n    const combination = sku.spec_combination || {}\n    // Ê£ÄÊü•ÊâÄÊúâÂ∑≤ÈÄâËßÑÊ†ºÊòØÂê¶ÈÉΩÂåπÈÖç\n    return Object.entries(selectedSpecs.value).every(([name, value]) => {\n      return combination[name] === value\n    })\n  })\n})\n\nconst handleSpecSelect = async (group: string, val: string) => {\n  selectedSpecs.value[group] = val\n  if (matchedSku.value) {\n    if (matchedSku.value.image) {\n      selectedSkuImage.value = matchedSku.value.image\n    }\n    await checkSkuAvailability(matchedSku.value.id)\n  }\n}\n\n// ÂΩìÂâçÈÄâ‰∏≠ÁöÑ SKU ‰ª∑Ê†º‰∏éÂõæÁâá\nconst currentPrice = computed(() => {\n  return matchedSku.value?.price || goodsInfo.value.price || 35.00\n})\n\nconst formatPrice = (price: number | string) => {\n  const num = typeof price === 'string' ? parseFloat(price) : price\n  return num.toFixed(2)\n}\n\nconst skuImages = computed(() => {\n  const images = skus.value.map((s: any) => s.image).filter(Boolean)\n  return images.length > 0 ? Array.from(new Set(images)) : [goodsInfo.value.image]\n})\n\n// --- Êî∂ËóèÂäüËÉΩ ---\nconst isFavorited = ref(false)\nconst favoriteLoading = ref(false)\n\nconst checkFavoriteStatus = async () => {\n  if (!userStore.isLoggedIn || !goodsId.value) return\n  const { favoriteApi } = await import('@/api/common')\n  const res = await favoriteApi.checkFavorite(String(goodsId.value), matchedSku.value?.id)\n  isFavorited.value = res.data || false\n}\n\n// Âä®Áîª composable\nimport { useFlyingAnimation } from '@/composables/useFlyingAnimation'\nconst { startAnimation: startFavAnimation } = useFlyingAnimation()\n\nconst toggleFavorite = async (event: MouseEvent) => {\n  if (!userStore.isLoggedIn) {\n    modal.showLogin = true\n    return\n  }\n  if (favoriteLoading.value) return\n  \n  favoriteLoading.value = true\n  try {\n    const { favoriteApi } = await import('@/api/common')\n    if (isFavorited.value) {\n      // ËøôÈáåÁöÑÈÄªËæë‰øùÊåÅ‰∏çÂèòÔºöÂ¶ÇÊûúÊòØÂèñÊ∂àÊî∂ËóèÔºåÊöÇÊó∂ÊèêÁ§∫Áî®Êà∑ÂéªÂàóË°®È°µÊìç‰Ωú\n      // Áî®Êà∑ÊèêÂà∞ \"ÂèñÊ∂àÊî∂ËóèÂ∞±ÊòØË¶ÅÂáèÂêóÔºüÂØπ‰∏çË¶ÅÂáè\", ÊÑèÂë≥ÁùÄÂèñÊ∂àÊî∂ËóèÂèØËÉΩ‰∏çÈúÄË¶ÅÁâπÊïàÔºåÊàñËÄÖ‰∏çÊúüÊúõÊúâÂèçÂêëÂä®Áîª„ÄÇ\n      // ÂΩìÂâçÈÄªËæëÊòØ \"ÂèñÊ∂àÊî∂ËóèËØ∑ÂâçÂæÄÊàëÁöÑÊî∂ËóèÈ°µÈù¢\"ÔºåÊöÇ‰∏ç‰øÆÊîπÊ≠§Ë°å‰∏∫ÔºåÈô§ÈùûÊòéÁ°ÆË¶ÅÊ±ÇÂéüÂú∞ÂèñÊ∂à„ÄÇ\n      // Â¶ÇÊûúË¶ÅÂéüÂú∞ÂèñÊ∂àÔºöË∞ÉÁî® removeFavoriteAPI -> isFavorited = false -> Toast 'Â∑≤ÂèñÊ∂à'\n      // Ê†πÊçÆ Analysis: \"ÂèñÊ∂àÊî∂Ëóè...‰∏çË¶ÅÂáèÂ∞±ÊòØËøô‰∏™Âè≥‰∏äËßíËøô‰∏™Âä®Áîª\" -> Áî®Êà∑‰ºº‰πéÂ∏åÊúõÂèñÊ∂à‰πüÂú®ËØ¶ÊÉÖÈ°µÂÅöÔºü\n      // User said: \"ÊàëÈúÄË¶ÅËøô‰πà‰ºòÂåñ‰πãÂêéÈÇ£‰∏™ÂèñÊ∂àÊî∂ËóèÂêóÔºüÂèñÊ∂àÊî∂ËóèÂ∞±ÊòØË¶ÅÂáèÂêóÔºüÂØπ‰∏çË¶ÅÂáèÂ∞±ÊòØËøô‰∏™Âè≥‰∏äËßíËøô‰∏™Âä®Áîª\"\n      // Interpretation: Don't do a \"flying away\" animation for remove, or maybe just keep simple.\n      // Current code forces user to go to favorites page to remove. Let's keep it simple for now as Plan didn't specify changing this logic (Plan said \"Cancel Favorite: ... Current logic prompts to go to page. We will keep this unless asked\").\n      ElMessage.info('ÂèñÊ∂àÊî∂ËóèËØ∑ÂâçÂæÄ\"ÊàëÁöÑÊî∂Ëóè\"È°µÈù¢')\n    } else {\n      const res = await favoriteApi.addFavorite(String(goodsId.value), matchedSku.value?.id)\n      if (res.success) {\n        isFavorited.value = true\n        // Ëß¶ÂèëÈ£ûÂÖ•Âä®Áîª\n        const btnEl = event.target as HTMLElement\n        // ÊâæÂà∞ÊåâÈíÆÂÖÉÁ¥†\n        const targetBtn = btnEl.closest('.favorite-btn') as HTMLElement || btnEl\n        const imageToFly = selectedSkuImage.value || goodsInfo.value.image\n\n        startFavAnimation(targetBtn, imageToFly, 'favorites-icon-ref', () => {\n             // Âä®ÁîªÁªìÊùüÂêé‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÊìç‰ΩúÔºåÁä∂ÊÄÅÂ∑≤ÁªèÂèò‰∫Ü\n        })\n        ElMessage.success('Êî∂ËóèÊàêÂäü')\n      } else {\n        ElMessage.warning(res.msg || 'Êî∂ËóèÂ§±Ë¥•')\n      }\n    }\n  } finally {\n    favoriteLoading.value = false\n  }\n}\n\nconst goBack = () => router.back()\n\n// Client-side initialization logic\nconst initClientState = async () => {\n   // Âè™ÊúâÊàêÂäüËé∑ÂèñÊï∞ÊçÆÂêéÊâçËøõË°åÂÆ¢Êà∑Á´ØÁä∂ÊÄÅÂàùÂßãÂåñ\n   if (!goodsData.value?.success) return\n\n   // ÈªòËÆ§ÈÄâ‰∏≠Á¨¨‰∏Ä‰∏™ËßÑÊ†º\n    if (specGroups.value && specGroups.value.length > 0) {\n        specGroups.value.forEach((g: { name: string; values: string[] }) => {\n            if (!selectedSpecs.value[g.name]) {\n               selectedSpecs.value[g.name] = g.values[0]\n            }\n        })\n    }\n    \n    // ËÆæÁΩÆÈªòËÆ§ SKU ÁöÑÂõæÁâá\n    if (matchedSku.value) {\n        if (matchedSku.value.image) {\n           selectedSkuImage.value = matchedSku.value.image\n        }\n        await checkSkuAvailability(matchedSku.value.id)\n    } else if (skus.value.length > 0 && skus.value[0].id) {\n        await checkSkuAvailability(skus.value[0].id)\n    }\n    \n    // Fetch FAQs\n    fetchBoundFaqs()\n}\n\nonMounted(async () => {\n  await initClientState()\n  checkFavoriteStatus()\n  startFaqTicker()\n})\n\nonUnmounted(() => {\n  if (tickerTimer) clearInterval(tickerTimer)\n})\n</script>\n\n<style scoped src=\"@/assets/styles/goods-detail.css\"></style>\n"],"names":["_withAsyncContext","_ssrRenderList","_ssrRenderComponent","_withCtx","_ssrInterpolate","_ssrIncludeBooleanAttr","_unref"],"mappings":"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","x_google_ignoreList":[0]}