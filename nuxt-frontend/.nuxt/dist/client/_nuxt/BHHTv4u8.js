import{cn as Ie,bX as Y,co as se,bY as G,c0 as ge,f as X,b6 as re,b$ as Z,r as N,g as R,cl as W,J as z,cu as ne,cd as _e,c as Te,D as Ne,o as Ee,aA as Me,n as ye,l as U,K as j,dT as Ve,dU as ze,ba as De,dV as fe,h as We,dH as Ke,d5 as Ue,b as f,E as H,a2 as He,L as Ge,c_ as je,c5 as le,c6 as $,bk as Ye,cm as Xe,aF as oe,p as Ze,b4 as Re,c2 as qe,bV as Je,am as Qe,dW as et,i as tt,aR as at,c3 as st,c4 as nt}from"./CEI0siaN.js";import{c as lt,r as Se}from"./CB_o0Cdi.js";import{a as L,c as ot}from"./aSYcAdI9.js";import{t as ce}from"./Cq9Fpw4b.js";import{U as Ce}from"./BB_Ol6Sd.js";import{u as rt}from"./IibC-tXt.js";import{o as ct}from"./DE5qJ7kT.js";const xt=50,Ot="itemRendered",kt="scroll",Bt="forward",$t="backward",Lt="auto",Ft="smart",It="start",Mt="center",Vt="end",we="horizontal",it="vertical",zt="ltr",Dt="rtl",Wt="negative",Kt="positive-ascending",Ut="positive-descending",Ht={[we]:"left",[it]:"top"},Gt=20,ut=({atEndEdge:e,atStartEdge:r,layout:g},_)=>{let a,i=0;const E=v=>v<0&&r.value||v>0&&e.value;return{hasReachedEdge:E,onWheel:v=>{lt(a);let{deltaX:b,deltaY:p}=v;v.shiftKey&&p!==0&&(b=p,p=0);const h=g.value===we?b:p;E(h)||(i+=h,!Ie()&&h!==0&&v.preventDefault(),a=Se(()=>{_(i),i=0}))}}},q=Symbol("tabsRootContextKey"),dt=Y({tabs:{type:G(Array),default:()=>se([])},tabRefs:{type:G(Object),default:()=>se({})}}),me="ElTabBar",vt=X({name:me,__name:"tab-bar",props:dt,setup(e,{expose:r}){const g=e,_=re(q);_||ce(me,"<el-tabs><el-tab-bar /></el-tabs>");const a=Z("tabs"),i=N(),E=N(),m=R(()=>{var s;return W(_.props.defaultValue)||!!((s=E.value)!=null&&s.transform)}),v=()=>{let s=0,S=0;const o=["top","bottom"].includes(_.props.tabPosition)?"width":"height",O=o==="width"?"x":"y",A=O==="x"?"left":"top";return g.tabs.every(C=>{if(W(C.paneName))return!1;const t=g.tabRefs[C.paneName];if(!t)return!1;if(!C.active)return!0;s=t[`offset${L(A)}`],S=t[`client${L(o)}`];const T=window.getComputedStyle(t);return o==="width"&&(S-=Number.parseFloat(T.paddingLeft)+Number.parseFloat(T.paddingRight),s+=Number.parseFloat(T.paddingLeft)),!1}),{[o]:`${S}px`,transform:`translate${L(O)}(${s}px)`}},b=()=>E.value=v(),p=[],h=()=>{p.forEach(s=>s.stop()),p.length=0,Object.values(g.tabRefs).forEach(s=>{p.push(ne(s,b))})};z(()=>g.tabs,async()=>{await j(),b(),h()},{immediate:!0});const u=ne(i,()=>b());return _e(()=>{p.forEach(s=>s.stop()),p.length=0,u.stop()}),r({ref:i,update:b}),(s,S)=>m.value?(Ee(),Te("div",{key:0,ref_key:"barRef",ref:i,class:ye([U(a).e("active-bar"),U(a).is(U(_).props.tabPosition)]),style:Me(E.value)},null,6)):Ne("v-if",!0)}});var bt=ge(vt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const ft=Y({panes:{type:G(Array),default:()=>se([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),mt={tabClick:(e,r,g)=>g instanceof Event,tabRemove:(e,r)=>r instanceof Event},pe="ElTabNav",pt=X({name:pe,props:ft,emits:mt,setup(e,{expose:r,emit:g}){const _=re(q);_||ce(pe,"<el-tabs><tab-nav /></el-tabs>");const a=Z("tabs"),i=Ve(),E=ze(),m=N(),v=N(),b=N(),p=N({}),h=N(),u=N(!1),s=N(0),S=N(!1),o=N(!0),O=De(),A=R(()=>["top","bottom"].includes(_.props.tabPosition)),C=R(()=>A.value?"width":"height"),t=R(()=>({transform:`translate${C.value==="width"?"X":"Y"}(-${s.value}px)`})),{width:T,height:w}=fe(m),{width:F,height:V}=fe(v,{width:0,height:0},{box:"border-box"}),D=R(()=>A.value?T.value:w.value),I=R(()=>A.value?F.value:V.value),{onWheel:M}=ut({atStartEdge:R(()=>s.value<=0),atEndEdge:R(()=>I.value-s.value<=D.value),layout:R(()=>A.value?"horizontal":"vertical")},n=>{s.value=ot(s.value+n,0,I.value-D.value)}),J=()=>{if(!m.value)return;const n=m.value[`offset${L(C.value)}`],d=s.value;if(!d)return;const l=d>n?d-n:0;s.value=l},Ae=()=>{if(!m.value||!v.value)return;const n=v.value[`offset${L(C.value)}`],d=m.value[`offset${L(C.value)}`],l=s.value;if(n-l<=d)return;const c=n-l>d*2?l+d:n-d;s.value=c},ie=async()=>{const n=v.value;if(!u.value||!b.value||!m.value||!n)return;await j();const d=p.value[e.currentName];if(!d)return;const l=m.value,c=d.getBoundingClientRect(),y=l.getBoundingClientRect(),P=A.value?n.offsetWidth-y.width:n.offsetHeight-y.height,k=s.value;let x=k;A.value?(c.left<y.left&&(x=k-(y.left-c.left)),c.right>y.right&&(x=k+c.right-y.right)):(c.top<y.top&&(x=k-(y.top-c.top)),c.bottom>y.bottom&&(x=k+(c.bottom-y.bottom))),x=Math.max(x,0),s.value=Math.min(x,P)},ue=()=>{var n;if(!v.value||!m.value)return;e.stretch&&((n=h.value)==null||n.update());const d=v.value[`offset${L(C.value)}`],l=m.value[`offset${L(C.value)}`],c=s.value;l<d?(u.value=u.value||{},u.value.prev=c,u.value.next=c+l<d,d-c<l&&(s.value=d-l)):(u.value=!1,c>0&&(s.value=0))},xe=n=>{const d=le(n);let l=0;switch(d){case $.left:case $.up:l=-1;break;case $.right:case $.down:l=1;break;default:return}const c=Array.from(n.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let P=c.indexOf(n.target)+l;P<0?P=c.length-1:P>=c.length&&(P=0),c[P].focus({preventScroll:!0}),c[P].click(),de()},de=()=>{o.value&&(S.value=!0)},Q=()=>S.value=!1,Oe=(n,d)=>{p.value[d]=n},ke=async()=>{await j();const n=p.value[e.currentName];n?.focus({preventScroll:!0})};return z(i,n=>{n==="hidden"?o.value=!1:n==="visible"&&setTimeout(()=>o.value=!0,50)}),z(E,n=>{n?setTimeout(()=>o.value=!0,50):o.value=!1}),ne(b,()=>{Se(ue)}),We(()=>setTimeout(()=>ie(),0)),Ke(()=>ue()),r({scrollToActiveTab:ie,removeFocus:Q,focusActiveTab:ke,tabListRef:v,tabBarRef:h,scheduleRender:()=>Ue(O)}),()=>{const n=u.value?[f("span",{class:[a.e("nav-prev"),a.is("disabled",!u.value.prev)],onClick:J},[f(H,null,{default:()=>[f(He,null,null)]})]),f("span",{class:[a.e("nav-next"),a.is("disabled",!u.value.next)],onClick:Ae},[f(H,null,{default:()=>[f(Ge,null,null)]})])]:null,d=e.panes.map((l,c)=>{var y,P,k,x,ve;const Be=l.uid,ee=l.props.disabled,K=(P=(y=l.props.name)!=null?y:l.index)!=null?P:`${c}`,te=!ee&&(l.isClosable||l.props.closable!==!1&&e.editable);l.index=`${c}`;const $e=te?f(H,{class:"is-icon-close",onClick:B=>g("tabRemove",l,B)},{default:()=>[f(je,null,null)]}):null,Le=((x=(k=l.slots).label)==null?void 0:x.call(k))||l.props.label,Fe=!ee&&l.active?(ve=e.tabindex)!=null?ve:_.props.tabindex:-1;return f("div",{ref:B=>Oe(B,K),class:[a.e("item"),a.is(_.props.tabPosition),a.is("active",l.active),a.is("disabled",ee),a.is("closable",te),a.is("focus",S.value)],id:`tab-${K}`,key:`tab-${Be}`,"aria-controls":`pane-${K}`,role:"tab","aria-selected":l.active,tabindex:Fe,onFocus:()=>de(),onBlur:()=>Q(),onClick:B=>{Q(),g("tabClick",l,K,B)},onKeydown:B=>{const be=le(B);te&&(be===$.delete||be===$.backspace)&&g("tabRemove",l,B)}},[Le,$e])});return O.value,f("div",{ref:b,class:[a.e("nav-wrap"),a.is("scrollable",!!u.value),a.is(_.props.tabPosition)]},[n,f("div",{class:a.e("nav-scroll"),ref:m},[e.panes.length>0?f("div",{class:[a.e("nav"),a.is(_.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(_.props.tabPosition))],ref:v,style:t.value,role:"tablist",onKeydown:xe,onWheel:M},[e.type?null:f(bt,{ref:h,tabs:[...e.panes],tabRefs:p.value},null),d]):null])])}}}),ht=Y({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:G(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ae=e=>Ye(e)||Xe(e),gt={[Ce]:e=>ae(e),tabClick:(e,r)=>r instanceof Event,tabChange:e=>ae(e),edit:(e,r)=>["remove","add"].includes(r),tabRemove:e=>ae(e),tabAdd:()=>!0},_t=X({name:"ElTabs",props:ht,emits:gt,setup(e,{emit:r,slots:g,expose:_}){var a;const i=Z("tabs"),E=R(()=>["left","right"].includes(e.tabPosition)),{children:m,addChild:v,removeChild:b,ChildrenSorter:p}=rt(Re(),"ElTabPane"),h=N(),u=N((a=W(e.modelValue)?e.defaultValue:e.modelValue)!=null?a:"0"),s=async(t,T=!1)=>{var w,F,V,D;if(!(u.value===t||W(t)))try{let I;if(e.beforeLeave){const M=e.beforeLeave(t,u.value);I=M instanceof Promise?await M:M}else I=!0;if(I!==!1){const M=(w=m.value.find(J=>J.paneName===u.value))==null?void 0:w.isFocusInsidePane();u.value=t,T&&(r(Ce,t),r("tabChange",t)),(V=(F=h.value)==null?void 0:F.removeFocus)==null||V.call(F),M&&((D=h.value)==null||D.focusActiveTab())}}catch{}},S=(t,T,w)=>{t.props.disabled||(r("tabClick",t,w),s(T,!0))},o=(t,T)=>{t.props.disabled||W(t.props.name)||(T.stopPropagation(),r("edit",t.props.name,"remove"),r("tabRemove",t.props.name))},O=()=>{r("edit",void 0,"add"),r("tabAdd")},A=t=>{const T=le(t);[$.enter,$.numpadEnter].includes(T)&&O()},C=t=>{const T=t.el.firstChild,w=["bottom","right"].includes(e.tabPosition)?t.children[0].el:t.children[1].el;T!==w&&T.before(w)};return z(()=>e.modelValue,t=>s(t)),z(u,async()=>{var t;await j(),(t=h.value)==null||t.scrollToActiveTab()}),qe(q,{props:e,currentName:u,registerPane:v,unregisterPane:b,nav$:h}),_({currentName:u,get tabNavRef(){return ct(h.value,["scheduleRender"])}}),()=>{const t=g["add-icon"],T=e.editable||e.addable?f("div",{class:[i.e("new-tab"),E.value&&i.e("new-tab-vertical")],tabindex:e.tabindex,onClick:O,onKeydown:A},[t?oe(g,"add-icon"):f(H,{class:i.is("icon-plus")},{default:()=>[f(Ze,null,null)]})]):null,w=()=>f(pt,{ref:h,currentName:u.value,editable:e.editable,type:e.type,panes:m.value,stretch:e.stretch,onTabClick:S,onTabRemove:o},null),F=f("div",{class:[i.e("header"),E.value&&i.e("header-vertical"),i.is(e.tabPosition)]},[f(p,null,{default:w,$stable:!0}),T]),V=f("div",{class:i.e("content")},[oe(g,"default")]);return f("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}],onVnodeMounted:C,onVnodeUpdated:C},[V,F])}}}),Tt=Y({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Nt=["id","aria-hidden","aria-labelledby"],he="ElTabPane",Et=X({name:he,__name:"tab-pane",props:Tt,setup(e){const r=e,g=Re(),_=Je(),a=re(q);a||ce(he,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Z("tab-pane"),E=N(),m=N(),v=R(()=>{var o;return(o=r.closable)!=null?o:a.props.closable}),b=R(()=>{var o;return a.currentName.value===((o=r.name)!=null?o:m.value)}),p=N(b.value),h=R(()=>{var o;return(o=r.name)!=null?o:m.value}),u=R(()=>!r.lazy||p.value||b.value),s=()=>{var o;return(o=E.value)==null?void 0:o.contains(document.activeElement)};z(b,o=>{o&&(p.value=!0)});const S=Qe({uid:g.uid,getVnode:()=>g.vnode,slots:_,props:r,paneName:h,active:b,index:m,isClosable:v,isFocusInsidePane:s});return a.registerPane(S),_e(()=>{a.unregisterPane(S)}),et(()=>{var o;_.label&&((o=a.nav$.value)==null||o.scheduleRender())}),(o,O)=>u.value?tt((Ee(),Te("div",{key:0,id:`pane-${h.value}`,ref_key:"paneRef",ref:E,class:ye(U(i).b()),role:"tabpanel","aria-hidden":!b.value,"aria-labelledby":`tab-${h.value}`},[oe(o.$slots,"default")],10,Nt)),[[at,b.value]]):Ne("v-if",!0)}});var Pe=ge(Et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const jt=st(_t,{TabPane:Pe}),Yt=nt(Pe);export{Lt as A,$t as B,Mt as C,xt as D,jt as E,Bt as F,we as H,Ot as I,zt as L,Dt as R,Ht as S,it as V,Yt as a,Ut as b,Wt as c,Kt as d,Gt as e,kt as f,Vt as g,It as h,Ft as i,ht as j,dt as k,mt as l,ft as m,Tt as n,q as o,gt as t,ut as u};
