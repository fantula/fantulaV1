import{f as z,r as c,am as A,h as R,c as V,a as i,i as L,b as l,w as a,B as n,o as C,d as u,E as O,l as P,p as W,t as g,aD as k,D as G,_ as H}from"./o2XBa361.js";import{E as J}from"./-Yx_0iEM.js";import{a as K,E as Q}from"./Ci1VNkC9.js";import{E as X}from"./C8ZH7i_a.js";import{E as Y}from"./1SfIsks3.js";import{E as Z,a as ee}from"./0BTaD5f-.js";import{E as te}from"./C1VB9pZ7.js";import{E as oe}from"./Cq9RPQ5L.js";import{E as le}from"./CziALilw.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{b as _}from"./Ct7sd9tI.js";import{v as ae}from"./BwD4Hz0h.js";import{E as re}from"./BfOrkIVm.js";import"./Culj45X8.js";import"./Dnj8X3EN.js";import"./ClnTspdU.js";import"./Cq9Fpw4b.js";import"./CqX7ZdKI.js";import"./Dlk0BVst.js";import"./qVmxJdp3.js";import"./DtTI1xRr.js";import"./Bh6H2ams.js";import"./t2w4jifC.js";import"./C9zJf5rn.js";import"./Bx0EXMjc.js";import"./Z6faUBN3.js";import"./BlW_46uR.js";import"./hXKBSGVD.js";import"./B_FoF6yT.js";import"./BCItYl8Z.js";import"./BB_Ol6Sd.js";import"./Dzr5IOAO.js";import"./DwwA_QlG.js";import"./DVQwC1Y0.js";import"./KSqZSeJ0.js";import"./BHSqheQV.js";import"./FKUjHIpz.js";import"./CQuNCUIC.js";import"./D6FW0B1r.js";import"./CleHDoLI.js";import"./Ds34GQx2.js";const ie={class:"admin-page"},ne={class:"page-actions"},se={class:"table-container"},me={style:{"font-size":"20px"}},de={class:"flex items-center"},pe={key:0},ce={class:"dialog-footer"},ue=z({__name:"article-categories",setup(_e){const y=c(!1),w=c([]),s=c(!1),b=c(!1),f=c(!1),t=A({id:"",name:"",icon:"ğŸ“",color:"#409EFF",sort_order:0,is_active:!0}),E=async()=>{y.value=!0;try{const{data:r,error:e}=await _.getCategories();if(e)throw e;w.value=r||[]}catch(r){n.error("è·å–åˆ†ç±»å¤±è´¥: "+r.message)}finally{y.value=!1}},U=()=>{f.value=!1,t.id="",t.name="",t.icon="ğŸ“",t.color="#409EFF",t.sort_order=10,t.is_active=!0,s.value=!0},B=r=>{f.value=!0,Object.assign(t,r),s.value=!0},D=async()=>{if(!t.name){n.warning("è¯·è¾“å…¥åˆ†ç±»åç§°");return}b.value=!0;try{const r={name:t.name,icon:t.icon,color:t.color,sort_order:t.sort_order,is_active:t.is_active};if(f.value){const{error:e}=await _.updateCategory(t.id,r);if(e)throw e;n.success("æ›´æ–°æˆåŠŸ")}else{const{error:e}=await _.createCategory(r);if(e)throw e;n.success("åˆ›å»ºæˆåŠŸ")}s.value=!1,E()}catch(r){n.error("æ“ä½œå¤±è´¥: "+r.message)}finally{b.value=!1}},F=async r=>{try{const{error:e}=await _.updateCategory(r.id,{is_active:r.is_active});if(e)throw r.is_active=!r.is_active,e;n.success(r.is_active?"å·²å¯ç”¨":"å·²ç¦ç”¨")}catch(e){n.error("æ›´æ–°çŠ¶æ€å¤±è´¥: "+e.message)}},I=r=>{re.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»å—ï¼Ÿ","è­¦å‘Š",{confirmButtonText:"ç¡®å®šåˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{try{const{error:e}=await _.deleteCategory(r.id);if(e)throw e;n.success("åˆ é™¤æˆåŠŸ"),E()}catch(e){n.error("åˆ é™¤å¤±è´¥: "+e.message)}})};return R(()=>{E()}),(r,e)=>{const N=O,d=J,m=Q,h=X,S=K,x=Y,p=ee,T=te,$=oe,j=Z,q=le,M=ae;return C(),V("div",ie,[i("div",ne,[l(d,{type:"primary",onClick:U},{default:a(()=>[l(N,{class:"mr-1"},{default:a(()=>[l(P(W))]),_:1}),e[8]||(e[8]=u(" æ–°å¢åˆ†ç±» ",-1))]),_:1})]),L((C(),V("div",se,[l(S,{data:w.value,border:"",style:{width:"100%"},"row-key":"id"},{default:a(()=>[l(m,{prop:"sort_order",label:"æ’åº",width:"80",align:"center"}),l(m,{prop:"icon",label:"å›¾æ ‡",width:"80",align:"center"},{default:a(({row:o})=>[i("span",me,g(o.icon),1)]),_:1}),l(m,{prop:"name",label:"åç§°","min-width":"150"},{default:a(({row:o})=>[i("span",{style:k({color:o.color,fontWeight:"bold"})},g(o.name),5)]),_:1}),l(m,{prop:"color",label:"é¢œè‰²ä»£ç ",width:"120"},{default:a(({row:o})=>[i("div",de,[i("div",{style:k({background:o.color,width:"16px",height:"16px",borderRadius:"4px",marginRight:"8px",border:"1px solid #ddd"})},null,4),i("span",null,g(o.color),1)])]),_:1}),l(m,{label:"çŠ¶æ€",width:"100",align:"center"},{default:a(({row:o})=>[l(h,{modelValue:o.is_active,"onUpdate:modelValue":v=>o.is_active=v,"active-color":"#13ce66","inactive-color":"#ff4949",onChange:v=>F(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(m,{label:"æ“ä½œ",width:"180",fixed:"right",align:"center"},{default:a(({row:o})=>[l(d,{link:"",type:"primary",onClick:v=>B(o)},{default:a(()=>[...e[9]||(e[9]=[u("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(d,{link:"",type:"danger",onClick:v=>I(o)},{default:a(()=>[...e[10]||(e[10]=[u("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])),[[M,y.value]]),l(q,{modelValue:s.value,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value=o),title:f.value?"ç¼–è¾‘åˆ†ç±»":"æ–°å¢åˆ†ç±»",width:"500px"},{footer:a(()=>[i("span",ce,[l(d,{onClick:e[6]||(e[6]=o=>s.value=!1)},{default:a(()=>[...e[13]||(e[13]=[u("å–æ¶ˆ",-1)])]),_:1}),l(d,{type:"primary",onClick:D,loading:b.value},{default:a(()=>[...e[14]||(e[14]=[u(" ç¡®å®š ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[l(j,{model:t,"label-width":"80px"},{default:a(()=>[l(p,{label:"åç§°",required:""},{default:a(()=>[l(x,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"ä¾‹å¦‚: ä½¿ç”¨æ”»ç•¥"},null,8,["modelValue"])]),_:1}),l(p,{label:"å›¾æ ‡",required:""},{default:a(()=>[l(x,{modelValue:t.icon,"onUpdate:modelValue":e[1]||(e[1]=o=>t.icon=o),placeholder:"Emoji æˆ– Element å›¾æ ‡å",style:{width:"100px"}},{append:a(()=>[t.icon?(C(),V("span",pe,g(t.icon),1)):G("",!0)]),_:1},8,["modelValue"]),e[11]||(e[11]=i("span",{class:"text-gray-400 text-xs ml-2"},"æ¨èä½¿ç”¨ Emojiï¼Œå¦‚ ğŸ“",-1))]),_:1}),l(p,{label:"é¢œè‰²",required:""},{default:a(()=>[l(T,{modelValue:t.color,"onUpdate:modelValue":e[2]||(e[2]=o=>t.color=o)},null,8,["modelValue"]),l(x,{modelValue:t.color,"onUpdate:modelValue":e[3]||(e[3]=o=>t.color=o),style:{width:"120px","margin-left":"10px"}},null,8,["modelValue"])]),_:1}),l(p,{label:"æ’åº"},{default:a(()=>[l($,{modelValue:t.sort_order,"onUpdate:modelValue":e[4]||(e[4]=o=>t.sort_order=o),min:0,max:999},null,8,["modelValue"]),e[12]||(e[12]=i("span",{class:"text-gray-400 text-xs ml-2"},"æ•°å­—è¶Šå°è¶Šé å‰",-1))]),_:1}),l(p,{label:"çŠ¶æ€"},{default:a(()=>[l(h,{modelValue:t.is_active,"onUpdate:modelValue":e[5]||(e[5]=o=>t.is_active=o),"active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),vt=H(ue,[["__scopeId","data-v-aae6d73e"]]);export{vt as default};
