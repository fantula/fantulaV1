import{f as M,r as n,h as G,c as x,a as k,i as P,b as t,w as o,o as m,d as s,E as h,l as j,p as H,G as c,t as J,D as K,B as u,_ as O}from"./CEI0siaN.js";import{E as Q}from"./CoJKtQsI.js";import{a as R,E as W}from"./B77-r_qQ.js";import{E as X}from"./BTKFVfca.js";import{E as Y}from"./DwbobqWH.js";import{E as Z}from"./BCllKHMW.js";import{E as ee,a as te}from"./ClIUVBla.js";import{E as oe}from"./aU3tz_xb.js";import{E as le}from"./b7hvKMAc.js";import{E as ae}from"./CP47LeNR.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{b}from"./B-Ix60ut.js";import{v as ie}from"./BrE0JoK1.js";import"./Cp1EI20B.js";import"./Dnj8X3EN.js";import"./CNYNJsmX.js";import"./Cq9Fpw4b.js";import"./97-vZjNt.js";import"./DqBrY_lx.js";import"./BjbJQEzT.js";import"./wVnq5BSo.js";import"./Bh6H2ams.js";import"./BC9Y1jC9.js";import"./CCDBlmbt.js";import"./DE5qJ7kT.js";import"./BzZM8Et6.js";import"./DW0_wk9g.js";import"./CChPPi86.js";import"./B_7HZhJl.js";import"./D-7LAYt0.js";import"./BB_Ol6Sd.js";import"./CB_o0Cdi.js";import"./C6m5ANi3.js";import"./CCoZ80-G.js";import"./tbxUD7ww.js";import"./hs4dPNZ2.js";import"./OwHC_0Ap.js";import"./D6FW0B1r.js";import"./DxNR5PDn.js";import"./uZ_KtR8H.js";const se={class:"faq-category-page"},re={class:"page-actions"},ne={class:"content-card"},me={class:"dialog-footer"},ue=M({__name:"faq-categories",setup(pe){const y=n(!1),V=n([]),r=n(!1),E=n(!1),d=n(!1),C=n(""),i=n({name:"",sort_order:0,is_active:!0,is_checkout_visible:!1}),f=async()=>{y.value=!0;const a=await b.getCategories();a.success&&(V.value=a.categories),y.value=!1},z=()=>{d.value=!1,i.value={name:"",sort_order:0,is_active:!0,is_checkout_visible:!1},r.value=!0},B=a=>{d.value=!0,C.value=a.id,i.value={name:a.name,sort_order:a.sort_order,is_active:a.is_active,is_checkout_visible:a.is_checkout_visible},r.value=!0},D=async a=>{const e=await b.deleteCategory(a);e.success?(u.success("删除成功"),f()):u.error(e.error||"删除失败")},I=async()=>{if(!i.value.name)return u.warning("请输入分类名称");E.value=!0;try{if(d.value){const a=await b.updateCategory(C.value,i.value);a.success?(u.success("更新成功"),r.value=!1,f()):u.error(a.error||"更新失败")}else{const a=await b.createCategory({name:i.value.name,sort_order:i.value.sort_order,is_checkout_visible:i.value.is_checkout_visible});a.success?(u.success("创建成功"),r.value=!1,f()):u.error(a.error||"创建失败")}}finally{E.value=!1}};return G(f),(a,e)=>{const N=h,_=Q,p=W,v=X,U=Y,q=R,F=Z,g=te,T=oe,w=le,S=ee,$=ae,A=ie;return m(),x("div",se,[k("div",re,[t(_,{type:"primary",onClick:z},{default:o(()=>[t(N,null,{default:o(()=>[t(j(H))]),_:1}),e[6]||(e[6]=s(" 新增分类 ",-1))]),_:1})]),P((m(),x("div",ne,[t(q,{data:V.value,style:{width:"100%"}},{default:o(()=>[t(p,{prop:"sort_order",label:"排序",width:"100",align:"center"}),t(p,{prop:"name",label:"分类名称"}),t(p,{label:"状态",width:"120",align:"center"},{default:o(({row:l})=>[l.is_active?(m(),c(v,{key:0,type:"success",size:"small"},{default:o(()=>[...e[7]||(e[7]=[s("启用",-1)])]),_:1})):(m(),c(v,{key:1,type:"info",size:"small"},{default:o(()=>[...e[8]||(e[8]=[s("禁用",-1)])]),_:1}))]),_:1}),t(p,{label:"结算页显示",width:"120",align:"center"},{default:o(({row:l})=>[l.is_checkout_visible?(m(),c(v,{key:0,type:"warning",size:"small"},{default:o(()=>[...e[9]||(e[9]=[s("显示",-1)])]),_:1})):(m(),c(v,{key:1,type:"info",size:"small",effect:"plain"},{default:o(()=>[...e[10]||(e[10]=[s("隐藏",-1)])]),_:1}))]),_:1}),t(p,{prop:"created_at",label:"创建时间",width:"200"},{default:o(({row:l})=>[s(J(new Date(l.created_at).toLocaleString()),1)]),_:1}),t(p,{label:"操作",width:"180",align:"center"},{default:o(({row:l})=>[t(_,{type:"primary",link:"",size:"small",onClick:L=>B(l)},{default:o(()=>[...e[11]||(e[11]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(U,{title:"确定删除此分类吗？",onConfirm:L=>D(l.id)},{reference:o(()=>[t(_,{type:"danger",link:"",size:"small"},{default:o(()=>[...e[12]||(e[12]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])])),[[A,y.value]]),t($,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value=l),title:d.value?"编辑分类":"新增分类",width:"500px"},{footer:o(()=>[k("div",me,[t(_,{onClick:e[4]||(e[4]=l=>r.value=!1)},{default:o(()=>[...e[14]||(e[14]=[s("取消",-1)])]),_:1}),t(_,{type:"primary",onClick:I,loading:E.value},{default:o(()=>[...e[15]||(e[15]=[s("确定",-1)])]),_:1},8,["loading"])])]),default:o(()=>[t(S,{model:i.value,"label-width":"110px"},{default:o(()=>[t(g,{label:"分类名称"},{default:o(()=>[t(F,{modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value.name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),t(g,{label:"排序"},{default:o(()=>[t(T,{modelValue:i.value.sort_order,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value.sort_order=l),min:0},null,8,["modelValue"])]),_:1}),d.value?(m(),c(g,{key:0,label:"启用状态"},{default:o(()=>[t(w,{modelValue:i.value.is_active,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value.is_active=l)},null,8,["modelValue"])]),_:1})):K("",!0),t(g,{label:"结算页显示"},{default:o(()=>[t(w,{modelValue:i.value.is_checkout_visible,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value.is_checkout_visible=l)},null,8,["modelValue"]),e[13]||(e[13]=k("div",{class:"form-tip"},"开启后，该分类下的问题将显示在结算界面。",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),pt=O(ue,[["__scopeId","data-v-fdf4cebb"]]);export{pt as default};
