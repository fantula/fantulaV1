import{cp as Ee,cq as Qe,bn as ie,b_ as Xe,b$ as M,cr as Ze,c0 as le,aQ as _e,c1 as et,b7 as tt,bd as Z,r as j,J as _,cs as re,ci as ze,l as o,K as F,c3 as ot,f as at,ct as nt,bY as st,g as w,c2 as Ne,cu as it,aH as lt,cv as rt,cw as ut,cx as dt,h as ct,be as pt,c as z,o as m,D as h,F as ue,a as L,n as x,aI as Q,G as N,w as H,M as A,E as D,c4 as Pe,aG as de,bl as ce,t as X,aD as ke,cj as ft,bu as Me,c6 as mt}from"./gYbOYKrZ.js";import{u as vt}from"./BdJc3h2o.js";import{U as ee,I as pe,C as Fe}from"./BB_Ol6Sd.js";import{u as ht}from"./BNtqh2Az.js";import{b as yt,c as bt,a as gt,d as wt}from"./D4AXxtJy.js";import{i as xt}from"./Bh6H2ams.js";import{d as Te}from"./Cq9Fpw4b.js";let I;const St={height:"0",visibility:"hidden",overflow:Qe()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ct=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Ve=a=>{const l=Number.parseFloat(a);return Number.isNaN(l)?a:l};function It(a){const l=window.getComputedStyle(a),y=l.getPropertyValue("box-sizing"),t=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),i=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Ct.map(f=>[f,l.getPropertyValue(f)]),paddingSize:t,borderSize:i,boxSizing:y}}function Oe(a,l=1,y){var t,i;I||(I=document.createElement("textarea"),((t=a.parentNode)!=null?t:document.body).appendChild(I));const{paddingSize:d,borderSize:f,boxSizing:u,contextStyle:c}=It(a);c.forEach(([b,v])=>I?.style.setProperty(b,v)),Object.entries(St).forEach(([b,v])=>I?.style.setProperty(b,v,"important")),I.value=a.value||a.placeholder||"";let p=I.scrollHeight;const C={};u==="border-box"?p=p+f:u==="content-box"&&(p=p-d),I.value="";const S=I.scrollHeight-d;if(Ee(l)){let b=S*l;u==="border-box"&&(b=b+d+f),p=Math.max(b,p),C.minHeight=`${b}px`}if(Ee(y)){let b=S*y;u==="border-box"&&(b=b+d+f),p=Math.min(b,p)}return C.height=`${p}px`,(i=I.parentNode)==null||i.removeChild(I),I=void 0,C}const Et=Xe({id:{type:String,default:void 0},size:et,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:le,default:_e},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:le},prefixIcon:{type:le},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>Ze({})},autofocus:Boolean,rows:{type:Number,default:2},...vt(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),zt={[ee]:a=>ie(a),input:a=>ie(a),change:(a,l)=>ie(a)&&(l instanceof Event||l===void 0),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function Nt(a,{disabled:l,beforeFocus:y,afterFocus:t,beforeBlur:i,afterBlur:d}={}){const f=tt(),{emit:u}=f,c=Z(),p=j(!1),C=v=>{const g=ze(y)?y(v):!1;o(l)||p.value||g||(p.value=!0,u("focus",v),t?.())},S=v=>{var g;const s=ze(i)?i(v):!1;o(l)||v.relatedTarget&&((g=c.value)!=null&&g.contains(v.relatedTarget))||s||(p.value=!1,u("blur",v),d?.())},b=v=>{var g,s;o(l)||xt(v.target)||(g=c.value)!=null&&g.contains(document.activeElement)&&c.value!==document.activeElement||(s=a.value)==null||s.focus()};return _([c,()=>o(l)],([v,g])=>{v&&(g?v.removeAttribute("tabindex"):v.setAttribute("tabindex","-1"))}),re(c,"focus",C,!0),re(c,"blur",S,!0),re(c,"click",b,!0),{isFocused:p,wrapperRef:c,handleFocus:C,handleBlur:S}}const Pt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function kt({afterComposition:a,emit:l}){const y=j(!1),t=u=>{l?.("compositionstart",u),y.value=!0},i=u=>{var c;l?.("compositionupdate",u);const p=(c=u.target)==null?void 0:c.value,C=p[p.length-1]||"";y.value=!Pt(C)},d=u=>{l?.("compositionend",u),y.value&&(y.value=!1,F(()=>a(u)))};return{isComposing:y,handleComposition:u=>{u.type==="compositionend"?d(u):i(u)},handleCompositionStart:t,handleCompositionUpdate:i,handleCompositionEnd:d}}function Mt(a){let l;function y(){if(a.value==null)return;const{selectionStart:i,selectionEnd:d,value:f}=a.value;if(i==null||d==null)return;const u=f.slice(0,Math.max(0,i)),c=f.slice(Math.max(0,d));l={selectionStart:i,selectionEnd:d,value:f,beforeTxt:u,afterTxt:c}}function t(){if(a.value==null||l==null)return;const{value:i}=a.value,{beforeTxt:d,afterTxt:f,selectionStart:u}=l;if(d==null||f==null||u==null)return;let c=i.length;if(i.endsWith(f))c=i.length-f.length;else if(i.startsWith(d))c=d.length;else{const p=d[u-1],C=i.indexOf(p,u-1);C!==-1&&(c=C+1)}a.value.setSelectionRange(c,c)}return[y,t]}const Ft=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Tt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Vt="ElInput",Ot=at({name:Vt,inheritAttrs:!1,__name:"input",props:Et,emits:zt,setup(a,{expose:l,emit:y}){const t=a,i=y,d=nt(),f=ht(),u=st(),c=w(()=>[t.type==="textarea"?fe.b():s.b(),s.m(v.value),s.is("disabled",g.value),s.is("exceed",Be.value),{[s.b("group")]:u.prepend||u.append,[s.m("prefix")]:u.prefix||t.prefixIcon,[s.m("suffix")]:u.suffix||t.suffixIcon||t.clearable||t.showPassword,[s.bm("suffix","password-clear")]:Y.value&&ae.value,[s.b("hidden")]:t.type==="hidden"},d.class]),p=w(()=>[s.e("wrapper"),s.is("focus",oe.value)]),{form:C,formItem:S}=gt(),{inputId:b}=wt(t,{formItemContext:S}),v=yt(),g=bt(),s=Ne("input"),fe=Ne("textarea"),K=Z(),P=Z(),te=j(!1),W=j(!1),me=j(),U=Z(t.inputStyle),E=w(()=>K.value||P.value),{wrapperRef:Le,isFocused:oe,handleFocus:ve,handleBlur:he}=Nt(E,{disabled:g,afterBlur(){var e;t.validateEvent&&((e=S?.validate)==null||e.call(S,"blur").catch(n=>Te()))}}),ye=w(()=>{var e;return(e=C?.statusIcon)!=null?e:!1}),R=w(()=>S?.validateState||""),be=w(()=>R.value&&it[R.value]),Re=w(()=>W.value?lt:rt),$e=w(()=>[d.style]),ge=w(()=>[t.inputStyle,U.value,{resize:t.resize}]),k=w(()=>ut(t.modelValue)?"":String(t.modelValue)),Y=w(()=>t.clearable&&!g.value&&!t.readonly&&!!k.value&&(oe.value||te.value)),ae=w(()=>t.showPassword&&!g.value&&!!k.value),T=w(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!g.value&&!t.readonly&&!t.showPassword),ne=w(()=>k.value.length),Be=w(()=>!!T.value&&ne.value>Number(t.maxlength)),He=w(()=>!!u.suffix||!!t.suffixIcon||Y.value||t.showPassword||T.value||!!R.value&&ye.value),Ae=w(()=>!!Object.keys(t.modelModifiers).length),[De,je]=Mt(K);dt(P,e=>{if(Ke(),!T.value||t.resize!=="both"&&t.resize!=="horizontal")return;const n=e[0],{width:r}=n.contentRect;me.value={right:`calc(100% - ${r+22-10}px)`}});const $=()=>{const{type:e,autosize:n}=t;if(!(!ft||e!=="textarea"||!P.value))if(n){const r=Me(n)?n.minRows:void 0,O=Me(n)?n.maxRows:void 0,B=Oe(P.value,r,O);U.value={overflowY:"hidden",...B},F(()=>{P.value.offsetHeight,U.value=B})}else U.value={minHeight:Oe(P.value).minHeight}},Ke=(e=>{let n=!1;return()=>{var r;if(n||!t.autosize)return;((r=P.value)==null?void 0:r.offsetParent)===null||(setTimeout(e),n=!0)}})($),V=()=>{const e=E.value,n=t.formatter?t.formatter(k.value):k.value;!e||e.value===n||t.type==="file"||(e.value=n)},we=e=>{const{trim:n,number:r}=t.modelModifiers;return n&&(e=e.trim()),r&&(e=`${Ve(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},se=async e=>{if(Se.value)return;const{lazy:n}=t.modelModifiers;let{value:r}=e.target;if(n){i(pe,r);return}if(r=we(r),String(r)===k.value){t.formatter&&V();return}De(),i(ee,r),i(pe,r),await F(),(t.formatter&&t.parser||!Ae.value)&&V(),je()},xe=async e=>{let{value:n}=e.target;n=we(n),t.modelModifiers.lazy&&i(ee,n),i(Fe,n,e),await F(),V()},{isComposing:Se,handleCompositionStart:G,handleCompositionUpdate:q,handleCompositionEnd:J}=kt({emit:i,afterComposition:se}),We=()=>{W.value=!W.value},Ue=()=>{var e;return(e=E.value)==null?void 0:e.focus()},Ye=()=>{var e;return(e=E.value)==null?void 0:e.blur()},Ge=e=>{te.value=!1,i("mouseleave",e)},qe=e=>{te.value=!0,i("mouseenter",e)},Ce=e=>{i("keydown",e)},Je=()=>{var e;(e=E.value)==null||e.select()},Ie=()=>{i(ee,""),i(Fe,""),i("clear"),i(pe,"")};return _(()=>t.modelValue,()=>{var e;F(()=>$()),t.validateEvent&&((e=S?.validate)==null||e.call(S,"change").catch(n=>Te()))}),_(k,e=>{if(!E.value)return;const{trim:n,number:r}=t.modelModifiers,O=E.value.value,B=(r||t.type==="number")&&!/^0\d/.test(O)?`${Ve(O)}`:O;B!==e&&(document.activeElement===E.value&&E.value.type!=="range"&&n&&B.trim()===e||V())}),_(()=>t.type,async()=>{await F(),V(),$()}),ct(()=>{!t.formatter&&t.parser,V(),F($)}),l({input:K,textarea:P,ref:E,textareaStyle:ge,autosize:pt(t,"autosize"),isComposing:Se,focus:Ue,blur:Ye,select:Je,clear:Ie,resizeTextarea:$}),(e,n)=>(m(),z("div",{class:x([c.value,{[o(s).bm("group","append")]:e.$slots.append,[o(s).bm("group","prepend")]:e.$slots.prepend}]),style:ke($e.value),onMouseenter:qe,onMouseleave:Ge},[h(" input "),e.type!=="textarea"?(m(),z(ue,{key:0},[h(" prepend slot "),e.$slots.prepend?(m(),z("div",{key:0,class:x(o(s).be("group","prepend"))},[Q(e.$slots,"prepend")],2)):h("v-if",!0),L("div",{ref_key:"wrapperRef",ref:Le,class:x(p.value)},[h(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),z("span",{key:0,class:x(o(s).e("prefix"))},[L("span",{class:x(o(s).e("prefix-inner"))},[Q(e.$slots,"prefix"),e.prefixIcon?(m(),N(o(D),{key:0,class:x(o(s).e("icon"))},{default:H(()=>[(m(),N(A(e.prefixIcon)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0),L("input",Pe({id:o(b),ref_key:"input",ref:K,class:o(s).e("inner")},o(f),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?W.value?"text":"password":e.type,disabled:o(g),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:n[0]||(n[0]=(...r)=>o(G)&&o(G)(...r)),onCompositionupdate:n[1]||(n[1]=(...r)=>o(q)&&o(q)(...r)),onCompositionend:n[2]||(n[2]=(...r)=>o(J)&&o(J)(...r)),onInput:se,onChange:xe,onKeydown:Ce}),null,16,Ft),h(" suffix slot "),He.value?(m(),z("span",{key:1,class:x(o(s).e("suffix"))},[L("span",{class:x(o(s).e("suffix-inner"))},[!Y.value||!ae.value||!T.value?(m(),z(ue,{key:0},[Q(e.$slots,"suffix"),e.suffixIcon?(m(),N(o(D),{key:0,class:x(o(s).e("icon"))},{default:H(()=>[(m(),N(A(e.suffixIcon)))]),_:1},8,["class"])):h("v-if",!0)],64)):h("v-if",!0),Y.value?(m(),N(o(D),{key:1,class:x([o(s).e("icon"),o(s).e("clear")]),onMousedown:de(o(ce),["prevent"]),onClick:Ie},{default:H(()=>[(m(),N(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):h("v-if",!0),ae.value?(m(),N(o(D),{key:2,class:x([o(s).e("icon"),o(s).e("password")]),onClick:We,onMousedown:de(o(ce),["prevent"]),onMouseup:de(o(ce),["prevent"])},{default:H(()=>[(m(),N(A(Re.value)))]),_:1},8,["class","onMousedown","onMouseup"])):h("v-if",!0),T.value?(m(),z("span",{key:3,class:x([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},[L("span",{class:x(o(s).e("count-inner"))},X(ne.value)+" / "+X(e.maxlength),3)],2)):h("v-if",!0),R.value&&be.value&&ye.value?(m(),N(o(D),{key:4,class:x([o(s).e("icon"),o(s).e("validateIcon"),o(s).is("loading",R.value==="validating")])},{default:H(()=>[(m(),N(A(be.value)))]),_:1},8,["class"])):h("v-if",!0)],2)],2)):h("v-if",!0)],2),h(" append slot "),e.$slots.append?(m(),z("div",{key:1,class:x(o(s).be("group","append"))},[Q(e.$slots,"append")],2)):h("v-if",!0)],64)):(m(),z(ue,{key:1},[h(" textarea "),L("textarea",Pe({id:o(b),ref_key:"textarea",ref:P,class:[o(fe).e("inner"),o(s).is("focus",o(oe))]},o(f),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(g),readonly:e.readonly,autocomplete:e.autocomplete,style:ge.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:n[3]||(n[3]=(...r)=>o(G)&&o(G)(...r)),onCompositionupdate:n[4]||(n[4]=(...r)=>o(q)&&o(q)(...r)),onCompositionend:n[5]||(n[5]=(...r)=>o(J)&&o(J)(...r)),onInput:se,onFocus:n[6]||(n[6]=(...r)=>o(ve)&&o(ve)(...r)),onBlur:n[7]||(n[7]=(...r)=>o(he)&&o(he)(...r)),onChange:xe,onKeydown:Ce}),null,16,Tt),T.value?(m(),z("span",{key:0,style:ke(me.value),class:x([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},X(ne.value)+" / "+X(e.maxlength),7)):h("v-if",!0)],64))],38))}});var Lt=ot(Ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Wt=mt(Lt);export{Wt as E,Nt as a,zt as b,Mt as c,Et as i,kt as u};
