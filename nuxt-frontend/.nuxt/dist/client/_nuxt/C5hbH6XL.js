import{f as M,r as n,h as G,c as w,a as k,i as P,b as t,w as o,o as c,d as s,E as j,l as H,p as J,G as y,t as K,D as O,B as m,_ as Q}from"./o2XBa361.js";import{E as R}from"./-Yx_0iEM.js";import{a as W,E as X}from"./Ci1VNkC9.js";import{E as Y}from"./DC3lfPj1.js";import{E as Z}from"./DRc0BmOG.js";import{E as h}from"./1SfIsks3.js";import{E as ee,a as te}from"./0BTaD5f-.js";import{E as oe}from"./Cq9RPQ5L.js";import{E as ae}from"./C8ZH7i_a.js";import{E as le}from"./CziALilw.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{a as f}from"./Ct7sd9tI.js";import{v as re}from"./BwD4Hz0h.js";import"./Culj45X8.js";import"./Dnj8X3EN.js";import"./ClnTspdU.js";import"./Cq9Fpw4b.js";import"./CqX7ZdKI.js";import"./Dlk0BVst.js";import"./qVmxJdp3.js";import"./DtTI1xRr.js";import"./Bh6H2ams.js";import"./t2w4jifC.js";import"./C9zJf5rn.js";import"./Bx0EXMjc.js";import"./Z6faUBN3.js";import"./BlW_46uR.js";import"./hXKBSGVD.js";import"./B_FoF6yT.js";import"./BCItYl8Z.js";import"./BB_Ol6Sd.js";import"./Dzr5IOAO.js";import"./DVQwC1Y0.js";import"./BHSqheQV.js";import"./DwwA_QlG.js";import"./FKUjHIpz.js";import"./CQuNCUIC.js";import"./D6FW0B1r.js";import"./CleHDoLI.js";import"./Ds34GQx2.js";const se={class:"faq-category-page"},ie={class:"page-actions"},ne={class:"content-card"},me={class:"dialog-footer"},pe=M({__name:"faq-categories",setup(ue){const v=n(!1),b=n([]),i=n(!1),g=n(!1),p=n(!1),C=n(""),r=n({name:"",sort_order:0,is_active:!0}),_=async()=>{v.value=!0;const a=await f.getCategories();a.success&&(b.value=a.categories),v.value=!1},x=()=>{p.value=!1,r.value={name:"",sort_order:0,is_active:!0},i.value=!0},B=a=>{p.value=!0,C.value=a.id,r.value={name:a.name,sort_order:a.sort_order,is_active:a.is_active},i.value=!0},D=async a=>{const e=await f.deleteCategory(a);e.success?(m.success("删除成功"),_()):m.error(e.error||"删除失败")},I=async()=>{if(!r.value.name)return m.warning("请输入分类名称");g.value=!0;try{if(p.value){const a=await f.updateCategory(C.value,r.value);a.success?(m.success("更新成功"),i.value=!1,_()):m.error(a.error||"更新失败")}else{const a=await f.createCategory({name:r.value.name,sort_order:r.value.sort_order});a.success?(m.success("创建成功"),i.value=!1,_()):m.error(a.error||"创建失败")}}finally{g.value=!1}};return G(_),(a,e)=>{const N=j,u=R,d=X,V=Y,q=Z,z=W,F=h,E=te,T=oe,U=ae,S=ee,$=le,A=re;return c(),w("div",se,[k("div",ie,[t(u,{type:"primary",onClick:x},{default:o(()=>[t(N,null,{default:o(()=>[t(H(J))]),_:1}),e[5]||(e[5]=s(" 新增分类 ",-1))]),_:1})]),P((c(),w("div",ne,[t(z,{data:b.value,style:{width:"100%"}},{default:o(()=>[t(d,{prop:"sort_order",label:"排序",width:"100",align:"center"}),t(d,{prop:"name",label:"分类名称"}),t(d,{label:"状态",width:"120",align:"center"},{default:o(({row:l})=>[l.is_active?(c(),y(V,{key:0,type:"success",size:"small"},{default:o(()=>[...e[6]||(e[6]=[s("启用",-1)])]),_:1})):(c(),y(V,{key:1,type:"info",size:"small"},{default:o(()=>[...e[7]||(e[7]=[s("禁用",-1)])]),_:1}))]),_:1}),t(d,{prop:"created_at",label:"创建时间",width:"200"},{default:o(({row:l})=>[s(K(new Date(l.created_at).toLocaleString()),1)]),_:1}),t(d,{label:"操作",width:"180",align:"center"},{default:o(({row:l})=>[t(u,{type:"primary",link:"",size:"small",onClick:L=>B(l)},{default:o(()=>[...e[8]||(e[8]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(q,{title:"确定删除此分类吗？",onConfirm:L=>D(l.id)},{reference:o(()=>[t(u,{type:"danger",link:"",size:"small"},{default:o(()=>[...e[9]||(e[9]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])])),[[A,v.value]]),t($,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value=l),title:p.value?"编辑分类":"新增分类",width:"500px"},{footer:o(()=>[k("div",me,[t(u,{onClick:e[3]||(e[3]=l=>i.value=!1)},{default:o(()=>[...e[10]||(e[10]=[s("取消",-1)])]),_:1}),t(u,{type:"primary",onClick:I,loading:g.value},{default:o(()=>[...e[11]||(e[11]=[s("确定",-1)])]),_:1},8,["loading"])])]),default:o(()=>[t(S,{model:r.value,"label-width":"80px"},{default:o(()=>[t(E,{label:"分类名称"},{default:o(()=>[t(F,{modelValue:r.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),t(E,{label:"排序"},{default:o(()=>[t(T,{modelValue:r.value.sort_order,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.sort_order=l),min:0},null,8,["modelValue"])]),_:1}),p.value?(c(),y(E,{key:0,label:"启用状态"},{default:o(()=>[t(U,{modelValue:r.value.is_active,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.is_active=l)},null,8,["modelValue"])]),_:1})):O("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ut=Q(pe,[["__scopeId","data-v-39850a32"]]);export{ut as default};
