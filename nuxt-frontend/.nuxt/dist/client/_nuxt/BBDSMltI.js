import{f as M,r as d,g as S,h as $,c as o,a as s,D as y,F as C,k as b,b as u,w as h,E as H,C as I,o as l,aD as w,n as j,d as R,t as r,l as p,H as q,b3 as G,V as J,_ as K}from"./o2XBa361.js";import{c as F}from"./DZiCXo5N.js";import{u as O}from"./DxN84sMZ.js";const P={class:"community-page"},Q={class:"page-content"},U={class:"category-tags"},W=["onClick"],X={class:"tag-icon"},Y={key:0,class:"reset-hint"},Z={key:0,class:"loading-state"},ee={key:1,class:"articles-grid"},te=["onClick"],ae={class:"article-cover"},se=["src","alt"],oe={key:0,class:"video-badge"},le={class:"article-content"},ce={class:"article-title"},ne={class:"article-desc"},ie={class:"article-footer"},re={class:"author-info"},de=["src"],ue={class:"author-name"},_e={class:"article-date"},ve={key:2,class:"empty-state"},ge={key:3,class:"load-more-section"},me=12,ye=M({__name:"community",setup(he){const D=I(),_=d(!1),c=d([]),v=d([]),n=d("all"),g=d(1),f=d(!0),T={key:"all",label:"å…¨éƒ¨",icon:"ðŸ’ ",color:"#409EFF"},x=S(()=>{const a=v.value.map(e=>({key:e.id,label:e.name,icon:e.icon||"ðŸ“",color:e.color||"#409EFF"}));return[T,...a]}),z=a=>{const e=v.value.find(i=>i.id===a);return e?e.name:"æœªåˆ†ç±»"},k=a=>{const e=v.value.find(i=>i.id===a);return e?e.color:"#909399"},A=async()=>{try{const{success:a,data:e}=await F.getCategories();a&&e&&(v.value=e)}catch(a){console.error("Failed to load categories",a)}},m=async(a=!1)=>{if(!_.value){_.value=!0;try{const e=await F.getArticles(n.value,g.value,me);e.success&&e.data&&(a?c.value=[...c.value,...e.data]:c.value=e.data,f.value=c.value.length<e.total)}catch(e){console.error("Failed to load articles",e)}finally{_.value=!1}}},E=a=>{n.value===a&&a!=="all"?n.value="all":n.value=a,g.value=1,c.value=[],m()},N=()=>{g.value++,m(!0)},V=a=>{D.push(`/article/${a.id}`)},B=a=>a?new Date(a).toLocaleDateString("zh-CN"):"";return $(async()=>{await A(),await m()}),O({title:"å¸®åŠ©ä¸­å¿ƒ - å‡¡å›¾æ‹‰",meta:[{name:"description",content:"å‡¡å›¾æ‹‰ç¤¾åŒºå¸®åŠ©ä¸­å¿ƒï¼Œæä¾›å¥ˆé£žã€è¿ªå£«å°¼+ç­‰æµåª’ä½“ä½¿ç”¨æ•™ç¨‹ä¸Žè®¾å¤‡æŒ‡å—ã€‚"}]}),(a,e)=>{const i=H;return l(),o("div",P,[s("div",Q,[s("div",U,[(l(!0),o(C,null,b(x.value,t=>(l(),o("button",{key:t.key,class:j(["tag-btn",{active:n.value===t.key}]),style:w(n.value===t.key?{"--active-color":t.color}:{}),onClick:L=>E(t.key)},[s("span",X,r(t.icon),1),R(" "+r(t.label)+" ",1),n.value===t.key&&n.value!=="all"?(l(),o("span",Y,"Ã—")):y("",!0)],14,W))),128))]),_.value&&c.value.length===0?(l(),o("div",Z,[u(i,{class:"is-loading"},{default:h(()=>[u(p(q))]),_:1}),e[0]||(e[0]=s("span",null,"åŠ è½½ä¸­...",-1))])):c.value.length>0?(l(),o("div",ee,[(l(!0),o(C,null,b(c.value,t=>(l(),o("div",{key:t.id,class:"article-card",onClick:L=>V(t)},[s("div",ae,[s("img",{src:t.cover_image||"/images/default-cover.jpg",alt:t.title,loading:"lazy"},null,8,se),t.video_url?(l(),o("div",oe,[u(i,null,{default:h(()=>[u(p(G))]),_:1})])):y("",!0),s("div",{class:"card-category-tag",style:w({borderColor:k(t.category),color:k(t.category),backgroundColor:"rgba(0,0,0,0.6)"})},r(z(t.category)),5)]),s("div",le,[s("h3",ce,r(t.title),1),s("p",ne,r(t.description),1),s("div",ie,[s("div",re,[s("img",{src:t.author?.avatar||"/images/client/pc/service-avatar.png",class:"author-avatar"},null,8,de),s("span",ue,r(t.author?.name||"å®˜æ–¹å®¢æœ"),1)]),s("span",_e,r(B(t.created_at)),1)])])],8,te))),128))])):(l(),o("div",ve,[u(i,null,{default:h(()=>[u(p(J))]),_:1}),e[1]||(e[1]=s("p",null,"æš‚æ—¶æ²¡æœ‰ç›¸å…³æ–‡ç« ",-1))])),f.value&&!_.value?(l(),o("div",ge,[s("button",{class:"load-more-btn",onClick:N}," åŠ è½½æ›´å¤š ")])):y("",!0)])])}}}),Ce=K(ye,[["__scopeId","data-v-8873eba6"]]);export{Ce as default};
