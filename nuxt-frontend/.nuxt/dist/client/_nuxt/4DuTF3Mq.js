const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CEI0siaN.js","./entry.CxLesyFg.css"])))=>i.map(i=>d[i]);
import{g as b,b1 as Le,b2 as Me,b3 as N,b4 as $e,b5 as Ve,ab as _e,b6 as Ne,b7 as je,J as de,b8 as ze,b9 as Ue,r as F,ba as le,bb as He,K as Ge,bc as We,l as V,bd as Je,f as Qe,q as Xe,z as Ye,A as Ze,be as Ke,h as et,c as p,a as r,D as U,b as R,C as tt,w as J,F as H,k as Q,t as q,d as K,aA as at,i as st,v as nt,n as ce,B as I,ax as ue,aj as ot,E as it,y as rt,bf as lt,m as ve,a1 as ct,S as ut,o as g,ao as dt,aG as vt,aI as ft,G as fe,a7 as mt,aK as gt,Z as _t,_ as pt}from"./CEI0siaN.js";import{E as yt}from"./DAIghOY5.js";/* empty css        *//* empty css        */import"./CoJKtQsI.js";/* empty css        *//* empty css        */import{g as ht}from"./4SJAG9xH.js";import{u as bt}from"./Ckf5llYz.js";import{E as me}from"./BOUQDXLJ.js";import"./BC9Y1jC9.js";import"./Bh6H2ams.js";import"./wVnq5BSo.js";import"./DxNR5PDn.js";import"./Cq9Fpw4b.js";import"./uZ_KtR8H.js";import"./CB_o0Cdi.js";import"./CChPPi86.js";import"./B_7HZhJl.js";import"./C6m5ANi3.js";import"./Cp1EI20B.js";import"./Dnj8X3EN.js";import"./BCllKHMW.js";import"./97-vZjNt.js";import"./DqBrY_lx.js";import"./BB_Ol6Sd.js";import"./hs4dPNZ2.js";import"./OwHC_0Ap.js";import"./tbxUD7ww.js";const Dt={trailing:!0};function wt(a,n=25,f={}){if(f={...Dt,...f},!Number.isFinite(n))throw new TypeError("Expected `wait` to be a finite number");let c,o,D=[],i,e;const l=(w,E)=>(i=Ct(a,w,E),i.finally(()=>{if(i=null,f.trailing&&e&&!o){const O=l(w,e);return e=null,O}}),i),A=function(...w){return f.trailing&&(e=w),i||new Promise(E=>{const O=!o&&f.leading;clearTimeout(o),o=setTimeout(()=>{o=null;const m=f.leading?c:l(this,w);e=null;for(const _ of D)_(m);D=[]},n),O?(c=l(this,w),E(c)):D.push(E)})},u=w=>{w&&(clearTimeout(w),o=null)};return A.isPending=()=>!!o,A.cancel=()=>{u(o),D=[],e=null},A.flush=()=>{if(u(o),!e||i)return;const w=e;return e=null,l(this,w)},A}async function Ct(a,n,f){return await a.apply(n,f)}const kt=a=>a==="defer"||a===!1;function Et(...a){const n=typeof a[a.length-1]=="string"?a.pop():void 0;xt(a[0],a[1])&&a.unshift(n);let[f,c,o={}]=a,D=!1;const i=b(()=>Le(f));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const e=Me();o.server??=!0,o.default??=At,o.getCachedData??=ye,o.lazy??=!1,o.immediate??=!0,o.deep??=N.deep,o.dedupe??="cancel",o._functionName,e._asyncData[i.value];function l(){const m={cause:"initial",dedupe:o.dedupe};return e._asyncData[i.value]?._init||(m.cachedData=o.getCachedData(i.value,e,{cause:"initial"}),e._asyncData[i.value]=ge(e,i.value,c,o,m.cachedData)),()=>e._asyncData[i.value].execute(m)}const A=l(),u=e._asyncData[i.value];u._deps++;const w=o.server!==!1&&e.payload.serverRendered;{let m=function(y){const v=e._asyncData[y];v?._deps&&(v._deps--,v._deps===0&&v?._off())};const _=$e();if(_&&w&&o.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const y=_._nuxtOnBeforeMountCbs;Ve(()=>{y.forEach(v=>{v()}),y.splice(0,y.length)}),_e(()=>y.splice(0,y.length))}const B=_&&(_._nuxtClientOnly||Ne(je,!1));w&&e.isHydrating&&(u.error.value||u.data.value!=null)?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):_&&(!B&&e.payload.serverRendered&&e.isHydrating||o.lazy)&&o.immediate?_._nuxtOnBeforeMountCbs.push(A):o.immediate&&A();const C=Ue(),x=de(i,(y,v)=>{if((y||v)&&y!==v){D=!0;const P=e._asyncData[v]?.data.value!==N.value,X=e._asyncDataPromises[v]!==void 0,ee={cause:"initial",dedupe:o.dedupe};if(!e._asyncData[y]?._init){let G;v&&P?G=e._asyncData[v].data.value:(G=o.getCachedData(y,e,{cause:"initial"}),ee.cachedData=G),e._asyncData[y]=ge(e,y,c,o,G)}e._asyncData[y]._deps++,v&&m(v),(o.immediate||P||X)&&e._asyncData[y].execute(ee),Je(()=>{D=!1})}},{flush:"sync"}),T=o.watch?de(o.watch,()=>{D||e._asyncData[i.value]?._execute({cause:"watch",dedupe:o.dedupe})}):()=>{};C&&ze(()=>{x(),T(),m(i.value)})}const E={data:se(()=>e._asyncData[i.value]?.data),pending:se(()=>e._asyncData[i.value]?.pending),status:se(()=>e._asyncData[i.value]?.status),error:se(()=>e._asyncData[i.value]?.error),refresh:(...m)=>e._asyncData[i.value]?._init?e._asyncData[i.value].execute(...m):l()(),execute:(...m)=>E.refresh(...m),clear:()=>{const m=e._asyncData[i.value];if(m?._abortController)try{m._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{m._abortController=void 0}pe(e,i.value)}},O=Promise.resolve(e._asyncDataPromises[i.value]).then(()=>E);return Object.assign(O,E),O}function se(a){return b({get(){return a()?.value},set(n){const f=a();f&&(f.value=n)}})}function xt(a,n){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof n=="function")}function pe(a,n){n in a.payload.data&&(a.payload.data[n]=void 0),n in a.payload._errors&&(a.payload._errors[n]=N.errorValue),a._asyncData[n]&&(a._asyncData[n].data.value=void 0,a._asyncData[n].error.value=N.errorValue,a._asyncData[n].pending.value=!1,a._asyncData[n].status.value="idle"),n in a._asyncDataPromises&&(a._asyncDataPromises[n]=void 0)}function St(a,n){const f={};for(const c of n)f[c]=a[c];return f}function ge(a,n,f,c,o){a.payload._errors[n]??=N.errorValue;const D=c.getCachedData!==ye,i=f,e=c.deep?F:le,l=o!=null,A=a.hook("app:data:refresh",async w=>{(!w||w.includes(n))&&await u.execute({cause:"refresh:hook"})}),u={data:e(l?o:c.default()),pending:le(!l),error:He(a.payload._errors,n),status:le("idle"),execute:(...w)=>{const[E,O=void 0]=w,m=E&&O===void 0&&typeof E=="object"?E:{};if(a._asyncDataPromises[n]&&kt(m.dedupe??c.dedupe))return a._asyncDataPromises[n];if(m.cause==="initial"||a.isHydrating){const C="cachedData"in m?m.cachedData:c.getCachedData(n,a,{cause:m.cause??"refresh:manual"});if(C!=null)return a.payload.data[n]=u.data.value=C,u.error.value=N.errorValue,u.status.value="success",Promise.resolve(C)}u.pending.value=!0,u._abortController&&u._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),u._abortController=new AbortController,u.status.value="pending";const _=new AbortController,B=new Promise((C,x)=>{try{const T=m.timeout??c.timeout,y=Pt([u._abortController?.signal,m?.signal],_.signal,T);if(y.aborted){const v=y.reason;x(v instanceof Error?v:new DOMException(String(v??"Aborted"),"AbortError"));return}return y.addEventListener("abort",()=>{const v=y.reason;x(v instanceof Error?v:new DOMException(String(v??"Aborted"),"AbortError"))},{once:!0,signal:_.signal}),Promise.resolve(i(a,{signal:y})).then(C,x)}catch(T){x(T)}}).then(async C=>{let x=C;c.transform&&(x=await c.transform(C)),c.pick&&(x=St(x,c.pick)),a.payload.data[n]=x,u.data.value=x,u.error.value=N.errorValue,u.status.value="success"}).catch(C=>{if(a._asyncDataPromises[n]&&a._asyncDataPromises[n]!==B||u._abortController?.signal.aborted)return a._asyncDataPromises[n];if(typeof DOMException<"u"&&C instanceof DOMException&&C.name==="AbortError")return u.status.value="idle",a._asyncDataPromises[n];u.error.value=We(C),u.data.value=V(c.default()),u.status.value="error"}).finally(()=>{u.pending.value=!1,_.abort(),delete a._asyncDataPromises[n]});return a._asyncDataPromises[n]=B,a._asyncDataPromises[n]},_execute:wt((...w)=>u.execute(...w),0,{leading:!0}),_default:c.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{A(),a._asyncData[n]?._init&&(a._asyncData[n]._init=!1),D||Ge(()=>{a._asyncData[n]?._init||(pe(a,n),u.execute=()=>Promise.resolve(),u.data.value=N.value)})}};return u}const At=()=>N.value,ye=(a,n,f)=>{if(n.isHydrating)return n.payload.data[a];if(f.cause!=="refresh:manual"&&f.cause!=="refresh:hook")return n.static.data[a]};function Pt(a,n,f){const c=a.filter(i=>!!i);if(typeof f=="number"&&f>=0){const i=AbortSignal.timeout?.(f);i&&c.push(i)}if(AbortSignal.any)return AbortSignal.any(c);const o=new AbortController;for(const i of c)if(i.aborted){const e=i.reason??new DOMException("Aborted","AbortError");try{o.abort(e)}catch{o.abort()}return o.signal}const D=()=>{const e=c.find(l=>l.aborted)?.reason??new DOMException("Aborted","AbortError");try{o.abort(e)}catch{o.abort()}};for(const i of c)i.addEventListener?.("abort",D,{once:!0,signal:n});return o.signal}const Ft=()=>({startAnimation:(n,f,c)=>{const o=document.getElementById("cart-icon-ref");if(!o){console.warn("Cart icon target not found"),c?.();return}const D=n.getBoundingClientRect(),i=o.getBoundingClientRect(),e=document.createElement("img");e.src=f,e.style.position="fixed",e.style.zIndex="9999",e.style.width="50px",e.style.height="50px",e.style.objectFit="cover",e.style.borderRadius="50%",e.style.transition="all 0.8s cubic-bezier(0.2, -0.3, 0.1, 1.2)",e.style.left=`${D.left+D.width/2-25}px`,e.style.top=`${D.top+D.height/2-25}px`,e.style.opacity="0.8",e.style.pointerEvents="none",document.body.appendChild(e),e.offsetHeight,requestAnimationFrame(()=>{e.style.left=`${i.left+i.width/2-10}px`,e.style.top=`${i.top+i.height/2-10}px`,e.style.width="20px",e.style.height="20px",e.style.opacity="0.5"}),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e),c?.()},800)}}),Tt=()=>({startAnimation:(n,f,c,o)=>{if(!n){console.warn("Start element is null"),o?.();return}const D=document.getElementById(c);if(!D){console.warn(`Target element #${c} not found`),o?.();return}const i=n.getBoundingClientRect(),e=D.getBoundingClientRect(),l=document.createElement("img");l.src=f,l.style.position="fixed",l.style.zIndex="9999",l.style.width="50px",l.style.height="50px",l.style.objectFit="cover",l.style.borderRadius="50%",l.style.boxShadow="0 0 10px rgba(239, 68, 68, 0.5)",l.style.transition="all 0.8s cubic-bezier(0.2, -0.3, 0.1, 1.2)",l.style.left=`${i.left+i.width/2-25}px`,l.style.top=`${i.top+i.height/2-25}px`,l.style.opacity="0.9",l.style.pointerEvents="none",document.body.appendChild(l),l.offsetHeight,requestAnimationFrame(()=>{l.style.left=`${e.left+e.width/2-10}px`,l.style.top=`${e.top+e.height/2-10}px`,l.style.width="20px",l.style.height="20px",l.style.opacity="0"}),setTimeout(()=>{D.style.transform="scale(1.2)",setTimeout(()=>{D.style.transform="scale(1)"},200)},600),setTimeout(()=>{document.body.contains(l)&&document.body.removeChild(l),o?.()},800)}}),qt={class:"goods-detail-page"},It={key:0,class:"api-warning-bar"},Bt={class:"goods-content"},Rt={class:"back-btn-row"},Ot={class:"back-btn-icon"},Lt={width:"20",height:"20",viewBox:"0 0 32 32",fill:"none",style:{display:"block"}},Mt={class:"goods-detail-content"},$t={class:"goods-main-section"},Vt={class:"goods-left-panel"},Nt={class:"main-image-wrapper"},jt={class:"main-image"},zt={key:0,class:"sku-thumb-scroll"},Ut=["onClick"],Ht=["src"],Gt={class:"premium-service-card"},Wt={class:"premium-service-grid"},Jt={class:"goods-info-panel"},Qt={class:"info-header"},Xt={class:"product-name"},Yt={class:"product-sales-badge"},Zt={class:"faq-ticker-container"},Kt={class:"faq-arrow-wrap"},ea={key:1,class:"spec-selection-area"},ta={class:"spec-label"},aa={class:"spec-values"},sa=["onClick"],na={key:2,class:"no-sku-notice"},oa={key:3,class:"sku-intro-section"},ia={class:"sku-intro-text"},ra={class:"price-display-section compact-price-area"},la={class:"price-stock-row"},ca={class:"current-price-box"},ua={class:"p-amount"},da={class:"stock-info"},va={key:0,class:"stock-badge loading"},fa={key:1,class:"stock-badge"},ma={key:2,class:"stock-badge out-of-stock"},ga={key:0,class:"qty-control"},_a={class:"q-actions"},pa=["disabled"],ya=["disabled"],ha=["disabled"],ba={key:1,class:"no-price-notice"},Da={class:"main-actions"},wa=["disabled"],Ca={key:0,class:"btn-subtext"},ka={class:"secondary-btns"},Ea=["disabled"],xa=["disabled"],Sa={class:"safe-disclaimer"},Aa={class:"product-detail-rich"},Pa={class:"detail-content-wrap"},Fa={key:0,class:"detail-text-box"},Ta=["src"],qa=Qe({__name:"[id]",async setup(a){let n,f;const c=ct(),o=tt(),D=ut(),i=Xe(),e=Ye(),l=Ze(),A=b(()=>{const s=c.params.id;return Array.isArray(s)?s[0]:s}),{data:u,error:w}=([n,f]=Ke(()=>Et(`goods-detail-${A.value}`,()=>ht.getGoodsDetail(A.value))),n=await n,f(),n),E=b(()=>u.value||null),O=b(()=>!!w.value||u.value&&!u.value.success),m=b(()=>{const s=E.value?.data||{};return{title:s.product_name||"å•†å“è¯¦æƒ…",desc:s.description||"å‡¡å›¾æ‹‰æä¾›ä¼˜è´¨æ•°å­—å•†å“æœåŠ¡",image:s.coverImage||s.image}});bt({title:b(()=>`${m.value.title} - å‡¡å›¾æ‹‰`),meta:[{name:"description",content:b(()=>m.value.desc)},{property:"og:title",content:b(()=>m.value.title)},{property:"og:description",content:b(()=>m.value.desc)},{property:"og:image",content:b(()=>m.value.image)},{property:"og:url",content:b(()=>`${D.public.siteUrl||"http://localhost:3000"}/goods/${A.value}`)}]});const _=F(1),B=F(0),C=F(!1),x=F({}),T=F(""),y=F(!1),v=F(!1),P=b(()=>!v.value&&y.value&&B.value>0),X=async s=>{if(!s){y.value=!1,B.value=0,v.value=!1;return}v.value=!0;try{const t=await lt.checkSkuAvailability(s);y.value=t.available,B.value=t.availableCount}catch(t){console.error("æ£€æŸ¥ SKU å¯è´­ä¹°æ€§å¤±è´¥:",t),y.value=!1,B.value=0}finally{v.value=!1}},ee=async()=>{if(!e.isLoggedIn){i.showLogin=!0;return}if(!P.value){I.warning("å•†å“æš‚æ—¶ç¼ºè´§");return}if(!S.value){I.warning("è¯·é€‰æ‹©å•†å“è§„æ ¼");return}if(!C.value){C.value=!0;try{const{supabasePreOrderApi:s}=await ue(async()=>{const{supabasePreOrderApi:h}=await import("./CEI0siaN.js").then(k=>k.fh);return{supabasePreOrderApi:h}},__vite__mapDeps([0,1]),import.meta.url),t=await s.createPreOrder(S.value.id,_.value,"buy_now");if(!t.success){if(t.code==="DUPLICATE_ORDER")try{await me.confirm("æ‚¨å·²ç»ä¸‹è¿‡è¯¥å•†å“çš„è®¢å•äº†ï¼Œå¿«åŽ»çœ‹çœ‹å§","é‡å¤ä¸‹å•æç¤º",{confirmButtonText:"åŽ»æŸ¥çœ‹",cancelButtonText:"å–æ¶ˆ",type:"warning",distinguishCancelAndClose:!0}),o.push("/profile/orders?tab=å¾…æ”¯ä»˜");return}catch{return}if(t.code==="LIMIT_EXCEEDED")try{await me.confirm("æ‚¨çš„æœªæ”¯ä»˜è®¢å•å¤ªå¤šäº†ï¼Œè¯·å…ˆå¤„ç†ä¸€ä¸‹å§","è®¢å•æ•°é‡è¶…é™",{confirmButtonText:"åŽ»æŸ¥çœ‹",cancelButtonText:"å–æ¶ˆ",type:"warning",distinguishCancelAndClose:!0}),o.push("/profile/orders?tab=å¾…æ”¯ä»˜");return}catch{return}I.error(t.error||"åˆ›å»ºé¢„è®¢å•å¤±è´¥");return}o.push(`/checkout/${t.pre_order_id}`)}catch(s){console.error("ç«‹å³è´­ä¹°å¤±è´¥",s)}finally{C.value=!1}}},{startAnimation:G}=Ft(),he=async s=>{if(!e.isLoggedIn){i.showLogin=!0;return}if(!P.value){I.warning("å•†å“æš‚æ—¶ç¼ºè´§");return}if(!S.value){I.warning("è¯·é€‰æ‹©å•†å“è§„æ ¼");return}if(!C.value){C.value=!0;try{const t=await l.addToCart(S.value.id,_.value);if(t.success){const h=s.target,k=h.closest("button")||h;G(k,S.value.image||j.value.image,()=>{l.miniCartVisible=!0,I.success("å·²æˆåŠŸåŠ å…¥è´­ç‰©è½¦")})}else t.code==="DIFFERENT_SKU"?I.warning(t.msg||"æš‚æ—¶ä¸æ”¯æŒåŒæ—¶è´­ä¹°ä¸åŒå•†å“"):I.error(t.msg||"åŠ å…¥è´­ç‰©è½¦å¤±è´¥")}catch{I.error("åŠ å…¥è´­ç‰©è½¦å¤±è´¥")}finally{C.value=!1}}},j=b(()=>{const s=E.value?.data||{};return{name:s.title||s.product_name||"æ­£åœ¨åŠ è½½å•†å“...",image:s.coverImage||s.image||"/images/placeholder.png",price:s.price||0,sales:s.initial_sales||s.sales||0,rating:s.rating||100}}),be=b(()=>E.value?.data?.allow_addon===!0),De=b(()=>{const s=E.value?.data?.detail_modules;return s&&s.length>0?s:[{type:"image",content:"/images/client/pc/netflix_detail_1.png"},{type:"image",content:"/images/client/pc/netflix_detail_2.png"}]}),we=["å®˜æ–¹é‡‡è´­ãƒ»æ­£å“ä¿éšœ","å…¨ç¨‹è´¨ä¿ãƒ»æ— å¿§å”®åŽ","æžé€Ÿå“åº”ãƒ»äººå·¥æœåŠ¡","å®‰å…¨åŠ å¯†ãƒ»éšç§ä¿æŠ¤"],ne=F([]),Y=b(()=>ne.value.length>0?ne.value:[{id:"1",question:"ä¸‹å•åŽå¤šä¹…å‘è´§ï¼Ÿä¸€èˆ¬ä¸ºç§’çº§è‡ªåŠ¨å‘è´§ã€‚"},{id:"2",question:"è´¦å·æ— æ³•ç™»å½•æ€Žä¹ˆåŠžï¼Ÿè¯·è”ç³»åœ¨çº¿äººå·¥å®¢æœå¤„ç†ã€‚"},{id:"3",question:"æ”¯æŒé€€æ¬¾å—ï¼Ÿè™šæ‹Ÿå•†å“å‘è´§åŽéžè´¨é‡é—®é¢˜ä¸æ”¯æŒé€€æ¬¾ã€‚"},{id:"4",question:"å¯ä»¥é•¿æœŸç»­è´¹å—ï¼Ÿæ”¯æŒåŒå·ç»­è´¹ï¼Œè¯·å…³æ³¨è®¢é˜…åˆ°æœŸæé†’ã€‚"}]),te=F(0),oe=F(!0);let Z=null;const Ce=b(()=>Y.value.length===0?[]:[...Y.value,Y.value[0]]),ke=b(()=>({transform:`translateY(-${te.value*40}px)`,transition:oe.value?"transform 0.5s ease-in-out":"none"})),Ee=()=>{Z&&clearInterval(Z),Z=ot(()=>{oe.value=!0,te.value++,te.value===Y.value.length&&setTimeout(()=>{oe.value=!1,te.value=0},500)},3e3)},xe=async()=>{try{let s=[];const t=await ve.getFaqsByProduct(A.value);if(t.success&&t.faqs.length>0&&(s=[...t.faqs]),s.length<5){const h=await ve.getFaqs();if(h.success&&h.faqs.length>0){const k=new Set(s.map(d=>d.id)),$=h.faqs.filter(d=>!k.has(d.id));s=[...s,...$].slice(0,5)}}ne.value=s}catch(s){console.error("Fetch FAQ error:",s)}},Se=s=>{s.id?o.push(`/faq?q=${s.id}`):o.push("/faq")},M=b(()=>E.value?.data?.skus||[]),z=b(()=>M.value.length>0),ae=b(()=>{const s=E.value?.data?.specGroups;if(s&&s.length>0)return s;if(M.value.length>0){const t={};return M.value.forEach(h=>{const k=h.spec_combination||{};Object.entries(k).forEach(([$,d])=>{t[$]||(t[$]=new Set),t[$].add(d)})}),Object.keys(t).map(h=>({name:h,values:Array.from(t[h])}))}return[]}),S=b(()=>M.value.length===0?null:M.value.find(s=>{const t=s.spec_combination||{};return Object.entries(x.value).every(([h,k])=>t[h]===k)})),Ae=async(s,t)=>{x.value[s]=t,S.value&&(S.value.image&&(T.value=S.value.image),await X(S.value.id))},Pe=b(()=>S.value?.price||j.value.price||35),Fe=s=>(typeof s=="string"?parseFloat(s):s).toFixed(2),ie=b(()=>{const s=M.value.map(t=>t.image).filter(Boolean);return s.length>0?Array.from(new Set(s)):[j.value.image]}),W=F(!1),re=F(!1),Te=async()=>{if(!e.isLoggedIn||!A.value)return;const{favoriteApi:s}=await ue(async()=>{const{favoriteApi:h}=await import("./CEI0siaN.js").then(k=>k.fg);return{favoriteApi:h}},__vite__mapDeps([0,1]),import.meta.url),t=await s.checkFavorite(String(A.value),S.value?.id);W.value=t.data||!1},{startAnimation:qe}=Tt(),Ie=async s=>{if(!e.isLoggedIn){i.showLogin=!0;return}if(!re.value){re.value=!0;try{const{favoriteApi:t}=await ue(async()=>{const{favoriteApi:h}=await import("./CEI0siaN.js").then(k=>k.fg);return{favoriteApi:h}},__vite__mapDeps([0,1]),import.meta.url);if(W.value)I.info('å–æ¶ˆæ”¶è—è¯·å‰å¾€"æˆ‘çš„æ”¶è—"é¡µé¢');else{const h=await t.addFavorite(String(A.value),S.value?.id);if(h.success){W.value=!0;const k=s.target,$=k.closest(".favorite-btn")||k,d=T.value||j.value.image;qe($,d,"favorites-icon-ref",()=>{}),I.success("æ”¶è—æˆåŠŸ")}else I.warning(h.msg||"æ”¶è—å¤±è´¥")}}finally{re.value=!1}}},Be=()=>o.back(),Re=async()=>{E.value?.success&&(ae.value&&ae.value.length>0&&ae.value.forEach(s=>{x.value[s.name]||(x.value[s.name]=s.values[0])}),S.value?(S.value.image&&(T.value=S.value.image),await X(S.value.id)):M.value.length>0&&M.value[0].id&&await X(M.value[0].id),xe())};return et(async()=>{await Re(),Te(),Ee()}),_e(()=>{Z&&clearInterval(Z)}),(s,t)=>{const h=yt,k=it,$=rt;return g(),p("div",qt,[t[17]||(t[17]=r("div",{style:{height:"20px"}},null,-1)),O.value?(g(),p("div",It," âš ï¸ ç½‘ç»œè¿žæŽ¥å¼‚å¸¸ï¼Œæ­£åœ¨é¢„è§ˆæ¼”ç¤ºæ•°æ® ")):U("",!0),r("div",Bt,[r("div",Rt,[r("button",{class:"back-btn",onClick:Be},[r("span",Ot,[(g(),p("svg",Lt,[...t[7]||(t[7]=[r("path",{d:"M18.5 10L13 16L18.5 22",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),t[8]||(t[8]=r("span",{class:"back-btn-text"},"è¿”å›žä¸Šä¸€é¡µ",-1))])]),r("div",Mt,[r("div",$t,[r("div",Vt,[r("div",Nt,[r("div",jt,[R(h,{src:T.value||j.value.image,fit:"contain",class:"sku-big-img"},{placeholder:J(()=>[...t[9]||(t[9]=[r("div",{class:"img-loading-placeholder"},"åŠ è½½ä¸­...",-1)])]),_:1},8,["src"])]),ie.value&&ie.value.length>0?(g(),p("div",zt,[(g(!0),p(H,null,Q(ie.value,(d,L)=>(g(),p("div",{key:L,class:ce(["sku-thumb-item",{active:T.value===d}]),onClick:Oe=>T.value=d},[r("img",{src:d,alt:"SKUå›¾ç‰‡"},null,8,Ht)],10,Ut))),128))])):U("",!0)]),r("div",Gt,[t[10]||(t[10]=r("div",{class:"premium-service-title"},"æœåŠ¡ä¿éšœ",-1)),r("div",Wt,[(g(),p(H,null,Q(we,d=>r("div",{class:"p-service-item",key:d},[R(k,{class:"p-icon"},{default:J(()=>[R(V(dt))]),_:1}),r("span",null,q(d),1)])),64))])])]),r("div",Jt,[r("div",Qt,[r("h1",Xt,q(j.value.name),1),r("div",Yt,[t[11]||(t[11]=K(" ç´¯è®¡é”€é‡ ",-1)),r("span",null,q(j.value.sales),1)])]),Y.value.length>0?(g(),p("div",{key:0,class:"faq-ticker-bar",onClick:t[0]||(t[0]=d=>Se({}))},[r("div",Zt,[r("div",{class:"faq-ticker-track",style:at(ke.value)},[(g(!0),p(H,null,Q(Ce.value,(d,L)=>(g(),p("div",{class:"faq-ticker-item",key:L},q(d.question),1))),128))],4)]),r("div",Kt,[R(k,null,{default:J(()=>[R(V(vt))]),_:1})])])):U("",!0),z.value?(g(),p("div",ea,[(g(!0),p(H,null,Q(ae.value,d=>(g(),p("div",{key:d.name,class:"spec-group"},[r("div",ta,q(d.name),1),r("div",aa,[(g(!0),p(H,null,Q(d.values,L=>(g(),p("div",{key:L,class:ce(["spec-val-btn",{active:x.value[d.name]===L}]),onClick:Oe=>Ae(d.name,L)},q(L),11,sa))),128))])]))),128))])):(g(),p("div",na,[...t[12]||(t[12]=[r("div",{class:"notice-emoji"},"ðŸ“¦âœ¨",-1),r("h3",null,"æˆ‘æ­£åœ¨ç–‘ç‹‚è¡¥è´§ä¸­ï¼",-1),r("p",null,"å•†å“æ­£åœ¨å‡†å¤‡ä¸­ï¼Œè¯·ç¨åŽå†æ¥æˆ–è”ç³»å®¢æœäº†è§£æ›´å¤š~",-1)])])),S.value?.intro?(g(),p("div",oa,[r("span",ia,q(S.value.intro),1)])):U("",!0),r("div",ra,[z.value?(g(),p(H,{key:0},[r("div",la,[r("div",ca,[r("span",ua,q(Fe(Pe.value)),1)]),r("div",da,[v.value?(g(),p("span",va,"æŸ¥è¯¢ä¸­...")):P.value?(g(),p("span",fa,"åº“å­˜: "+q(B.value),1)):(g(),p("span",ma,"æš‚æ—¶ç¼ºè´§"))])]),be.value&&P.value?(g(),p("div",ga,[r("div",_a,[r("button",{onClick:t[1]||(t[1]=d=>_.value=Math.max(1,_.value-1)),disabled:!P.value},"-",8,pa),st(r("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=d=>_.value=d),min:"1",disabled:!P.value},null,8,ya),[[nt,_.value]]),r("button",{onClick:t[3]||(t[3]=d=>_.value=_.value+1),disabled:!P.value||_.value>=B.value},"+",8,ha)])])):U("",!0)],64)):(g(),p("div",ba,[...t[13]||(t[13]=[r("span",{class:"out-of-stock-large"},"æš‚æ—¶ç¼ºè´§",-1)])]))]),r("div",Da,[r("button",{class:"primary-buy-btn",onClick:ee,disabled:v.value||!P.value||!z.value||C.value},[K(q(v.value?"åŠ è½½ä¸­...":z.value&&P.value?"ç«‹å³æžé€Ÿè´­ä¹°":"æš‚æ—¶ç¼ºè´§")+" ",1),!v.value&&P.value&&z.value?(g(),p("span",Ca,"å®‰å…¨åˆè§„Â·ç§’é€Ÿå‘è´§")):U("",!0)],8,wa),r("div",ka,[r("button",{class:"add-cart-btn",onClick:t[4]||(t[4]=d=>he(d)),disabled:v.value||!P.value||!z.value||C.value},[R(k,null,{default:J(()=>[R(V(ft))]),_:1}),t[14]||(t[14]=K(" åŠ å…¥è´­ç‰©è½¦ ",-1))],8,Ea),r("button",{class:ce(["favorite-btn",{favorited:W.value}]),onClick:t[5]||(t[5]=d=>Ie(d)),disabled:v.value||!P.value||!z.value},[R(k,null,{default:J(()=>[W.value?(g(),fe(V(gt),{key:1})):(g(),fe(V(mt),{key:0}))]),_:1}),K(" "+q(W.value?"å·²æ”¶è—":"æ”¶è—å•†å“"),1)],10,xa)])]),r("div",Sa,[R(k,null,{default:J(()=>[R(V(_t))]),_:1}),t[15]||(t[15]=K(" ç‰ˆæƒå£°æ˜Žï¼šæœ¬ç«™å±•ç¤ºçš„å¾½æ ‡ã€å•†æ ‡åŠç›¸å…³æ ‡å¿—å½’å„æƒåˆ©äººæ‰€æœ‰ã€‚ ",-1))])])])]),r("div",Aa,[t[16]||(t[16]=r("div",{class:"detail-divider"},[r("span",null,"å•†å“è¯¦æƒ…ä»‹ç»")],-1)),r("div",Pa,[(g(!0),p(H,null,Q(De.value,(d,L)=>(g(),p("div",{key:L,class:"detail-module"},[d.type==="text"?(g(),p("div",Fa,q(d.content),1)):d.type==="image"?(g(),p("img",{key:1,src:d.content,class:"detail-full-img",loading:"lazy"},null,8,Ta)):U("",!0)]))),128))])])]),R($,{visible:V(i).showLogin,onClose:t[6]||(t[6]=d=>V(i).closeLogin())},null,8,["visible"])])}}}),ls=pt(qa,[["__scopeId","data-v-7e779d38"]]);export{ls as default};
