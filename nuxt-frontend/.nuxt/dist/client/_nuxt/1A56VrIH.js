import{ak as F,f as R,r as p,g,h as D,aa as L,G as W,ac as z,w as c,o as n,a as e,c as d,k as P,n as m,D as f,t as _,b as o,d as B,l as y,dl as U,E as G,F as O,i as Q,v as S,dm as $,dn as j,L as q,au as H,B as J,_ as K}from"./CEI0siaN.js";const X=F("/images/client/pc/zhifu2.png"),Y={class:"recharge-content"},Z={class:"split-layout"},ss={class:"left-panel"},es={class:"section-container"},ts={class:"amount-grid"},as=["onClick"],ls={class:"option-content"},os={class:"amount-row"},ns={class:"amount-main"},is={key:0,class:"bonus-tag"},us=["disabled"],ds={class:"section-container"},cs={class:"pay-methods"},vs={key:0,class:"pay-check"},rs={key:0,class:"pay-check"},ps={class:"modal-footer"},ms={key:0,class:"actual-arrival-info"},fs={class:"value"},_s={key:0,class:"bonus-hint"},ys={class:"action-row"},bs=["disabled"],ks={class:"btn-text"},gs={class:"security-tip"},hs=R({__name:"WalletRechargeModal",props:{initialAmount:{type:Number,default:0}},emits:["close"],setup(M,{emit:V}){const I=V,h=M,i=p([]),b=p(!1),t=p(0),v=p(null),u=p("alipay"),k=g(()=>t.value!==-1&&i.value[t.value]?i.value[t.value].value:v.value||0),w=g(()=>t.value!==-1&&i.value[t.value]?i.value[t.value].bonus:0),N=g(()=>k.value+w.value),x=g(()=>k.value>0);function C(a){t.value=a,a!==-1&&(v.value=null)}function T(){b.value=!0,setTimeout(()=>{J.success(`已发起充值 ¥${k.value.toFixed(2)} (${u.value==="alipay"?"支付宝":"微信"})`),b.value=!1,I("close")},800)}return D(async()=>{b.value=!0;try{const a=await L.getActiveTiers();a.success&&a.data&&(i.value=a.data.map(s=>({value:s.value,bonus:parseInt(s.desc.replace(/[^0-9]/g,"")||"0")})))}catch(a){console.error("加载充值档位失败",a)}finally{b.value=!1}if(h.initialAmount>0){const a=i.value.findIndex(s=>s.value===h.initialAmount);a!==-1?t.value=a:(t.value=-1,v.value=h.initialAmount)}}),(a,s)=>{const r=G,E=z;return n(),W(E,{visible:!0,title:"购置额度",width:"860px","show-footer":!1,"theme-id":"suit-002",onClose:s[4]||(s[4]=l=>a.$emit("close"))},{default:c(()=>[e("div",Y,[s[17]||(s[17]=e("div",{class:"modal-subtitle"},"Purchase Quota",-1)),e("div",Z,[e("div",ss,[e("div",es,[s[8]||(s[8]=e("div",{class:"section-label"},"选择额度",-1)),e("div",ts,[(n(!0),d(O,null,P(i.value,(l,A)=>(n(),d("div",{key:l.value,class:m(["amount-option",{active:t.value===A}]),onClick:ws=>C(A)},[e("div",ls,[e("div",os,[e("span",ns,_(l.value),1),s[5]||(s[5]=e("span",{class:"unit"},"点",-1))]),l.bonus>0?(n(),d("div",is,[o(r,null,{default:c(()=>[o(y(U))]),_:1}),B(" 送 "+_(l.bonus),1)])):f("",!0)])],10,as))),128)),e("div",{class:m(["amount-option","custom-option",{active:t.value===-1}]),onClick:s[0]||(s[0]=l=>C(-1))},[...s[6]||(s[6]=[e("span",{class:"custom-label"},"自定义",-1)])],2)]),e("div",{class:m(["custom-input-wrapper",{visible:t.value===-1}])},[Q(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>v.value=l),type:"number",min:"1",placeholder:"请输入充值金额",disabled:t.value!==-1},null,8,us),[[S,v.value,void 0,{number:!0}]]),s[7]||(s[7]=e("span",{class:"input-suffix"},"点",-1))],2)]),e("div",ds,[s[13]||(s[13]=e("div",{class:"section-label"},"支付方式",-1)),e("div",cs,[e("div",{class:m(["pay-method",u.value==="alipay"?"active":""]),onClick:s[2]||(s[2]=l=>u.value="alipay")},[s[9]||(s[9]=e("div",{class:"icon-container alipay"},[e("img",{class:"pay-icon",src:X,alt:"支付宝"})],-1)),s[10]||(s[10]=e("span",null,"支付宝",-1)),u.value==="alipay"?(n(),d("div",vs,[o(r,null,{default:c(()=>[o(y($))]),_:1})])):f("",!0)],2),e("div",{class:m(["pay-method",u.value==="wechat"?"active":""]),onClick:s[3]||(s[3]=l=>u.value="wechat")},[s[11]||(s[11]=e("div",{class:"icon-container wechat"},[e("img",{class:"pay-icon",src:j,alt:"微信"})],-1)),s[12]||(s[12]=e("span",null,"微信",-1)),u.value==="wechat"?(n(),d("div",rs,[o(r,null,{default:c(()=>[o(y($))]),_:1})])):f("",!0)],2)])]),e("div",ps,[x.value?(n(),d("div",ms,[s[14]||(s[14]=e("span",{class:"label"},"实际到账:",-1)),e("span",fs,_(N.value)+" 点",1),w.value>0?(n(),d("span",_s,"(含赠送 "+_(w.value)+" 点)",1)):f("",!0)])):f("",!0),e("div",ys,[e("button",{class:"btn-confirm",disabled:!x.value,onClick:T},[e("span",ks,"立即支付 ¥"+_(k.value.toFixed(2)),1),o(r,{class:"btn-icon"},{default:c(()=>[o(y(q))]),_:1})],8,bs)]),e("div",gs,[o(r,null,{default:c(()=>[o(y(H))]),_:1}),s[15]||(s[15]=B(" 安全加密支付 ",-1))])])]),s[16]||(s[16]=e("div",{class:"right-spacer"},null,-1))])])]),_:1})}}}),Cs=K(hs,[["__scopeId","data-v-309fdb8b"]]);export{Cs as W};
