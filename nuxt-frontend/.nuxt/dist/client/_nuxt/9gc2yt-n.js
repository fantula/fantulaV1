import{f as z,r as u,am as A,h as R,c as V,a as i,i as L,b as l,w as a,B as n,o as C,d as c,E as O,l as P,p as W,t as v,aA as k,D as G,_ as H}from"./CEI0siaN.js";import{E as J}from"./CoJKtQsI.js";import{a as K,E as Q}from"./B77-r_qQ.js";import{E as X}from"./b7hvKMAc.js";import{E as Y}from"./BCllKHMW.js";import{E as Z,a as ee}from"./ClIUVBla.js";import{E as te}from"./BDHz1zLY.js";import{E as oe}from"./aU3tz_xb.js";import{E as le}from"./CP47LeNR.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{a as _}from"./Bvds5jDy.js";import{v as ae}from"./BrE0JoK1.js";import{E as re}from"./BOUQDXLJ.js";import"./Cp1EI20B.js";import"./Dnj8X3EN.js";import"./CNYNJsmX.js";import"./Cq9Fpw4b.js";import"./97-vZjNt.js";import"./DqBrY_lx.js";import"./BjbJQEzT.js";import"./wVnq5BSo.js";import"./Bh6H2ams.js";import"./BC9Y1jC9.js";import"./CCDBlmbt.js";import"./DE5qJ7kT.js";import"./BzZM8Et6.js";import"./DW0_wk9g.js";import"./CChPPi86.js";import"./B_7HZhJl.js";import"./D-7LAYt0.js";import"./BB_Ol6Sd.js";import"./CB_o0Cdi.js";import"./tbxUD7ww.js";import"./C6m5ANi3.js";import"./CXRxotb2.js";import"./CCoZ80-G.js";import"./hs4dPNZ2.js";import"./OwHC_0Ap.js";import"./D6FW0B1r.js";import"./DxNR5PDn.js";import"./uZ_KtR8H.js";const ie={class:"admin-page"},ne={class:"page-header"},se={class:"table-container"},me={style:{"font-size":"20px"}},de={class:"flex items-center"},pe={key:0},ue={class:"dialog-footer"},ce=z({__name:"categories",setup(_e){const y=u(!1),w=u([]),s=u(!1),E=u(!1),f=u(!1),t=A({id:"",name:"",icon:"ğŸ“",color:"#409EFF",sort_order:0,is_active:!0}),b=async()=>{y.value=!0;try{const{data:r,error:e}=await _.getCategories();if(e)throw e;w.value=r||[]}catch(r){n.error("è·å–åˆ†ç±»å¤±è´¥: "+r.message)}finally{y.value=!1}},U=()=>{f.value=!1,t.id="",t.name="",t.icon="ğŸ“",t.color="#409EFF",t.sort_order=10,t.is_active=!0,s.value=!0},B=r=>{f.value=!0,Object.assign(t,r),s.value=!0},F=async()=>{if(!t.name){n.warning("è¯·è¾“å…¥åˆ†ç±»åç§°");return}E.value=!0;try{const r={name:t.name,icon:t.icon,color:t.color,sort_order:t.sort_order,is_active:t.is_active};if(f.value){const{error:e}=await _.updateCategory(t.id,r);if(e)throw e;n.success("æ›´æ–°æˆåŠŸ")}else{const{error:e}=await _.createCategory(r);if(e)throw e;n.success("åˆ›å»ºæˆåŠŸ")}s.value=!1,b()}catch(r){n.error("æ“ä½œå¤±è´¥: "+r.message)}finally{E.value=!1}},D=async r=>{try{const{error:e}=await _.updateCategory(r.id,{is_active:r.is_active});if(e)throw r.is_active=!r.is_active,e;n.success(r.is_active?"å·²å¯ç”¨":"å·²ç¦ç”¨")}catch(e){n.error("æ›´æ–°çŠ¶æ€å¤±è´¥: "+e.message)}},I=r=>{re.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»å—ï¼Ÿ","è­¦å‘Š",{confirmButtonText:"ç¡®å®šåˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(async()=>{try{const{error:e}=await _.deleteCategory(r.id);if(e)throw e;n.success("åˆ é™¤æˆåŠŸ"),b()}catch(e){n.error("åˆ é™¤å¤±è´¥: "+e.message)}})};return R(()=>{b()}),(r,e)=>{const N=O,d=J,m=Q,h=X,S=K,x=Y,p=ee,T=te,$=oe,j=Z,q=le,M=ae;return C(),V("div",ie,[i("div",ne,[e[9]||(e[9]=i("h2",{class:"page-title"},"æ–‡ç« åˆ†ç±»ç®¡ç†",-1)),l(d,{type:"primary",onClick:U},{default:a(()=>[l(N,{class:"mr-1"},{default:a(()=>[l(P(W))]),_:1}),e[8]||(e[8]=c(" æ–°å¢åˆ†ç±» ",-1))]),_:1})]),L((C(),V("div",se,[l(S,{data:w.value,border:"",style:{width:"100%"},"row-key":"id"},{default:a(()=>[l(m,{prop:"sort_order",label:"æ’åº",width:"80",align:"center"}),l(m,{prop:"icon",label:"å›¾æ ‡",width:"80",align:"center"},{default:a(({row:o})=>[i("span",me,v(o.icon),1)]),_:1}),l(m,{prop:"name",label:"åç§°","min-width":"150"},{default:a(({row:o})=>[i("span",{style:k({color:o.color,fontWeight:"bold"})},v(o.name),5)]),_:1}),l(m,{prop:"color",label:"é¢œè‰²ä»£ç ",width:"120"},{default:a(({row:o})=>[i("div",de,[i("div",{style:k({background:o.color,width:"16px",height:"16px",borderRadius:"4px",marginRight:"8px",border:"1px solid #ddd"})},null,4),i("span",null,v(o.color),1)])]),_:1}),l(m,{label:"çŠ¶æ€",width:"100",align:"center"},{default:a(({row:o})=>[l(h,{modelValue:o.is_active,"onUpdate:modelValue":g=>o.is_active=g,"active-color":"#13ce66","inactive-color":"#ff4949",onChange:g=>D(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(m,{label:"æ“ä½œ",width:"180",fixed:"right",align:"center"},{default:a(({row:o})=>[l(d,{link:"",type:"primary",onClick:g=>B(o)},{default:a(()=>[...e[10]||(e[10]=[c("ç¼–è¾‘",-1)])]),_:1},8,["onClick"]),l(d,{link:"",type:"danger",onClick:g=>I(o)},{default:a(()=>[...e[11]||(e[11]=[c("åˆ é™¤",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])),[[M,y.value]]),l(q,{modelValue:s.value,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value=o),title:f.value?"ç¼–è¾‘åˆ†ç±»":"æ–°å¢åˆ†ç±»",width:"500px"},{footer:a(()=>[i("span",ue,[l(d,{onClick:e[6]||(e[6]=o=>s.value=!1)},{default:a(()=>[...e[14]||(e[14]=[c("å–æ¶ˆ",-1)])]),_:1}),l(d,{type:"primary",onClick:F,loading:E.value},{default:a(()=>[...e[15]||(e[15]=[c(" ç¡®å®š ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[l(j,{model:t,"label-width":"80px"},{default:a(()=>[l(p,{label:"åç§°",required:""},{default:a(()=>[l(x,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"ä¾‹å¦‚: ä½¿ç”¨æ”»ç•¥"},null,8,["modelValue"])]),_:1}),l(p,{label:"å›¾æ ‡",required:""},{default:a(()=>[l(x,{modelValue:t.icon,"onUpdate:modelValue":e[1]||(e[1]=o=>t.icon=o),placeholder:"Emoji æˆ– Element å›¾æ ‡å",style:{width:"100px"}},{append:a(()=>[t.icon?(C(),V("span",pe,v(t.icon),1)):G("",!0)]),_:1},8,["modelValue"]),e[12]||(e[12]=i("span",{class:"text-gray-400 text-xs ml-2"},"æ¨èä½¿ç”¨ Emojiï¼Œå¦‚ ğŸ“",-1))]),_:1}),l(p,{label:"é¢œè‰²",required:""},{default:a(()=>[l(T,{modelValue:t.color,"onUpdate:modelValue":e[2]||(e[2]=o=>t.color=o)},null,8,["modelValue"]),l(x,{modelValue:t.color,"onUpdate:modelValue":e[3]||(e[3]=o=>t.color=o),style:{width:"120px","margin-left":"10px"}},null,8,["modelValue"])]),_:1}),l(p,{label:"æ’åº"},{default:a(()=>[l($,{modelValue:t.sort_order,"onUpdate:modelValue":e[4]||(e[4]=o=>t.sort_order=o),min:0,max:999},null,8,["modelValue"]),e[13]||(e[13]=i("span",{class:"text-gray-400 text-xs ml-2"},"æ•°å­—è¶Šå°è¶Šé å‰",-1))]),_:1}),l(p,{label:"çŠ¶æ€"},{default:a(()=>[l(h,{modelValue:t.is_active,"onUpdate:modelValue":e[5]||(e[5]=o=>t.is_active=o),"active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),gt=H(ce,[["__scopeId","data-v-37ee2135"]]);export{gt as default};
