import{f as M,r as n,h as X,c as m,a as d,i as j,b as o,w as a,B as k,o as s,d as r,E as A,l as F,p as G,F as O,k as H,G as f,j as J,t as w,bK as Q,_ as R}from"./CEI0siaN.js";import{E as W}from"./CoJKtQsI.js";import{a as Y,E as Z}from"./DIhsiPve.js";import{E as ee,a as te}from"./ClIUVBla.js";import{E as oe}from"./BCllKHMW.js";import{a as ae,E as le}from"./B77-r_qQ.js";import{E as se}from"./BTKFVfca.js";import{E as ne}from"./DwbobqWH.js";import{E as re}from"./Ct1yoKpA.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{b as C}from"./B-Ix60ut.js";import{v as ie}from"./BrE0JoK1.js";import"./Cp1EI20B.js";import"./Dnj8X3EN.js";import"./BjbJQEzT.js";import"./97-vZjNt.js";import"./DqBrY_lx.js";import"./wVnq5BSo.js";import"./Bh6H2ams.js";import"./BC9Y1jC9.js";import"./CNYNJsmX.js";import"./Cq9Fpw4b.js";import"./aSYcAdI9.js";import"./B_7HZhJl.js";import"./DW0_wk9g.js";import"./uZ_KtR8H.js";import"./CB_o0Cdi.js";import"./BB_Ol6Sd.js";import"./BzZM8Et6.js";import"./CXRxotb2.js";import"./OwHC_0Ap.js";import"./CCDBlmbt.js";import"./C6m5ANi3.js";import"./DE5qJ7kT.js";import"./CChPPi86.js";import"./D-7LAYt0.js";const pe={class:"faq-list-page"},me={class:"page-actions"},ue={class:"toolbar-card"},de={class:"table-card"},ce={class:"question-text"},_e={key:1,class:"text-gray-400"},fe={key:0,class:"bound-product"},ge={key:1,class:"text-gray-400"},ve={class:"pagination-row"},ye=M({__name:"index",setup(Ee){const g=n(!1),x=n([]),h=n([]),q=n(0),v=n(1),y=n(20),c=n(""),_=n(""),V=async()=>{const l=await C.getCategories();l.success&&(h.value=l.categories)},i=async()=>{g.value=!0;try{const l=await C.getFaqs({page:v.value,page_size:y.value,keyword:c.value,category_id:_.value||void 0});l.success?(x.value=l.faqs,q.value=l.total):k.error(l.error||"获取列表失败")}finally{g.value=!1}},B=async l=>{const e=await C.deleteFaq(l);e.success?(k.success("删除成功"),i()):k.error(e.error||"删除失败")},$=()=>{c.value="",_.value="",i()};return X(()=>{V(),i()}),(l,e)=>{const z=A,u=W,S=Z,I=Y,E=te,P=oe,T=ee,p=le,b=se,U=ne,D=ae,K=re,N=ie;return s(),m("div",pe,[d("div",me,[o(u,{type:"primary",onClick:e[0]||(e[0]=t=>l.$router.push("/_mgmt_9Xfa3/help-center/faq/post"))},{default:a(()=>[o(z,null,{default:a(()=>[o(F(G))]),_:1}),e[5]||(e[5]=r(" 添加问题 ",-1))]),_:1})]),d("div",ue,[o(T,{inline:!0,class:"search-form"},{default:a(()=>[o(E,null,{default:a(()=>[o(I,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),placeholder:"全部分类",clearable:"",style:{width:"150px"}},{default:a(()=>[(s(!0),m(O,null,H(h.value,t=>(s(),f(S,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(P,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t),placeholder:"搜索问题关键词...","prefix-icon":"Search",clearable:"",onKeyup:J(i,["enter"])},null,8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(u,{type:"primary",onClick:i},{default:a(()=>[...e[6]||(e[6]=[r("查询",-1)])]),_:1}),o(u,{onClick:$},{default:a(()=>[...e[7]||(e[7]=[r("重置",-1)])]),_:1})]),_:1})]),_:1})]),j((s(),m("div",de,[o(D,{data:x.value,style:{width:"100%"},stripe:""},{default:a(()=>[o(p,{prop:"sort_order",label:"排序",width:"80",align:"center"}),o(p,{label:"问题","min-width":"250"},{default:a(({row:t})=>[d("span",ce,w(t.question),1)]),_:1}),o(p,{label:"分类",width:"150"},{default:a(({row:t})=>[t.category?(s(),f(b,{key:0,type:"info",effect:"plain"},{default:a(()=>[r(w(t.category.name),1)]),_:2},1024)):(s(),m("span",_e,"未分类"))]),_:1}),o(p,{label:"关联商品",width:"200"},{default:a(({row:t})=>[t.product?(s(),m("div",fe,[o(z,null,{default:a(()=>[o(F(Q))]),_:1}),d("span",null,w(t.product.product_name),1)])):(s(),m("span",ge,"-"))]),_:1}),o(p,{label:"状态",width:"100",align:"center"},{default:a(({row:t})=>[t.is_active?(s(),f(b,{key:0,type:"success",size:"small"},{default:a(()=>[...e[8]||(e[8]=[r("启用",-1)])]),_:1})):(s(),f(b,{key:1,type:"danger",size:"small"},{default:a(()=>[...e[9]||(e[9]=[r("禁用",-1)])]),_:1}))]),_:1}),o(p,{label:"操作",width:"180",align:"center",fixed:"right"},{default:a(({row:t})=>[o(u,{type:"primary",link:"",size:"small",onClick:L=>l.$router.push(`/_mgmt_9Xfa3/help-center/faq/post?id=${t.id}`)},{default:a(()=>[...e[10]||(e[10]=[r(" 编辑 ",-1)])]),_:1},8,["onClick"]),o(U,{title:"确定要删除这个问题吗？",onConfirm:L=>B(t.id)},{reference:a(()=>[o(u,{type:"danger",link:"",size:"small"},{default:a(()=>[...e[11]||(e[11]=[r("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"]),d("div",ve,[o(K,{"current-page":v.value,"onUpdate:currentPage":e[3]||(e[3]=t=>v.value=t),"page-size":y.value,"onUpdate:pageSize":e[4]||(e[4]=t=>y.value=t),total:q.value,layout:"total, prev, pager, next",onCurrentChange:i},null,8,["current-page","page-size","total"])])])),[[N,g.value]])])}}}),ct=R(ye,[["__scopeId","data-v-13c70417"]]);export{ct as default};
