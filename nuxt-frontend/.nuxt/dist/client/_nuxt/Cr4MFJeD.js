import{f as G,r as n,h as P,c as x,a as p,i as X,b as t,w as o,o as f,d as s,E as h,l as B,a2 as j,p as H,G as b,t as J,D as K,B as m,_ as O}from"./gYbOYKrZ.js";import{E as Q}from"./CswOF4xx.js";import{a as R,E as W}from"./Dj2lpOJg.js";import{E as Y}from"./BxcDqkou.js";import{E as Z}from"./Bzz8SiwP.js";import{E as ee}from"./DrogL690.js";import{E as te,a as oe}from"./A8Zj-15Y.js";import{E as ae}from"./B94kvl1B.js";import{E as le}from"./Di9v79cN.js";import{E as re}from"./qZy57oqE.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */import{a as v}from"./DkGBDzDg.js";import{v as se}from"./CUySdIcD.js";import"./D4AXxtJy.js";import"./Dnj8X3EN.js";import"./BSx1rCp4.js";import"./Cq9Fpw4b.js";import"./BdJc3h2o.js";import"./C3yI_83l.js";import"./CaswxL1d.js";import"./BlcygIWm.js";import"./Bh6H2ams.js";import"./CUkNyi1D.js";import"./pxhmPWjv.js";import"./-tO7MSA0.js";import"./CrRq4wwb.js";import"./C5EOtA6j.js";import"./BPYHQo7_.js";import"./Cr8dt13I.js";import"./DtgOm6Sf.js";import"./BB_Ol6Sd.js";import"./BYT9QUPE.js";import"./BNtqh2Az.js";import"./MkrgA_tt.js";import"./gVImYNNu.js";import"./DEN0lkI5.js";import"./CqTJWtX6.js";import"./D6FW0B1r.js";import"./Djfz0t-N.js";import"./DxwfhIR6.js";const ie={class:"faq-category-page"},ne={class:"page-header"},me={class:"header-left"},ue={class:"header-right"},pe={class:"content-card"},de={class:"dialog-footer"},_e=G({__name:"category",setup(fe){const g=n(!1),C=n([]),i=n(!1),E=n(!1),d=n(!1),V=n(""),r=n({name:"",sort_order:0,is_active:!0}),c=async()=>{g.value=!0;const a=await v.getCategories();a.success&&(C.value=a.categories),g.value=!1},D=()=>{d.value=!1,r.value={name:"",sort_order:0,is_active:!0},i.value=!0},I=a=>{d.value=!0,V.value=a.id,r.value={name:a.name,sort_order:a.sort_order,is_active:a.is_active},i.value=!0},N=async a=>{const e=await v.deleteCategory(a);e.success?(m.success("删除成功"),c()):m.error(e.error||"删除失败")},$=async()=>{if(!r.value.name)return m.warning("请输入分类名称");E.value=!0;try{if(d.value){const a=await v.updateCategory(V.value,r.value);a.success?(m.success("更新成功"),i.value=!1,c()):m.error(a.error||"更新失败")}else{const a=await v.createCategory({name:r.value.name,sort_order:r.value.sort_order});a.success?(m.success("创建成功"),i.value=!1,c()):m.error(a.error||"创建失败")}}finally{E.value=!1}};return P(c),(a,e)=>{const k=h,u=Q,_=W,w=Y,z=Z,F=R,T=ee,y=oe,U=ae,q=le,S=te,A=re,L=se;return f(),x("div",ie,[p("div",ne,[p("div",me,[t(u,{link:"",onClick:e[0]||(e[0]=l=>a.$router.push("/_mgmt_9Xfa3/faq"))},{default:o(()=>[t(k,null,{default:o(()=>[t(B(j))]),_:1}),e[6]||(e[6]=s(" 返回列表 ",-1))]),_:1}),e[7]||(e[7]=p("div",{class:"title-area"},[p("h2",{class:"page-title"},"问题分类管理")],-1))]),p("div",ue,[t(u,{type:"primary",onClick:D},{default:o(()=>[t(k,null,{default:o(()=>[t(B(H))]),_:1}),e[8]||(e[8]=s(" 新增分类 ",-1))]),_:1})])]),X((f(),x("div",pe,[t(F,{data:C.value,style:{width:"100%"}},{default:o(()=>[t(_,{prop:"sort_order",label:"排序",width:"100",align:"center"}),t(_,{prop:"name",label:"分类名称"}),t(_,{label:"状态",width:"120",align:"center"},{default:o(({row:l})=>[l.is_active?(f(),b(w,{key:0,type:"success",size:"small"},{default:o(()=>[...e[9]||(e[9]=[s("启用",-1)])]),_:1})):(f(),b(w,{key:1,type:"info",size:"small"},{default:o(()=>[...e[10]||(e[10]=[s("禁用",-1)])]),_:1}))]),_:1}),t(_,{prop:"created_at",label:"创建时间",width:"200"},{default:o(({row:l})=>[s(J(new Date(l.created_at).toLocaleString()),1)]),_:1}),t(_,{label:"操作",width:"180",align:"center"},{default:o(({row:l})=>[t(u,{type:"primary",link:"",size:"small",onClick:M=>I(l)},{default:o(()=>[...e[11]||(e[11]=[s("编辑",-1)])]),_:1},8,["onClick"]),t(z,{title:"确定删除此分类吗？",onConfirm:M=>N(l.id)},{reference:o(()=>[t(u,{type:"danger",link:"",size:"small"},{default:o(()=>[...e[12]||(e[12]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:1})]),_:1},8,["data"])])),[[L,g.value]]),t(A,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value=l),title:d.value?"编辑分类":"新增分类",width:"500px"},{footer:o(()=>[p("div",de,[t(u,{onClick:e[4]||(e[4]=l=>i.value=!1)},{default:o(()=>[...e[13]||(e[13]=[s("取消",-1)])]),_:1}),t(u,{type:"primary",onClick:$,loading:E.value},{default:o(()=>[...e[14]||(e[14]=[s("确定",-1)])]),_:1},8,["loading"])])]),default:o(()=>[t(S,{model:r.value,"label-width":"80px"},{default:o(()=>[t(y,{label:"分类名称"},{default:o(()=>[t(T,{modelValue:r.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),t(y,{label:"排序"},{default:o(()=>[t(U,{modelValue:r.value.sort_order,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.sort_order=l),min:0},null,8,["modelValue"])]),_:1}),d.value?(f(),b(y,{key:0,label:"启用状态"},{default:o(()=>[t(q,{modelValue:r.value.is_active,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.is_active=l)},null,8,["modelValue"])]),_:1})):K("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ft=O(_e,[["__scopeId","data-v-bc6e31f1"]]);export{ft as default};
