import{cm as Ie,cn as Je,bk as ie,bX as Ze,bY as M,co as Qe,bZ as le,aN as _e,b_ as et,b4 as tt,ba as Q,r as j,J as _,cp as re,cf as Ne,l as o,K as F,c0 as ot,f as at,cq as nt,bV as st,g as w,b$ as ze,cr as it,aE as lt,cs as rt,ct as ut,cu as dt,h as ct,bb as pt,c as N,o as m,D as b,F as ue,a as L,n as x,aF as J,G as z,w as A,M as H,E as D,c1 as ke,aD as de,bi as ce,t as Z,aA as Pe,cg as ft,br as Me,c3 as mt}from"./CEI0siaN.js";import{u as vt}from"./97-vZjNt.js";import{U as ee,I as pe,C as Fe}from"./BB_Ol6Sd.js";import{u as bt}from"./C6m5ANi3.js";import{b as ht,c as yt,a as gt,d as wt}from"./Cp1EI20B.js";import{i as xt}from"./Bh6H2ams.js";import{d as Ve}from"./Cq9Fpw4b.js";let E;const St={height:"0",visibility:"hidden",overflow:Je()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ct=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Te=a=>{const l=Number.parseFloat(a);return Number.isNaN(l)?a:l};function Et(a){const l=window.getComputedStyle(a),h=l.getPropertyValue("box-sizing"),t=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),i=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Ct.map(f=>[f,l.getPropertyValue(f)]),paddingSize:t,borderSize:i,boxSizing:h}}function Oe(a,l=1,h){var t,i;E||(E=document.createElement("textarea"),((t=a.parentNode)!=null?t:document.body).appendChild(E));const{paddingSize:d,borderSize:f,boxSizing:u,contextStyle:c}=Et(a);c.forEach(([y,v])=>E?.style.setProperty(y,v)),Object.entries(St).forEach(([y,v])=>E?.style.setProperty(y,v,"important")),E.value=a.value||a.placeholder||"";let p=E.scrollHeight;const C={};u==="border-box"?p=p+f:u==="content-box"&&(p=p-d),E.value="";const S=E.scrollHeight-d;if(Ie(l)){let y=S*l;u==="border-box"&&(y=y+d+f),p=Math.max(y,p),C.minHeight=`${y}px`}if(Ie(h)){let y=S*h;u==="border-box"&&(y=y+d+f),p=Math.min(y,p)}return C.height=`${p}px`,(i=E.parentNode)==null||i.removeChild(E),E=void 0,C}const It=Ze({id:{type:String,default:void 0},size:et,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:le,default:_e},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:le},prefixIcon:{type:le},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>Qe({})},autofocus:Boolean,rows:{type:Number,default:2},...vt(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),Nt={[ee]:a=>ie(a),input:a=>ie(a),change:(a,l)=>ie(a)&&(l instanceof Event||l===void 0),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function zt(a,{disabled:l,beforeFocus:h,afterFocus:t,beforeBlur:i,afterBlur:d}={}){const f=tt(),{emit:u}=f,c=Q(),p=j(!1),C=v=>{const g=Ne(h)?h(v):!1;o(l)||p.value||g||(p.value=!0,u("focus",v),t?.())},S=v=>{var g;const s=Ne(i)?i(v):!1;o(l)||v.relatedTarget&&((g=c.value)!=null&&g.contains(v.relatedTarget))||s||(p.value=!1,u("blur",v),d?.())},y=v=>{var g,s;o(l)||xt(v.target)||(g=c.value)!=null&&g.contains(document.activeElement)&&c.value!==document.activeElement||(s=a.value)==null||s.focus()};return _([c,()=>o(l)],([v,g])=>{v&&(g?v.removeAttribute("tabindex"):v.setAttribute("tabindex","-1"))}),re(c,"focus",C,!0),re(c,"blur",S,!0),re(c,"click",y,!0),{isFocused:p,wrapperRef:c,handleFocus:C,handleBlur:S}}const kt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function Pt({afterComposition:a,emit:l}){const h=j(!1),t=u=>{l?.("compositionstart",u),h.value=!0},i=u=>{var c;l?.("compositionupdate",u);const p=(c=u.target)==null?void 0:c.value,C=p[p.length-1]||"";h.value=!kt(C)},d=u=>{l?.("compositionend",u),h.value&&(h.value=!1,F(()=>a(u)))};return{isComposing:h,handleComposition:u=>{u.type==="compositionend"?d(u):i(u)},handleCompositionStart:t,handleCompositionUpdate:i,handleCompositionEnd:d}}function Mt(a){let l;function h(){if(a.value==null)return;const{selectionStart:i,selectionEnd:d,value:f}=a.value;if(i==null||d==null)return;const u=f.slice(0,Math.max(0,i)),c=f.slice(Math.max(0,d));l={selectionStart:i,selectionEnd:d,value:f,beforeTxt:u,afterTxt:c}}function t(){if(a.value==null||l==null)return;const{value:i}=a.value,{beforeTxt:d,afterTxt:f,selectionStart:u}=l;if(d==null||f==null||u==null)return;let c=i.length;if(i.endsWith(f))c=i.length-f.length;else if(i.startsWith(d))c=d.length;else{const p=d[u-1],C=i.indexOf(p,u-1);C!==-1&&(c=C+1)}a.value.setSelectionRange(c,c)}return[h,t]}const Ft=["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode"],Vt=["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role"],Tt="ElInput",Ot=at({name:Tt,inheritAttrs:!1,__name:"input",props:It,emits:Nt,setup(a,{expose:l,emit:h}){const t=a,i=h,d=nt(),f=bt(),u=st(),c=w(()=>[t.type==="textarea"?fe.b():s.b(),s.m(v.value),s.is("disabled",g.value),s.is("exceed",Be.value),{[s.b("group")]:u.prepend||u.append,[s.m("prefix")]:u.prefix||t.prefixIcon,[s.m("suffix")]:u.suffix||t.suffixIcon||t.clearable||t.showPassword,[s.bm("suffix","password-clear")]:Y.value&&ae.value,[s.b("hidden")]:t.type==="hidden"},d.class]),p=w(()=>[s.e("wrapper"),s.is("focus",oe.value)]),{form:C,formItem:S}=gt(),{inputId:y}=wt(t,{formItemContext:S}),v=ht(),g=yt(),s=ze("input"),fe=ze("textarea"),K=Q(),k=Q(),te=j(!1),W=j(!1),me=j(),U=Q(t.inputStyle),I=w(()=>K.value||k.value),{wrapperRef:Le,isFocused:oe,handleFocus:ve,handleBlur:be}=zt(I,{disabled:g,afterBlur(){var e;t.validateEvent&&((e=S?.validate)==null||e.call(S,"blur").catch(n=>Ve()))}}),he=w(()=>{var e;return(e=C?.statusIcon)!=null?e:!1}),R=w(()=>S?.validateState||""),ye=w(()=>R.value&&it[R.value]),Re=w(()=>W.value?lt:rt),$e=w(()=>[d.style]),ge=w(()=>[t.inputStyle,U.value,{resize:t.resize}]),P=w(()=>ut(t.modelValue)?"":String(t.modelValue)),Y=w(()=>t.clearable&&!g.value&&!t.readonly&&!!P.value&&(oe.value||te.value)),ae=w(()=>t.showPassword&&!g.value&&!!P.value),V=w(()=>t.showWordLimit&&!!t.maxlength&&(t.type==="text"||t.type==="textarea")&&!g.value&&!t.readonly&&!t.showPassword),ne=w(()=>P.value.length),Be=w(()=>!!V.value&&ne.value>Number(t.maxlength)),Ae=w(()=>!!u.suffix||!!t.suffixIcon||Y.value||t.showPassword||V.value||!!R.value&&he.value),He=w(()=>!!Object.keys(t.modelModifiers).length),[De,je]=Mt(K);dt(k,e=>{if(Ke(),!V.value||t.resize!=="both"&&t.resize!=="horizontal")return;const n=e[0],{width:r}=n.contentRect;me.value={right:`calc(100% - ${r+22-10}px)`}});const $=()=>{const{type:e,autosize:n}=t;if(!(!ft||e!=="textarea"||!k.value))if(n){const r=Me(n)?n.minRows:void 0,O=Me(n)?n.maxRows:void 0,B=Oe(k.value,r,O);U.value={overflowY:"hidden",...B},F(()=>{k.value.offsetHeight,U.value=B})}else U.value={minHeight:Oe(k.value).minHeight}},Ke=(e=>{let n=!1;return()=>{var r;if(n||!t.autosize)return;((r=k.value)==null?void 0:r.offsetParent)===null||(setTimeout(e),n=!0)}})($),T=()=>{const e=I.value,n=t.formatter?t.formatter(P.value):P.value;!e||e.value===n||t.type==="file"||(e.value=n)},we=e=>{const{trim:n,number:r}=t.modelModifiers;return n&&(e=e.trim()),r&&(e=`${Te(e)}`),t.formatter&&t.parser&&(e=t.parser(e)),e},se=async e=>{if(Se.value)return;const{lazy:n}=t.modelModifiers;let{value:r}=e.target;if(n){i(pe,r);return}if(r=we(r),String(r)===P.value){t.formatter&&T();return}De(),i(ee,r),i(pe,r),await F(),(t.formatter&&t.parser||!He.value)&&T(),je()},xe=async e=>{let{value:n}=e.target;n=we(n),t.modelModifiers.lazy&&i(ee,n),i(Fe,n,e),await F(),T()},{isComposing:Se,handleCompositionStart:G,handleCompositionUpdate:X,handleCompositionEnd:q}=Pt({emit:i,afterComposition:se}),We=()=>{W.value=!W.value},Ue=()=>{var e;return(e=I.value)==null?void 0:e.focus()},Ye=()=>{var e;return(e=I.value)==null?void 0:e.blur()},Ge=e=>{te.value=!1,i("mouseleave",e)},Xe=e=>{te.value=!0,i("mouseenter",e)},Ce=e=>{i("keydown",e)},qe=()=>{var e;(e=I.value)==null||e.select()},Ee=()=>{i(ee,""),i(Fe,""),i("clear"),i(pe,"")};return _(()=>t.modelValue,()=>{var e;F(()=>$()),t.validateEvent&&((e=S?.validate)==null||e.call(S,"change").catch(n=>Ve()))}),_(P,e=>{if(!I.value)return;const{trim:n,number:r}=t.modelModifiers,O=I.value.value,B=(r||t.type==="number")&&!/^0\d/.test(O)?`${Te(O)}`:O;B!==e&&(document.activeElement===I.value&&I.value.type!=="range"&&n&&B.trim()===e||T())}),_(()=>t.type,async()=>{await F(),T(),$()}),ct(()=>{!t.formatter&&t.parser,T(),F($)}),l({input:K,textarea:k,ref:I,textareaStyle:ge,autosize:pt(t,"autosize"),isComposing:Se,focus:Ue,blur:Ye,select:qe,clear:Ee,resizeTextarea:$}),(e,n)=>(m(),N("div",{class:x([c.value,{[o(s).bm("group","append")]:e.$slots.append,[o(s).bm("group","prepend")]:e.$slots.prepend}]),style:Pe($e.value),onMouseenter:Xe,onMouseleave:Ge},[b(" input "),e.type!=="textarea"?(m(),N(ue,{key:0},[b(" prepend slot "),e.$slots.prepend?(m(),N("div",{key:0,class:x(o(s).be("group","prepend"))},[J(e.$slots,"prepend")],2)):b("v-if",!0),L("div",{ref_key:"wrapperRef",ref:Le,class:x(p.value)},[b(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),N("span",{key:0,class:x(o(s).e("prefix"))},[L("span",{class:x(o(s).e("prefix-inner"))},[J(e.$slots,"prefix"),e.prefixIcon?(m(),z(o(D),{key:0,class:x(o(s).e("icon"))},{default:A(()=>[(m(),z(H(e.prefixIcon)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0),L("input",ke({id:o(y),ref_key:"input",ref:K,class:o(s).e("inner")},o(f),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?W.value?"text":"password":e.type,disabled:o(g),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:n[0]||(n[0]=(...r)=>o(G)&&o(G)(...r)),onCompositionupdate:n[1]||(n[1]=(...r)=>o(X)&&o(X)(...r)),onCompositionend:n[2]||(n[2]=(...r)=>o(q)&&o(q)(...r)),onInput:se,onChange:xe,onKeydown:Ce}),null,16,Ft),b(" suffix slot "),Ae.value?(m(),N("span",{key:1,class:x(o(s).e("suffix"))},[L("span",{class:x(o(s).e("suffix-inner"))},[!Y.value||!ae.value||!V.value?(m(),N(ue,{key:0},[J(e.$slots,"suffix"),e.suffixIcon?(m(),z(o(D),{key:0,class:x(o(s).e("icon"))},{default:A(()=>[(m(),z(H(e.suffixIcon)))]),_:1},8,["class"])):b("v-if",!0)],64)):b("v-if",!0),Y.value?(m(),z(o(D),{key:1,class:x([o(s).e("icon"),o(s).e("clear")]),onMousedown:de(o(ce),["prevent"]),onClick:Ee},{default:A(()=>[(m(),z(H(e.clearIcon)))]),_:1},8,["class","onMousedown"])):b("v-if",!0),ae.value?(m(),z(o(D),{key:2,class:x([o(s).e("icon"),o(s).e("password")]),onClick:We,onMousedown:de(o(ce),["prevent"]),onMouseup:de(o(ce),["prevent"])},{default:A(()=>[(m(),z(H(Re.value)))]),_:1},8,["class","onMousedown","onMouseup"])):b("v-if",!0),V.value?(m(),N("span",{key:3,class:x([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},[L("span",{class:x(o(s).e("count-inner"))},Z(ne.value)+" / "+Z(e.maxlength),3)],2)):b("v-if",!0),R.value&&ye.value&&he.value?(m(),z(o(D),{key:4,class:x([o(s).e("icon"),o(s).e("validateIcon"),o(s).is("loading",R.value==="validating")])},{default:A(()=>[(m(),z(H(ye.value)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0)],2),b(" append slot "),e.$slots.append?(m(),N("div",{key:1,class:x(o(s).be("group","append"))},[J(e.$slots,"append")],2)):b("v-if",!0)],64)):(m(),N(ue,{key:1},[b(" textarea "),L("textarea",ke({id:o(y),ref_key:"textarea",ref:k,class:[o(fe).e("inner"),o(s).is("focus",o(oe))]},o(f),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:o(g),readonly:e.readonly,autocomplete:e.autocomplete,style:ge.value,"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:n[3]||(n[3]=(...r)=>o(G)&&o(G)(...r)),onCompositionupdate:n[4]||(n[4]=(...r)=>o(X)&&o(X)(...r)),onCompositionend:n[5]||(n[5]=(...r)=>o(q)&&o(q)(...r)),onInput:se,onFocus:n[6]||(n[6]=(...r)=>o(ve)&&o(ve)(...r)),onBlur:n[7]||(n[7]=(...r)=>o(be)&&o(be)(...r)),onChange:xe,onKeydown:Ce}),null,16,Vt),V.value?(m(),N("span",{key:0,style:Pe(me.value),class:x([o(s).e("count"),o(s).is("outside",e.wordLimitPosition==="outside")])},Z(ne.value)+" / "+Z(e.maxlength),7)):b("v-if",!0)],64))],38))}});var Lt=ot(Ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Wt=mt(Lt);export{Wt as E,zt as a,Nt as b,Mt as c,It as i,Pt as u};
