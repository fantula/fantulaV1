import{bX as Y,eC as _,g as f,cZ as G,r as c,J,cp as H,cd as Z,cx as j,c0 as K,f as Q,bV as x,b$ as ee,cW as ae,G as se,o as y,w as R,b as S,T as te,l as e,i as oe,a as N,c1 as re,aD as le,c as A,D as z,n,aF as L,t as ne,E as ie,c_ as de,aA as ue,aR as fe,c3 as ce}from"./CEI0siaN.js";import{E as ve}from"./hs4dPNZ2.js";import{E as pe}from"./BC9Y1jC9.js";import{E as me}from"./wVnq5BSo.js";import{d as be,a as we,u as ge}from"./CP47LeNR.js";import{u as he}from"./Cp1EI20B.js";const ye=Y({...we,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),ze={...be,"resize-start":(t,r)=>t instanceof MouseEvent&&typeof r=="number",resize:(t,r)=>t instanceof MouseEvent&&typeof r=="number","resize-end":(t,r)=>t instanceof MouseEvent&&typeof r=="number"};function Ee(t,r,E){const{width:v,height:T}=_(),p=f(()=>["ltr","rtl"].includes(t.direction)),k=f(()=>["ltr","ttb"].includes(t.direction)?1:-1),D=f(()=>p.value?v.value:T.value),m=f(()=>G(s.value+k.value*b.value,4,D.value)),s=c(0),b=c(0),i=c(!1),d=c(!1);let w=[],u=[];const P=()=>{var o;const l=(o=r.value)==null?void 0:o.closest('[aria-modal="true"]');return l?p.value?l.offsetWidth:l.offsetHeight:100};J(()=>[t.size,t.resizable],()=>{d.value=!1,s.value=0,b.value=0,g()});const C=o=>{t.resizable&&(d.value||(s.value=P(),d.value=!0),w=[o.pageX,o.pageY],i.value=!0,E("resize-start",o,s.value),u.push(H(window,"mouseup",g),H(window,"mousemove",F)))},F=o=>{const{pageX:l,pageY:M}=o,I=l-w[0],h=M-w[1];b.value=p.value?I:h,E("resize",o,m.value)},g=o=>{i.value&&(w=[],s.value=m.value,b.value=0,i.value=!1,u.forEach(l=>l?.()),u=[],o&&E("resize-end",o,s.value))},$=H(r,"mousedown",C);return Z(()=>{$(),g()}),{size:f(()=>d.value?`${m.value}px`:j(t.size)),isResizing:i,isHorizontal:p}}const ke=["aria-label","aria-labelledby","aria-describedby"],Ce=["id","aria-level"],Re=["aria-label"],Se=["id"],Ae=Q({name:"ElDrawer",inheritAttrs:!1,__name:"drawer",props:ye,emits:ze,setup(t,{expose:r,emit:E}){const v=t,T=E,p=x();he({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},f(()=>!!p.title));const k=c(),D=c(),m=c(),s=ee("drawer"),{t:b}=ae(),{afterEnter:i,afterLeave:d,beforeLeave:w,visible:u,rendered:P,titleId:C,bodyId:F,zIndex:g,onModalClick:$,onOpenAutoFocus:o,onCloseAutoFocus:l,onFocusoutPrevented:M,onCloseRequested:I,handleClose:h}=ge(v,k),{isHorizontal:V,size:X,isResizing:q}=Ee(v,m,T),O=f(()=>v.modalPenetrable&&!v.modal);return r({handleClose:h,afterEnter:i,afterLeave:d}),(a,B)=>(y(),se(e(me),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:R(()=>[S(te,{name:e(s).b("fade"),onAfterEnter:e(i),onAfterLeave:e(d),onBeforeLeave:e(w),persisted:""},{default:R(()=>{var U;return[oe(S(e(ve),{mask:a.modal,"overlay-class":[e(s).is("drawer"),(U=a.modalClass)!=null?U:"",`${e(s).namespace.value}-modal-drawer`,e(s).is("penetrable",O.value)],"z-index":e(g),onClick:e($)},{default:R(()=>[S(e(pe),{loop:"",trapped:e(u),"focus-trap-el":k.value,"focus-start-el":D.value,onFocusAfterTrapped:e(o),onFocusAfterReleased:e(l),onFocusoutPrevented:e(M),onReleaseRequested:e(I)},{default:R(()=>[N("div",re({ref_key:"drawerRef",ref:k,"aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(C),"aria-describedby":e(F)},a.$attrs,{class:[e(s).b(),a.direction,e(u)&&"open",e(s).is("dragging",e(q))],style:{[e(V)?"width":"height"]:e(X)},role:"dialog",onClick:B[1]||(B[1]=le(()=>{},["stop"]))}),[N("span",{ref_key:"focusStartRef",ref:D,class:n(e(s).e("sr-focus")),tabindex:"-1"},null,2),a.withHeader?(y(),A("header",{key:0,class:n([e(s).e("header"),a.headerClass])},[a.$slots.title?L(a.$slots,"title",{key:1},()=>[z(" DEPRECATED SLOT ")]):L(a.$slots,"header",{key:0,close:e(h),titleId:e(C),titleClass:e(s).e("title")},()=>[N("span",{id:e(C),role:"heading","aria-level":a.headerAriaLevel,class:n(e(s).e("title"))},ne(a.title),11,Ce)]),a.showClose?(y(),A("button",{key:2,"aria-label":e(b)("el.drawer.close"),class:n(e(s).e("close-btn")),type:"button",onClick:B[0]||(B[0]=(...W)=>e(h)&&e(h)(...W))},[S(e(ie),{class:n(e(s).e("close"))},{default:R(()=>[S(e(de))]),_:1},8,["class"])],10,Re)):z("v-if",!0)],2)):z("v-if",!0),e(P)?(y(),A("div",{key:1,id:e(F),class:n([e(s).e("body"),a.bodyClass])},[L(a.$slots,"default")],10,Se)):z("v-if",!0),a.$slots.footer?(y(),A("div",{key:2,class:n([e(s).e("footer"),a.footerClass])},[L(a.$slots,"footer")],2)):z("v-if",!0),a.resizable?(y(),A("div",{key:3,ref_key:"draggerRef",ref:m,style:ue({zIndex:e(g)}),class:n(e(s).e("dragger"))},null,6)):z("v-if",!0)],16,ke)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[fe,e(u)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var De=K(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Me=ce(De);export{Me as E,ye as a,ze as d};
