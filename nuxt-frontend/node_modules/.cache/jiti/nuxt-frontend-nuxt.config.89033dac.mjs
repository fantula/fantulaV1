"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0; // https://nuxt.com/docs/api/configuration/nuxt-config
var _default = exports.default = defineNuxtConfig({
  // 兼容性日期
  compatibilityDate: '2025-07-01',

  // 开发工具
  devtools: { enabled: true },

  // 模块
  modules: [
  '@pinia/nuxt',
  '@element-plus/nuxt'],


  // 组件自动导入
  components: [
  { path: '~/components/admin/base', pathPrefix: false },
  { path: '~/components/pc', pathPrefix: false },
  { path: '~/components/mobile', pathPrefix: false },
  { path: '~/components/shared', pathPrefix: false },
  '~/components'],


  // 自动导入配置 (Composables & Stores)
  imports: {
    dirs: [
    'composables/**',
    'stores/**']

  },

  // 应用配置
  app: {
    pageTransition: { name: 'page-slide', mode: 'out-in' },
    head: {
      title: '凡图拉｜智能海外代充代付平台',
      meta: [
      { charset: 'utf-8' },
      { name: 'viewport', content: 'width=device-width, initial-scale=1' },
      { name: 'description', content: '提供 Netflix、Spotify、YouTube Premium 等流媒体会员代充服务，价格稳定，售后支持' },
      { name: 'keywords', content: '凡图拉,流媒体,数字产品,Netflix,Disney+,Apple TV,技术支持,社区帮助' },
      { name: 'author', content: '凡图拉团队' },
      { name: 'robots', content: 'index, follow' },
      { name: 'googlebot', content: 'index, follow' },
      { name: 'language', content: 'zh-CN' },
      { name: 'revisit-after', content: '7 days' },
      // Open Graph
      { property: 'og:title', content: '凡图拉｜智能海外代充代付平台' },
      { property: 'og:description', content: '提供 Netflix、Spotify、YouTube Premium 等流媒体会员代充服务，价格稳定，售后支持' },
      { property: 'og:type', content: 'website' },
      { property: 'og:site_name', content: '凡图拉' },
      { property: 'og:locale', content: 'zh_CN' },
      { property: 'og:image', content: '/images/og-image.jpg' },
      { property: 'og:image:width', content: '1200' },
      { property: 'og:image:height', content: '630' },
      { property: 'og:url', content: 'http://localhost:3000' },
      // Twitter Card
      { name: 'twitter:card', content: 'summary_large_image' },
      { name: 'twitter:title', content: '凡图拉｜智能海外代充代付平台' },
      { name: 'twitter:description', content: '提供 Netflix、Spotify、YouTube Premium 等流媒体会员代充服务，价格稳定，售后支持。' },
      { name: 'twitter:image', content: '/images/og-image.jpg' }],

      link: [
      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },
      { rel: 'canonical', href: 'http://localhost:3000' },
      { rel: 'alternate', hreflang: 'zh-CN', href: 'http://localhost:3000' },
      { rel: 'preconnect', href: 'https://fonts.googleapis.com' },
      { rel: 'dns-prefetch', href: 'http://127.0.0.1:54321' }]

    }
  },



  // 运行时配置
  runtimeConfig: {
    // 私有配置（仅在服务端可用）
    apiSecret: process.env.API_SECRET,
    // Supabase 配置 (服务端)
    supabaseKey: process.env.SUPABASE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0',
    supabaseServiceKey: process.env.SUPABASE_SERVICE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU',
    // 微信支付配置 (服务端私有)
    wechatPayMchid: process.env.WECHAT_PAY_MCHID || '',
    wechatPayAppid: process.env.WECHAT_PAY_APPID || '',
    wechatPayApiV3Key: process.env.WECHAT_PAY_API_V3_KEY || '',
    wechatPaySerialNo: process.env.WECHAT_PAY_SERIAL_NO || '',
    wechatPayPrivateKey: process.env.WECHAT_PAY_PRIVATE_KEY || '',
    wechatPayNotifyUrl: process.env.WECHAT_PAY_NOTIFY_URL || '',
    wechatAppSecret: process.env.WECHAT_APP_SECRET || '',

    // 公共配置（客户端和服务端都可用）
    public: {
      apiBase: process.env.SUPABASE_URL || 'http://127.0.0.1:54321',
      appName: '凡图拉',
      siteUrl: process.env.SITE_URL || 'https://www.fantula.com',
      // 微信公众号 AppID（前端用于构建 OAuth URL）
      wechatAppid: process.env.WECHAT_PAY_APPID || 'wxc2042fae927b28b8'
    }
  },

  // 代理配置
  nitro: {
    devProxy: {
      // 统一API代理地址为 Supabase 本地服务
      // 注意: /api/wechat 由 Nuxt Server API 处理，不代理
      // 其他 /api 路径可能需要代理到 Supabase (如有旧代码依赖)
      '/product': {
        target: 'http://127.0.0.1:54321',
        changeOrigin: true,
        prependPath: true
      },
      '/basic': {
        target: 'http://127.0.0.1:54321',
        changeOrigin: true,
        prependPath: true
      },
      '/question': {
        target: 'http://127.0.0.1:54321',
        changeOrigin: true,
        prependPath: true
      },
      '/sys': {
        target: 'http://127.0.0.1:54321',
        changeOrigin: true,
        prependPath: true
      }
    },
    // 预渲染配置
    prerender: {
      crawlLinks: false,
      routes: ['/about-us', '/service', '/faq'],
      ignore: ['/pc/**', '/mobile/**']
    }
  },

  // 构建配置
  build: {
    transpile: ['axios']
  },

  // 类型检查
  typescript: {
    strict: false,
    typeCheck: false
  },

  // 路由配置
  router: {
    options: {
      scrollBehaviorType: 'smooth'
    }
  },

  // SSR配置 - 启用服务端渲染
  ssr: true,

  // 确保客户端导航正常工作
  experimental: {
    payloadExtraction: false
  },

  // SEO 优化配置
  css: ['@/assets/styles/theme-blue-orange.css'],

  hooks: {
    'pages:extend'(pages) {
      // 1. 找到所有在 pages/pc 下的页面
      const clientPages = pages.filter((p) => p.path.startsWith('/pc'));

      // 2. 为每个 pc 页面创建一个根路径别名
      clientPages.forEach((p) => {
        // 去掉 path 中的 /pc 前缀
        // 例如: /pc/about-us -> /about-us
        // 例如: /pc -> /
        let newPath = p.path.replace(/^\/pc/, '');
        if (newPath === '') newPath = '/';

        // 避免重复定义 (虽然 Nuxt 会处理，但最好检查一下)
        const exists = pages.some((existing) => existing.path === newPath);
        if (!exists) {
          pages.push({
            ...p,
            name: p.name ? 'root-' + p.name : undefined,
            path: newPath
          });
        }
      });
    }
  }
}); /* v9-b75d417517663ee0 */
